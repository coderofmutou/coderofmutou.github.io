<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>第18章_主从复制 | Bombax&#39;s Knowledge Document Notes</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/img/favicon.ico">
    <meta name="description" content="技术知识学习笔记">
    <meta name="keywords" content="技术知识学习笔记">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/assets/css/0.styles.a5ee4d2c.css" as="style"><link rel="preload" href="/assets/js/app.ca5c989c.js" as="script"><link rel="preload" href="/assets/js/3.f2884e99.js" as="script"><link rel="preload" href="/assets/js/2.81e8b964.js" as="script"><link rel="preload" href="/assets/js/43.7426d1ac.js" as="script"><link rel="prefetch" href="/assets/js/1.f754fd0b.js"><link rel="prefetch" href="/assets/js/10.bde6e567.js"><link rel="prefetch" href="/assets/js/100.000718ad.js"><link rel="prefetch" href="/assets/js/101.863f022a.js"><link rel="prefetch" href="/assets/js/102.7b45f43b.js"><link rel="prefetch" href="/assets/js/103.ba5681a8.js"><link rel="prefetch" href="/assets/js/104.e35b7e87.js"><link rel="prefetch" href="/assets/js/105.15a150cd.js"><link rel="prefetch" href="/assets/js/106.aea81b3b.js"><link rel="prefetch" href="/assets/js/107.4f4dec09.js"><link rel="prefetch" href="/assets/js/108.0079fda6.js"><link rel="prefetch" href="/assets/js/109.7a5059de.js"><link rel="prefetch" href="/assets/js/11.fa1b0bc7.js"><link rel="prefetch" href="/assets/js/110.85007649.js"><link rel="prefetch" href="/assets/js/111.dbec93e3.js"><link rel="prefetch" href="/assets/js/112.f17a38c0.js"><link rel="prefetch" href="/assets/js/113.6478506e.js"><link rel="prefetch" href="/assets/js/114.6031c0db.js"><link rel="prefetch" href="/assets/js/115.d7094af2.js"><link rel="prefetch" href="/assets/js/116.316a6234.js"><link rel="prefetch" href="/assets/js/117.1336f5e0.js"><link rel="prefetch" href="/assets/js/118.4b882789.js"><link rel="prefetch" href="/assets/js/119.503f83be.js"><link rel="prefetch" href="/assets/js/12.04b9b957.js"><link rel="prefetch" href="/assets/js/120.af7d94d8.js"><link rel="prefetch" href="/assets/js/121.5cd3597d.js"><link rel="prefetch" href="/assets/js/122.82f45642.js"><link rel="prefetch" href="/assets/js/123.f2ba0b19.js"><link rel="prefetch" href="/assets/js/13.680e50fd.js"><link rel="prefetch" href="/assets/js/14.dfca4100.js"><link rel="prefetch" href="/assets/js/15.01784967.js"><link rel="prefetch" href="/assets/js/16.81c1d5ab.js"><link rel="prefetch" href="/assets/js/17.9a472859.js"><link rel="prefetch" href="/assets/js/18.5366cb68.js"><link rel="prefetch" href="/assets/js/19.b1b74ef9.js"><link rel="prefetch" href="/assets/js/20.e938fa21.js"><link rel="prefetch" href="/assets/js/21.3e38db33.js"><link rel="prefetch" href="/assets/js/22.f9d18654.js"><link rel="prefetch" href="/assets/js/23.8eea4b67.js"><link rel="prefetch" href="/assets/js/24.6fe732dc.js"><link rel="prefetch" href="/assets/js/25.b1885cb6.js"><link rel="prefetch" href="/assets/js/26.936ee89a.js"><link rel="prefetch" href="/assets/js/27.fb3beb63.js"><link rel="prefetch" href="/assets/js/28.af721a74.js"><link rel="prefetch" href="/assets/js/29.427b7eae.js"><link rel="prefetch" href="/assets/js/30.2af5e34e.js"><link rel="prefetch" href="/assets/js/31.60102330.js"><link rel="prefetch" href="/assets/js/32.746872da.js"><link rel="prefetch" href="/assets/js/33.9466d03b.js"><link rel="prefetch" href="/assets/js/34.c7f7b0ef.js"><link rel="prefetch" href="/assets/js/35.53799eb8.js"><link rel="prefetch" href="/assets/js/36.e8875fc1.js"><link rel="prefetch" href="/assets/js/37.c386b2c5.js"><link rel="prefetch" href="/assets/js/38.ee46082f.js"><link rel="prefetch" href="/assets/js/39.11d092ff.js"><link rel="prefetch" href="/assets/js/4.920d0610.js"><link rel="prefetch" href="/assets/js/40.4ee40bcf.js"><link rel="prefetch" href="/assets/js/41.81c3174c.js"><link rel="prefetch" href="/assets/js/42.18f42b9d.js"><link rel="prefetch" href="/assets/js/44.d5baff75.js"><link rel="prefetch" href="/assets/js/45.7b25c5ca.js"><link rel="prefetch" href="/assets/js/46.dff72ed3.js"><link rel="prefetch" href="/assets/js/47.15531a4f.js"><link rel="prefetch" href="/assets/js/48.48bbc098.js"><link rel="prefetch" href="/assets/js/49.49acd468.js"><link rel="prefetch" href="/assets/js/5.847584a2.js"><link rel="prefetch" href="/assets/js/50.e26ee1bf.js"><link rel="prefetch" href="/assets/js/51.6728bddb.js"><link rel="prefetch" href="/assets/js/52.c238e7bf.js"><link rel="prefetch" href="/assets/js/53.025903f6.js"><link rel="prefetch" href="/assets/js/54.05baf03a.js"><link rel="prefetch" href="/assets/js/55.b6fc3e0a.js"><link rel="prefetch" href="/assets/js/56.8e5ef1fc.js"><link rel="prefetch" href="/assets/js/57.db41b6fb.js"><link rel="prefetch" href="/assets/js/58.b4cb51f8.js"><link rel="prefetch" href="/assets/js/59.423b27e1.js"><link rel="prefetch" href="/assets/js/6.b384c550.js"><link rel="prefetch" href="/assets/js/60.57eff889.js"><link rel="prefetch" href="/assets/js/61.387a5103.js"><link rel="prefetch" href="/assets/js/62.23ba2982.js"><link rel="prefetch" href="/assets/js/63.2d69780b.js"><link rel="prefetch" href="/assets/js/64.d3f669fb.js"><link rel="prefetch" href="/assets/js/65.f5410640.js"><link rel="prefetch" href="/assets/js/66.59887fb2.js"><link rel="prefetch" href="/assets/js/67.01fba30e.js"><link rel="prefetch" href="/assets/js/68.8a6bbb81.js"><link rel="prefetch" href="/assets/js/69.12e673c4.js"><link rel="prefetch" href="/assets/js/70.a227d4b3.js"><link rel="prefetch" href="/assets/js/71.bd6a3bd7.js"><link rel="prefetch" href="/assets/js/72.4f2efca4.js"><link rel="prefetch" href="/assets/js/73.7dbf57a8.js"><link rel="prefetch" href="/assets/js/74.28c26d0a.js"><link rel="prefetch" href="/assets/js/75.d36a4feb.js"><link rel="prefetch" href="/assets/js/76.9123efc1.js"><link rel="prefetch" href="/assets/js/77.cbe2020d.js"><link rel="prefetch" href="/assets/js/78.7ab3eb40.js"><link rel="prefetch" href="/assets/js/79.bc69c4a8.js"><link rel="prefetch" href="/assets/js/80.da17de0b.js"><link rel="prefetch" href="/assets/js/81.1d16813f.js"><link rel="prefetch" href="/assets/js/82.586f2e97.js"><link rel="prefetch" href="/assets/js/83.129cc5fa.js"><link rel="prefetch" href="/assets/js/84.83d65ed9.js"><link rel="prefetch" href="/assets/js/85.f4327096.js"><link rel="prefetch" href="/assets/js/86.866a7d4f.js"><link rel="prefetch" href="/assets/js/87.f8aba274.js"><link rel="prefetch" href="/assets/js/88.43c5a138.js"><link rel="prefetch" href="/assets/js/89.b47b6d86.js"><link rel="prefetch" href="/assets/js/9.ef15744b.js"><link rel="prefetch" href="/assets/js/90.4950712a.js"><link rel="prefetch" href="/assets/js/91.80bbaffe.js"><link rel="prefetch" href="/assets/js/92.0d03ce50.js"><link rel="prefetch" href="/assets/js/93.fff94cff.js"><link rel="prefetch" href="/assets/js/94.91d0e36d.js"><link rel="prefetch" href="/assets/js/95.15227fb3.js"><link rel="prefetch" href="/assets/js/96.b3ef20b0.js"><link rel="prefetch" href="/assets/js/97.9e5e1675.js"><link rel="prefetch" href="/assets/js/98.b213b526.js"><link rel="prefetch" href="/assets/js/99.1ec76897.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.1b448e12.js">
    <link rel="stylesheet" href="/assets/css/0.styles.a5ee4d2c.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/logo.webp" alt="Bombax's Knowledge Document Notes" class="logo"> <span class="site-name can-hide">Bombax's Knowledge Document Notes</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java基础" class="dropdown-title"><a href="/java-basic/" class="link-title router-link-active">Java基础</a> <span class="title" style="display:none;">Java基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>前置</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/java-basic/java-learning/" class="nav-link">尚硅谷Java学习</a></li><li class="dropdown-subitem"><a href="/java-basic/software-install-config/" class="nav-link">基础软件安装与配置</a></li></ul></li><li class="dropdown-item"><h4>核心</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/java-basic/java-from-entry-to-proficiency/" class="nav-link">Java从入门到精通(JDK17版)</a></li><li class="dropdown-subitem"><a href="/java-basic/mysql-from-beginners-to-advanced/beginners/" class="nav-link">MySQL从入门到高级-基础篇</a></li><li class="dropdown-subitem"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/" class="nav-link router-link-active">MySQL从入门到高级-高级篇</a></li><li class="dropdown-subitem"><a href="/java-basic/jdbc-core/" class="nav-link">JDBC 核心技术(JDK21版)</a></li></ul></li><li class="dropdown-item"><h4>学习笔记</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/pojo/" class="nav-link">POJO 概念</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="微服务核心" class="dropdown-title"><a href="/micro-service-core/" class="link-title">微服务核心</a> <span class="title" style="display:none;">微服务核心</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Spring Cloud</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/micro-service-core/SpringCloud/" class="nav-link">SpringCloud</a></li><li class="dropdown-subitem"><a href="/micro-service-core/SpringCloud-Alibaba/" class="nav-link">SpringCloud-Alibaba</a></li></ul></li><li class="dropdown-item"><h4>持久层框架</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/micro-service-core/MyBatis/" class="nav-link">MyBatis</a></li><li class="dropdown-subitem"><a href="/micro-service-core/MyBatisPlus/" class="nav-link">MyBatis-Plus</a></li></ul></li><li class="dropdown-item"><h4>相关知识</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/20b7dd/" class="nav-link">Mybatis 代码生成工具比较</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="微服务生态" class="dropdown-title"><a href="/micro-service-ecology/" class="link-title">微服务生态</a> <span class="title" style="display:none;">微服务生态</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>安全框架</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/micro-service-ecology/SpringSecurity/" class="nav-link">安全框架之 Spring Security</a></li><li class="dropdown-subitem"><a href="/micro-service-ecology/Shiro/" class="nav-link">安全框架之 Shiro</a></li></ul></li><li class="dropdown-item"><h4>定时任务框架</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/micro-service-ecology/Quartz/" class="nav-link">定时任务框架之 Quartz</a></li><li class="dropdown-subitem"><a href="/micro-service-ecology/XXL-JOB/" class="nav-link">定时任务框架之 XXL-JOB</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="实用工具" class="dropdown-title"><a href="/tools/" class="link-title">实用工具</a> <span class="title" style="display:none;">实用工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/tools/java-logs/" class="nav-link">Java 日志热门框架</a></li><li class="dropdown-item"><!----> <a href="/tools/git/" class="nav-link">Git 常用命令</a></li><li class="dropdown-item"><!----> <a href="/tools/swagger/" class="nav-link">Swagger API 文档生成工具</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><!----> <span class="title" style="display:;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/weibocom/motan/wiki/zh_overview" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Motan RPC
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.knowledgedict.com/tutorial/lombok-intro.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Lombok Tutorial
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://projectlombok.org/features/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Lombok Features
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/alibaba/fastjson2/wiki/fastjson2_intro_cn" target="_blank" rel="noopener noreferrer" class="nav-link external">
  FastJSON2
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://felord.cn/_doc/spring/5.x.RELEASE/_book/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Spring Framework 5 中文文档
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://x-stream.github.io/index.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  XStream
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://neoremind.com/2016/02/java%E7%9A%84%E4%B8%9A%E5%8A%A1%E9%80%BB%E8%BE%91%E9%AA%8C%E8%AF%81%E6%A1%86%E6%9E%B6fluent-validator/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  fluent-validator 业务逻辑验证框架
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.ehcache.org/documentation/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ehcache java 缓存框架
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/alibaba/jetcache" target="_blank" rel="noopener noreferrer" class="nav-link external">
  jetcache java 缓存框架
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://caffeine.gitbook.io/caffeine" target="_blank" rel="noopener noreferrer" class="nav-link external">
  caffeine 缓存框架
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://springdoc.cn/spring/integration.html#cache" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Spring Cache
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.cnblogs.com/imyjy/p/15695160.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  主流缓存框架调研
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/redisson/redisson/wiki/%E7%9B%AE%E5%BD%95" target="_blank" rel="noopener noreferrer" class="nav-link external">
  redisson 官方中文文档
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://blog.csdn.net/u012934325/article/details/100652805" target="_blank" rel="noopener noreferrer" class="nav-link external">
  LiquiBase 中文学习指南
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://docs.liquibase.com/concepts/introduction-to-liquibase.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  LiquiBase 官方文档
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/coderofmutou/coderofmutou.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="/img/avatar.webp"> <div class="blogger-info"><h3>bombax</h3> <span>小小程序猿</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java基础" class="dropdown-title"><a href="/java-basic/" class="link-title router-link-active">Java基础</a> <span class="title" style="display:none;">Java基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>前置</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/java-basic/java-learning/" class="nav-link">尚硅谷Java学习</a></li><li class="dropdown-subitem"><a href="/java-basic/software-install-config/" class="nav-link">基础软件安装与配置</a></li></ul></li><li class="dropdown-item"><h4>核心</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/java-basic/java-from-entry-to-proficiency/" class="nav-link">Java从入门到精通(JDK17版)</a></li><li class="dropdown-subitem"><a href="/java-basic/mysql-from-beginners-to-advanced/beginners/" class="nav-link">MySQL从入门到高级-基础篇</a></li><li class="dropdown-subitem"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/" class="nav-link router-link-active">MySQL从入门到高级-高级篇</a></li><li class="dropdown-subitem"><a href="/java-basic/jdbc-core/" class="nav-link">JDBC 核心技术(JDK21版)</a></li></ul></li><li class="dropdown-item"><h4>学习笔记</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/pojo/" class="nav-link">POJO 概念</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="微服务核心" class="dropdown-title"><a href="/micro-service-core/" class="link-title">微服务核心</a> <span class="title" style="display:none;">微服务核心</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Spring Cloud</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/micro-service-core/SpringCloud/" class="nav-link">SpringCloud</a></li><li class="dropdown-subitem"><a href="/micro-service-core/SpringCloud-Alibaba/" class="nav-link">SpringCloud-Alibaba</a></li></ul></li><li class="dropdown-item"><h4>持久层框架</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/micro-service-core/MyBatis/" class="nav-link">MyBatis</a></li><li class="dropdown-subitem"><a href="/micro-service-core/MyBatisPlus/" class="nav-link">MyBatis-Plus</a></li></ul></li><li class="dropdown-item"><h4>相关知识</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/20b7dd/" class="nav-link">Mybatis 代码生成工具比较</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="微服务生态" class="dropdown-title"><a href="/micro-service-ecology/" class="link-title">微服务生态</a> <span class="title" style="display:none;">微服务生态</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>安全框架</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/micro-service-ecology/SpringSecurity/" class="nav-link">安全框架之 Spring Security</a></li><li class="dropdown-subitem"><a href="/micro-service-ecology/Shiro/" class="nav-link">安全框架之 Shiro</a></li></ul></li><li class="dropdown-item"><h4>定时任务框架</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/micro-service-ecology/Quartz/" class="nav-link">定时任务框架之 Quartz</a></li><li class="dropdown-subitem"><a href="/micro-service-ecology/XXL-JOB/" class="nav-link">定时任务框架之 XXL-JOB</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="实用工具" class="dropdown-title"><a href="/tools/" class="link-title">实用工具</a> <span class="title" style="display:none;">实用工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/tools/java-logs/" class="nav-link">Java 日志热门框架</a></li><li class="dropdown-item"><!----> <a href="/tools/git/" class="nav-link">Git 常用命令</a></li><li class="dropdown-item"><!----> <a href="/tools/swagger/" class="nav-link">Swagger API 文档生成工具</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><!----> <span class="title" style="display:;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/weibocom/motan/wiki/zh_overview" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Motan RPC
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.knowledgedict.com/tutorial/lombok-intro.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Lombok Tutorial
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://projectlombok.org/features/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Lombok Features
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/alibaba/fastjson2/wiki/fastjson2_intro_cn" target="_blank" rel="noopener noreferrer" class="nav-link external">
  FastJSON2
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://felord.cn/_doc/spring/5.x.RELEASE/_book/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Spring Framework 5 中文文档
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://x-stream.github.io/index.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  XStream
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://neoremind.com/2016/02/java%E7%9A%84%E4%B8%9A%E5%8A%A1%E9%80%BB%E8%BE%91%E9%AA%8C%E8%AF%81%E6%A1%86%E6%9E%B6fluent-validator/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  fluent-validator 业务逻辑验证框架
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.ehcache.org/documentation/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ehcache java 缓存框架
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/alibaba/jetcache" target="_blank" rel="noopener noreferrer" class="nav-link external">
  jetcache java 缓存框架
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://caffeine.gitbook.io/caffeine" target="_blank" rel="noopener noreferrer" class="nav-link external">
  caffeine 缓存框架
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://springdoc.cn/spring/integration.html#cache" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Spring Cache
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.cnblogs.com/imyjy/p/15695160.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  主流缓存框架调研
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/redisson/redisson/wiki/%E7%9B%AE%E5%BD%95" target="_blank" rel="noopener noreferrer" class="nav-link external">
  redisson 官方中文文档
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://blog.csdn.net/u012934325/article/details/100652805" target="_blank" rel="noopener noreferrer" class="nav-link external">
  LiquiBase 中文学习指南
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://docs.liquibase.com/concepts/introduction-to-liquibase.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  LiquiBase 官方文档
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/coderofmutou/coderofmutou.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>前置</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>核心</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Java从入门到精通(JDK17版)</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>MySQL从入门到高级-基础篇</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>MySQL从入门到高级-高级篇</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-0/" class="sidebar-link">第00章_写在前面</a></li><li><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-1/" class="sidebar-link">第01章_Linux 下 MySQL 的安装与使用</a></li><li><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-2/" class="sidebar-link">第02章_MySQL 的数据目录</a></li><li><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-3/" class="sidebar-link">第03章_用户与权限管理</a></li><li><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-4/" class="sidebar-link">第04章_逻辑架构</a></li><li><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-5/" class="sidebar-link">第05章_存储引擎</a></li><li><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-6/" class="sidebar-link">第06章_索引的数据结构</a></li><li><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-7/" class="sidebar-link">第07章_InnoDB 数据存储结构</a></li><li><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-8/" class="sidebar-link">第08章_索引的创建与设计原则</a></li><li><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-9/" class="sidebar-link">第09章_性能分析工具的使用</a></li><li><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-10/" class="sidebar-link">第10章_索引优化与查询优化</a></li><li><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-11/" class="sidebar-link">第11章_数据库的设计规范</a></li><li><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-12/" class="sidebar-link">第12章_数据库其它调优策略</a></li><li><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-13/" class="sidebar-link">第13章_事务基础知识</a></li><li><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-14/" class="sidebar-link">第14章_MySQL 事务日志</a></li><li><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-15/" class="sidebar-link">第15章_锁</a></li><li><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-16/" class="sidebar-link">第16章_多版本并发控制</a></li><li><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-17/" class="sidebar-link">第17章_其它数据库日志</a></li><li><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-18/" aria-current="page" class="active sidebar-link">第18章_主从复制</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-18/#_1-主从复制概述" class="sidebar-link">1. 主从复制概述</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-18/#_1-1-如何提升数据库并发能力" class="sidebar-link">1.1 如何提升数据库并发能力</a></li><li class="sidebar-sub-header level3"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-18/#_1-2-主从复制的作用" class="sidebar-link">1.2 主从复制的作用</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-18/#_2-主从复制的原理" class="sidebar-link">2. 主从复制的原理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-18/#_2-1-原理剖析" class="sidebar-link">2.1 原理剖析</a></li><li class="sidebar-sub-header level3"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-18/#_2-2-复制的基本原则" class="sidebar-link">2.2 复制的基本原则</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-18/#_3-一主一从架构搭建" class="sidebar-link">3. 一主一从架构搭建</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-18/#_3-1-准备工作" class="sidebar-link">3.1 准备工作</a></li><li class="sidebar-sub-header level3"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-18/#_3-2-主机配置文件" class="sidebar-link">3.2 主机配置文件</a></li><li class="sidebar-sub-header level3"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-18/#_3-3-从机配置文件" class="sidebar-link">3.3 从机配置文件</a></li><li class="sidebar-sub-header level3"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-18/#_3-4-主机-建立账户并授权" class="sidebar-link">3.4 主机：建立账户并授权</a></li><li class="sidebar-sub-header level3"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-18/#_3-5-从机-配置需要复制的主机" class="sidebar-link">3.5 从机：配置需要复制的主机</a></li><li class="sidebar-sub-header level3"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-18/#_3-6-查看主从同步情况" class="sidebar-link">3.6 查看主从同步情况</a></li><li class="sidebar-sub-header level3"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-18/#_3-7-测试" class="sidebar-link">3.7 测试</a></li><li class="sidebar-sub-header level3"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-18/#_3-8-停止主从同步" class="sidebar-link">3.8 停止主从同步</a></li><li class="sidebar-sub-header level3"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-18/#_3-8-搭建主从架构常见问题" class="sidebar-link">3.8 搭建主从架构常见问题</a></li><li class="sidebar-sub-header level4"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-18/#_3-8-1-caching-sha2-password" class="sidebar-link">3.8.1 cachingsha2password</a></li><li class="sidebar-sub-header level4"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-18/#_3-8-2-联通性问题" class="sidebar-link">3.8.2 联通性问题</a></li><li class="sidebar-sub-header level3"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-18/#_3-9-后续" class="sidebar-link">3.9 后续</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-18/#_4-同步数据一致性问题" class="sidebar-link">4. 同步数据一致性问题</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-18/#_4-1-理解主从延迟问题" class="sidebar-link">4.1 理解主从延迟问题</a></li><li class="sidebar-sub-header level3"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-18/#_4-2-主从延迟问题原因" class="sidebar-link">4.2 主从延迟问题原因</a></li><li class="sidebar-sub-header level3"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-18/#_4-3-如何减少主从延迟" class="sidebar-link">4.3 如何减少主从延迟</a></li><li class="sidebar-sub-header level3"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-18/#_4-4-如何解决一致性问题" class="sidebar-link">4.4 如何解决一致性问题</a></li><li class="sidebar-sub-header level4"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-18/#方法-1-异步复制" class="sidebar-link">方法 1：异步复制</a></li><li class="sidebar-sub-header level4"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-18/#方法-2-半同步复制" class="sidebar-link">方法 2：半同步复制</a></li><li class="sidebar-sub-header level4"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-18/#方法-3-组复制" class="sidebar-link">方法 3：组复制</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-18/#_5-知识延伸" class="sidebar-link">5. 知识延伸</a></li></ul></li><li><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-19/" class="sidebar-link">第19章_数据库备份与恢复</a></li></ul></section></li><li><a href="/java-basic/jdbc-core/" class="sidebar-link">JDBC 核心技术(JDK21版)</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>学习笔记</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/categories/?category=Java%E5%9F%BA%E7%A1%80" title="分类" data-v-06225672>Java基础</a></li><li data-v-06225672><a href="/categories/?category=%E6%A0%B8%E5%BF%83" title="分类" data-v-06225672>核心</a></li><li data-v-06225672><a href="/categories/?category=MySQL%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E9%AB%98%E7%BA%A7-%E9%AB%98%E7%BA%A7%E7%AF%87" title="分类" data-v-06225672>MySQL从入门到高级-高级篇</a></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="https://github.com/coderofmutou" target="_blank" title="作者" class="beLink" data-v-06225672>bombax</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2025-05-14</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABH1JREFUSA3tVl1oHFUUPmdmd2ltklqbpJDiNnXFmgbFktho7YMPNiJSSZM0+CAYSkUELVhM6YuwIPpgoOKDqOBDC0XE2CQoNtQXBUFTTcCi+Wlh1V2TQExsUzcltd3M9Tt3ZjZzZ2fT+OJTL8yeM+eee757fmeJbq//KQL8X3DUSFOcfr7cRsRtxNQMWueeVzOkaITIGqQHNg5y8+jNW9ldM7A6nTpAjuolUikAwq7CE3WcM2RRDz+XGVgN3FptU/aUSlvq9Pa3iZ1+sgAqJyyAFqkipd9dqiwHF3P65YycLWc/6sqGrvoEoIp6DOFaX5h6+dnfjkWprwqsPk0dUGq5vySwDImC10KxFHgGL1SWoc92O3eVht09qdXNH11I2SsTsJYqMWzihqGMi+A+Garf3BAuuLI5oGlULyNfyB/HYNujwktOfRrMr5t77NmevqaUopx0grnKAyvVpmwUDB4x6FPXuGvYLTDwWsejwgtgkYKPqRJg8SV6xaiZ3ZTppGneS4yfH5/66fZSDHv+QZci/+h5c5UHtpy67JUqGppM0sh0Nc1dW6/N1W5Yoqat8/TU/VnadmdeW2PLLSyh0cvxBs3KbqTmwYPpxN4do/mzE8nEpvX/UMu2Wbp74zUAK5q6WkHns7V0eWkdPbPzd3rxkTGybadYySumVzhcaJFbs5UrEkQ/+CK8gF5dnh/6ciIZ73gwQ927L1IitoxKLXYP3SjYdOrHHfTZhRRlFyrorafPk20B3HPD1y2G3qKZME5Jcf3t/HUC13/8tSd++vqFveMUTwAUxSUFI1QekR1+bIze3D9MF2aq6cPvG72CgnldWCFqyRw3lwH8ZMerjTD9ElRO7Gv44wNpC90aASqGfVlz/Rx17srQ57/UU26hkhQqUB7dBR71WmzQhHUnblGmVOEw0jhbV1n9OlXUDCIRGaNV5Jp43N516fN7JmnTHdfp7Hgy0luO4aMhtkLL8Bi3bUWYvzh5Mn1dTxrL6QmGuRhGL/TiTTxRoEdTszSaq9GR0NGA3KdkOz3hqSV3MIDhQ5IVX/Ivx3umBti2es2h4eZby7x8br1rkf7Mo90AqC8aQ3sJeNzqFRu+vSANAQe3PL7l0HGOAdwDCeZYvNKeoZp1Qfs6Aipndh86HmFRi0LAnEO47wsqM6cdfjh3jBPUzhZy7nvlUfFsamED1VQt6aISHVymXZ/B2aCtIG8AI8xfobj2d3en1wWVhOeHELKmLQ1s211s88comkv4UCwWyF787mJdYXtNfhKAXVqnKTq8QZvGAGGOfaTo5pGZ/PwbUCr5+DPr/1J92JNHr9aOl/F3iI5+O1nfybsGxoimvZ3ViWSluDITw3P37mypheDIPY0tw7+O/5ApbkYw+zpfaUVu32Pi98+defdUhEpZkRFq0aqyNh9FuL9hpYbEm6iwi0z2REd09ZmyENEbuhjDWzKvZXTqKYaBIr3tt5kuPtQBZFvEUwHt60vfCNu41XsksH9Ij1BMMz1Y0OOunHNShFIP5868g5zeXmuLwL9T4b6Q2+KejgAAAABJRU5ErkJggg==">第18章_主从复制<!----></h1> <!----> <div class="theme-vdoing-content content__default"><h1 id="第-18-章-主从复制"><a href="#第-18-章-主从复制" class="header-anchor">#</a> 第 18 章 主从复制</h1> <h2 id="_1-主从复制概述"><a href="#_1-主从复制概述" class="header-anchor">#</a> 1. 主从复制概述</h2> <h3 id="_1-1-如何提升数据库并发能力"><a href="#_1-1-如何提升数据库并发能力" class="header-anchor">#</a> 1.1 如何提升数据库并发能力</h3> <p>在实际工作中常常将<code>Redis</code>作为缓存与<code>MySQL</code>配合来使用，当有请求的时候，首先会从缓存中进行查找，如果存在就直接取出。如果不存在再访问数据库，这样就<code>提升了读取的效率</code>，也减少了对后端数据库的<code>访问压力</code> 。Redis 的缓存架构是<code>高并发架构</code>中非常重要的一环。</p> <p><img src="/assets/img/image-20241121220945881.0c001abc.webp" alt="image-20241121220945881"></p> <p>此外，一般应用对数据库而言都是“<code>读多写少</code>”，也就说对数据库读取数据的压力比较大，有一个思路就是采用数据库集群的方案，做<code>主从架构</code>、进行<code>读写分离</code>，这样同样可以提升数据库的并发处理能力。但并不是所有的应用都需要对数据库进行主从架构的设置，毕竟设置架构本身是有成本的。</p> <p>如果我们的目的在于提升数据库高并发访问的效率，那么首先考虑的是如何<code>优化 SQL 和索引</code>，这种方式简单有效；其次才是采用<code>缓存的策略</code>，比如使用 Redis 将热点数据保存在内存数据库中，提升读取的效率；最后才是对数据库采用<code>主从架构</code>，进行读写分离。</p> <p>按照上面的方式进行优化，使用和维护的成本是由低到高的。</p> <h3 id="_1-2-主从复制的作用"><a href="#_1-2-主从复制的作用" class="header-anchor">#</a> 1.2 主从复制的作用</h3> <p>主从同步设计不仅可以提高数据库的吞吐量，还有以下 3 个方面的作用。</p> <h4>第 1 个作用：读写分离。</h4> <p>我们可以通过主从复制的方式来<code>同步数据</code>，然后通过读写分离提高数据库并发处理能力。</p> <p><img src="/assets/img/Master_Slave_Replication2.fabcecfb.webp" alt="Master_Slave_Replication2.webp"></p> <p>其中一个是 Master 主库，负责写入数据，我们称之为：写库。</p> <p>其它都是 Slave 从库，负责读取数据，我们称之为：读库。</p> <p>当主库进行更新的时候，会自动将数据复制到从库中，而在客户端读取数据的时候，会从从库中进行读取。</p> <p>面对<code>读多写少</code>的需求，采用读写分离的方式，可以实现<code>更高的并发访问</code>。同时还能对从服务器进行<code>负载均衡</code>，让不同的读请求按照策略均匀地分发到不同的从服务器上，让<code>读取更加顺畅</code>。读取顺畅的另一个原因，就是 <code>减少了锁表</code>的影响，比如我们让主库负责写，当主库出现写锁的时候，不会影响到从库进行 SELECT 的读取。</p> <h4>第 2 个作用就是数据备份。</h4> <p>通过主从复制将主库上的数据复制到了从库上，相当于是一种<code>热备份机制</code>，也就是在主库正常运行的情况下进行的备份，不会影响到服务。</p> <h4>第 3 个作用是具有高可用性。</h4> <p>数据备份实际上是一种冗余的机制，通过这种冗余的方式可以换取数据库的高可用性，也就是当服务器出现<code>故障或宕机</code>的情况下，可以<code>切换</code>到从服务器上，保证服务的正常运行。</p> <p>关于高可用性的程度，我们可以用一个指标衡量，即正常可用时间/全年时间。比如要达到全年 99.999%的时间都可用，就意味着系统在一年中的不可用时间不得超过<code>365*24*60*(1-99.999%)=5.256</code>分钟（含系统崩溃的时间、日常维护操作导致的停机时间等），其他时间都需要保持可用的状态。</p> <p>实际上，更高的高可用性，意味着需要付出更高的成本代价。在现实中需要结合业务需求和成本来进行选择。</p> <h2 id="_2-主从复制的原理"><a href="#_2-主从复制的原理" class="header-anchor">#</a> 2. 主从复制的原理</h2> <p><code>Slave</code>会从<code>Master</code>读取<code>binlog</code>来进行数据同步。</p> <h3 id="_2-1-原理剖析"><a href="#_2-1-原理剖析" class="header-anchor">#</a> 2.1 原理剖析</h3> <p><strong>三个线程</strong></p> <p>实际上主从同步的原理就是基于 binlog 进行数据同步的。在主从复制过程中，会基于<code>3个线程</code>来操作，一个主库线程，两个从库线程。</p> <p><img src="/assets/img/Master_Slave_Replication_Process1.7ffc69ed.webp" alt="Master_Slave_Replication_Process1"></p> <p><code>二进制日志转储线程</code>(Binlog dump thread)是一个主库线程。当从库线程连接的时候，主库可以将二进制日志发送给从库，当主库读取事件(Event)的时候，会在 Binlog 上<code>加锁</code>，读取完成之后，再将锁释放掉。</p> <p><code>从库 I/O 线程</code> 会连接到主库，向主库发送请求更新 Binlog。这时从库的 I/O 线程就可以读取到主库的二进制日志转储线程发送的 Binlog 更新部分，并且拷贝到本地的中继日志(Relay log)。</p> <p><code>从库 SQL 线程</code> 会读取从库中的中继日志，并且执行日志中的事件，将从库中的数据与主库保持同步。</p> <p><img src="/assets/img/Master_Slave_Replication_Process2.fc1c3a9a.webp" alt="Master_Slave_Replication_Process2"></p> <div class="custom-block warning"><p class="custom-block-title">注意</p> <ul><li>不是所有版本的 MySQL 都默认开启服务器的二进制日志。在进行主从同步的时候，需要先检查服务器是否已经开启了二进制日志。</li> <li>除非特殊指定，默认情况下从服务器会执行所有主服务器中保存的事件。也可以通过配置，使从服务器执行特定的事件。</li></ul></div> <p><strong>复制三步骤</strong></p> <p>步骤 1：<code>Master</code>将写操作记录到二进制日志（<code>binlog</code>）。这些记录叫做<strong>二进制日志事件</strong> (binary log events);</p> <p>步骤 2：<code>Slave</code>将<code>Master</code>的 binary log events 拷贝到它的中继日志（<code>relay log</code>）；</p> <p>步骤 3：<code>Slave</code>重做中继日志中的事件，将改变应用到自己的数据库中。MySQL 复制是异步的且串行化的，而且重启后从<code>接入点</code>开始复制。</p> <p><strong>复制的问题</strong></p> <p>复制的最大问题：<code>延时</code></p> <h3 id="_2-2-复制的基本原则"><a href="#_2-2-复制的基本原则" class="header-anchor">#</a> 2.2 复制的基本原则</h3> <ul><li><p>每个<code>Slave</code>只有一个<code>Master</code></p></li> <li><p>每个<code>Slave</code>只能有一个唯一的服务器 ID</p></li> <li><p>每个<code>Master</code>可以有多个<code>Slave</code></p></li></ul> <h2 id="_3-一主一从架构搭建"><a href="#_3-一主一从架构搭建" class="header-anchor">#</a> 3. 一主一从架构搭建</h2> <p>一台<code>主机</code>用于处理所有<code>写请求</code>，一台<code>从机</code>负责所有<code>读请求</code>，架构图如下：</p> <p><img src="/assets/img/master_slave_replication.ebe86956.webp" alt="master_slave_replication"></p> <h3 id="_3-1-准备工作"><a href="#_3-1-准备工作" class="header-anchor">#</a> 3.1 准备工作</h3> <ul><li>准备 2 台 CentOS 虚拟机</li> <li>每台虚拟机上需要安装好 MySQL （可以是 MySQL8.0 ）</li></ul> <p>可以在一台 CentOS 上安装好 MySQL，进而通过克隆的方式复制出 1 台包含 MySQL 的虚拟机。</p> <div class="custom-block warning"><p class="custom-block-title">注意</p> <p>克隆的方式需要修改新克隆出来主机的：①<code>MAC地址</code> ②<code>hostname</code> ③<code>IP 地址</code> ④<code>UUID</code>。</p></div> <h4>hostname</h4> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">vim</span> /etc/hostname
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4>IP 地址和主机的 UUID</h4> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">vim</span> /etc/sysconfig/network-scripts/ifcfg-ens33
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4>MySQLServer 的 UUID</h4> <p>此外，克隆的方式生成的虚拟机（包含 MySQL Server），则克隆的虚拟机 MySQL Server 的 UUID 相同，必须修改，否则在有些场景会报错。比如：<code>show slave status\G</code>，报如下的错误：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>Last_IO_Error: Fatal error: The slave I/O thread stops because master and slave have
equal MySQL server UUIDs; these UUIDs must be different for replication to work.
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>修改 MySQL Server 的 UUID 方式：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">vim</span> /var/lib/mysql/auto.cnf
systemctl restart mysqld
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_3-2-主机配置文件"><a href="#_3-2-主机配置文件" class="header-anchor">#</a> 3.2 主机配置文件</h3> <p>配置文件<code>/etc/my.cnf</code></p> <p>建议 mysql 版本一致且后台以服务运行，主从所有配置项都配置在<code>[mysqld]</code>节点下，且都是小写字母。</p> <p>具体参数配置如下：</p> <ul><li>必选</li></ul> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code><span class="token comment">#[必须]主服务器唯一ID</span>
<span class="token key attr-name">server-id</span><span class="token punctuation">=</span><span class="token value attr-value">1</span>

<span class="token comment">#[必须]启用二进制日志,指名路径。比如：自己本地的路径/log/mysqlbin</span>
<span class="token comment"># mysql8.0.25实测，此参数也是可选的</span>
<span class="token key attr-name">log-bin</span><span class="token punctuation">=</span><span class="token value attr-value">atguigu-bin</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ul><li>可选</li></ul> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code><span class="token comment">#[可选] 0（默认）表示读写（主机），1表示只读（从机）</span>
<span class="token key attr-name">read-only</span><span class="token punctuation">=</span><span class="token value attr-value">0</span>

<span class="token comment">#设置日志文件保留的时长，单位是秒</span>
<span class="token key attr-name">binlog_expire_logs_seconds</span><span class="token punctuation">=</span><span class="token value attr-value">6000</span>

<span class="token comment">#控制单个二进制日志大小。此参数的最大和默认值是1GB</span>
<span class="token key attr-name">max_binlog_size</span><span class="token punctuation">=</span><span class="token value attr-value">200M</span>

<span class="token comment">#[可选]设置不要复制的数据库</span>
<span class="token key attr-name">binlog-ignore-db</span><span class="token punctuation">=</span><span class="token value attr-value">test</span>

<span class="token comment">#[可选]设置需要复制的数据库,默认全部记录。比如：binlog-do-db=atguigu_master_slave</span>
<span class="token key attr-name">binlog-do-db</span><span class="token punctuation">=</span><span class="token value attr-value">需要复制的主数据库名字</span>

<span class="token comment">#[可选]设置binlog格式</span>
<span class="token key attr-name">binlog_format</span><span class="token punctuation">=</span><span class="token value attr-value">STATEMENT</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p><strong><code>binlog-do-db</code></strong> 用于指定<strong>需要写入二进制日志的数据库</strong>。只有在这个选项中列出的数据库的更改才会记录到二进制日志中。</p> <p><code>binlog-do-db</code> 的行为与当前使用的数据库有关，即 <strong><code>USE</code> 语句选择的数据库</strong>。如果没有在 <code>USE</code> 中选择目标数据库，即使影响到了 <code>binlog-do-db</code> 指定的数据库，也不会被记录。因为 MySQL 检查的是“当前选中数据库”是否匹配 <code>binlog-do-db</code>，而不是检查 SQL 语句中是否直接涉及了相关的数据库。</p> <p>重启后台 mysql 服务，使配置生效</p> <div class="custom-block warning"><p class="custom-block-title">注意</p> <ul><li>先搭建完主从复制，再创建数据库。</li> <li>MySQL 主从复制起始时，从机不继承主机数据。</li></ul></div> <h4>排除系统库</h4> <p>主从复制，可以排除 mysql 的系统库</p> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">replicate-ignore-db</span> <span class="token punctuation">=</span> <span class="token value attr-value">mysql</span>
<span class="token key attr-name">replicate-ignore-db</span> <span class="token punctuation">=</span> <span class="token value attr-value">information_schema</span>
<span class="token key attr-name">replicate-ignore-db</span> <span class="token punctuation">=</span> <span class="token value attr-value">performance_schema</span>
<span class="token key attr-name">replicate-ignore-db</span> <span class="token punctuation">=</span> <span class="token value attr-value">sys</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>系统库如 <code>mysql</code>、<code>information_schema</code>、<code>performance_schema</code> 和 <code>sys</code> 包含了元数据、性能统计信息和系统视图，这些数据是特定于每个服务器的，在从库上同步这些数据通常是无意义的。</p> <p>如果同步 <code>mysql</code> 数据库，可能会导致主从库的用户、权限信息不一致或被覆盖。例如，从库的用户权限可能需要与主库不同。</p> <p>系统库中的表（如 <code>performance_schema</code>）记录动态性能数据，这些数据更新频繁且仅对本地有意义，同步它们会增加不必要的负载。</p> <p><strong>binlog 格式设置：</strong></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SHOW</span> VARIABLES <span class="token operator">LIKE</span> <span class="token string">'binlog_format'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>格式 1：<code>STATEMENT模式</code>（基于 SQL 语句的复制(statement-based replication, SBR)）</p> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">binlog_format</span><span class="token punctuation">=</span><span class="token value attr-value">STATEMENT</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>每一条会修改数据的 sql 语句会记录到 binlog 中。<strong>这是默认的 binlog 格式。</strong></p> <ul><li>SBR 的优点：
<ul><li>历史悠久，技术成熟</li> <li>不需要记录每一行的变化，减少了 binlog 日志量，文件较小</li> <li>binlog 中包含了所有数据库更改信息，可以据此来审核数据库的安全等情况</li> <li>binlog 可以用于实时的还原，而不仅仅用于复制</li> <li>主从版本可以不一样，从服务器版本可以比主服务器版本高</li></ul></li> <li>SBR 的缺点：
<ul><li>不是所有的 UPDATE 语句都能被复制，尤其是包含不确定操作的时候</li></ul></li> <li>使用以下函数的语句也无法被复制：LOAD_FILE()、UUID()、USER()、FOUND_ROWS()、SYSDATE() （除非启动时启用了 --sysdate-is-now 选项）
<ul><li>INSERT ... SELECT 会产生比 RBR 更多的行级锁</li> <li>复制需要进行全表扫描（WHERE 语句中没有使用到索引）的 UPDATE 时，需要比 RBR 请求更多的行级锁</li> <li>对于有 AUTO_INCREMENT 字段的 InnoDB 表而言，INSERT 语句会阻塞其他 INSERT 语句</li> <li>对于一些复杂的语句，在从服务器上的耗资源情况会更严重，而 RBR 模式下，只会对那个发生变化的记录产生影响</li> <li>执行复杂语句如果出错的话，会消耗更多资源</li> <li>数据表必须几乎和主服务器保持一致才行，否则可能会导致复制出错</li></ul></li></ul> <p><strong>② ROW 模式（基于行的复制(row-based replication, RBR)）</strong></p> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">binlog_format</span><span class="token punctuation">=</span><span class="token value attr-value">ROW</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>5.1.5 版本的 MySQL 才开始支持，不记录每条 sql 语句的上下文信息，仅记录哪条数据被修改了，修改成什
么样了。</p> <ul><li>RBR 的优点：
<ul><li>任何情况都可以被复制，这对复制来说是最<code>安全可靠</code>的。（比如：不会出现某些特定情况下的存储过程、function、trigger 的调用和触发无法被正确复制的问题）</li> <li>多数情况下，从服务器上的表如果有主键的话，复制就会快了很多</li> <li>复制以下几种语句时的行锁更少：INSERT ... SELECT、包含 AUTO_INCREMENT 字段的 INSERT、没有附带条件或者并没有修改很多记录的 UPDATE 或 DELETE 语句</li> <li>执行 INSERT，UPDATE，DELETE 语句时锁更少</li> <li>从服务器上采用<code>多线程</code>来执行复制成为可能</li></ul></li> <li>RBR 的缺点：
<ul><li>binlog 大了很多</li> <li>复杂的回滚时 binlog 中会包含大量的数据</li> <li>主服务器上执行 UPDATE 语句时，所有发生变化的记录都会写到 binlog 中，而 SBR 只会写一次，这会导致频繁发生 binlog 的并发写问题</li> <li>无法从 binlog 中看到都复制了些什么语句</li></ul></li></ul> <p><strong>③ MIXED 模式（混合模式复制(mixed-based replication, MBR)）</strong></p> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">binlog_format</span><span class="token punctuation">=</span><span class="token value attr-value">MIXED</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>从 5.1.8 版本开始，MySQL 提供了 Mixed 格式，实际上就是 Statement 与 Row 的结合。</p> <p>在 Mixed 模式下，一般的语句修改使用 statment 格式保存 binlog。如一些函数，statement 无法完成主从复制的操作，则采用 row 格式保存 binlog。</p> <p>MySQL 会根据执行的每一条具体的 sql 语句来区分对待记录的日志形式，也就是在 Statement 和 Row 之间选择一种。</p> <h3 id="_3-3-从机配置文件"><a href="#_3-3-从机配置文件" class="header-anchor">#</a> 3.3 从机配置文件</h3> <p>要求主从所有配置项都配置在<code>my.cnf</code>的<code>[mysqld]</code>栏位下，且都是小写字母。</p> <ul><li>必选</li></ul> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code><span class="token comment">#[必须]从服务器唯一ID</span>
<span class="token key attr-name">server-id</span><span class="token punctuation">=</span><span class="token value attr-value">2</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>可选</li></ul> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code><span class="token comment">#[可选]启用中继日志</span>
<span class="token key attr-name">relay-log</span><span class="token punctuation">=</span><span class="token value attr-value">mysql-relay</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>重启后台 mysql 服务，使配置生效。</p> <h3 id="_3-4-主机-建立账户并授权"><a href="#_3-4-主机-建立账户并授权" class="header-anchor">#</a> 3.4 主机：建立账户并授权</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 5.5,5.7</span>
<span class="token comment"># 在主机 MySQL里执行授权主从复制的命令</span>
<span class="token keyword">GRANT</span> <span class="token keyword">REPLICATION</span> SLAVE <span class="token keyword">ON</span> <span class="token operator">*</span><span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">TO</span> <span class="token string">'slave1'</span><span class="token variable">@'从机器数据库 IP'</span> IDENTIFIED <span class="token keyword">BY</span> <span class="token string">'abc123'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong>注意：如果使用的是 MySQL8，需要如下的方式建立账户，并授权 slave：</strong></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">USER</span> <span class="token string">'slave1'</span><span class="token variable">@'%'</span> IDENTIFIED <span class="token keyword">BY</span> <span class="token string">'123456'</span><span class="token punctuation">;</span>
<span class="token comment"># 查看用户</span>
<span class="token keyword">SHOW</span> <span class="token keyword">create</span> <span class="token keyword">user</span> slave1<span class="token punctuation">;</span>

<span class="token keyword">GRANT</span> <span class="token keyword">REPLICATION</span> SLAVE <span class="token keyword">ON</span> <span class="token operator">*</span><span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">TO</span> <span class="token string">'slave1'</span><span class="token variable">@'%'</span><span class="token punctuation">;</span>

<span class="token comment"># 查看权限</span>
<span class="token keyword">SHOW</span> GRANTS <span class="token keyword">FOR</span> <span class="token string">'slave1'</span><span class="token variable">@'%'</span><span class="token punctuation">;</span>

<span class="token comment">#此语句必须执行。否则见下面。</span>
<span class="token comment">#在my.cnf中设置default_authentication_plugin=mysql_native_password也可以</span>
<span class="token keyword">ALTER</span> <span class="token keyword">USER</span> <span class="token string">'slave1'</span><span class="token variable">@'%'</span> IDENTIFIED <span class="token keyword">WITH</span> mysql_native_password <span class="token keyword">BY</span> <span class="token string">'123456'</span><span class="token punctuation">;</span>

flush <span class="token keyword">privileges</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><div class="custom-block warning"><p class="custom-block-title">在从机执行 `show slave status\G` 时报错：</p> <p>Last_IO_Error: error connecting to master 'slave1@192.168.1.150:3306' - retry-time:60 retries:1 message: Authentication plugin 'caching_sha2_password' reported error:Authentication requires secure connection.</p></div> <p>查询 Master 的状态，并记录下 File 和 Position 的值。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">show</span> master <span class="token keyword">status</span><span class="token punctuation">;</span>
<span class="token comment"># 8.4版命令</span>
<span class="token keyword">SHOW</span> <span class="token keyword">BINARY</span> LOG <span class="token keyword">STATUS</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">---------------+----------+--------------+------------------+-------------------+</span>
<span class="token operator">|</span> <span class="token keyword">File</span>          <span class="token operator">|</span> Position <span class="token operator">|</span> Binlog_Do_DB <span class="token operator">|</span> Binlog_Ignore_DB <span class="token operator">|</span> Executed_Gtid_Set <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">---------------+----------+--------------+------------------+-------------------+</span>
<span class="token operator">|</span> binlog<span class="token punctuation">.</span><span class="token number">000005</span> <span class="token operator">|</span>      <span class="token number">851</span> <span class="token operator">|</span>              <span class="token operator">|</span>                  <span class="token operator">|</span>                   <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">---------------+----------+--------------+------------------+-------------------+</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>记录下 File 和 Position 的值</p> <div class="custom-block warning"><p class="custom-block-title">注意</p> <p>执行完此步骤后不要再操作主服务器 MySQL，防止主服务器状态值变化。</p></div> <h3 id="_3-5-从机-配置需要复制的主机"><a href="#_3-5-从机-配置需要复制的主机" class="header-anchor">#</a> 3.5 从机：配置需要复制的主机</h3> <p><strong>步骤 1</strong>：从机上复制主机的命令</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>CHANGE MASTER <span class="token keyword">TO</span>
MASTER_HOST<span class="token operator">=</span><span class="token string">'主机的IP地址'</span><span class="token punctuation">,</span>
MASTER_USER<span class="token operator">=</span><span class="token string">'主机用户名'</span><span class="token punctuation">,</span>
MASTER_PASSWORD<span class="token operator">=</span><span class="token string">'主机用户名的密码'</span><span class="token punctuation">,</span>
MASTER_LOG_FILE<span class="token operator">=</span><span class="token string">'mysql-bin.具体数字'</span><span class="token punctuation">,</span>
MASTER_LOG_POS<span class="token operator">=</span>具体值<span class="token punctuation">;</span>

<span class="token comment"># 加此参数，可以不用更改mysql的密码插件</span>
MASTER_SSL<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>

<span class="token comment"># mysql8.0</span>
CHANGE <span class="token keyword">REPLICATION</span> SOURCE <span class="token keyword">TO</span>
SOURCE_HOST <span class="token operator">=</span> <span class="token string">'主库IP地址'</span><span class="token punctuation">,</span>
SOURCE_PORT <span class="token operator">=</span> 主库端口号<span class="token punctuation">,</span>
SOURCE_USER <span class="token operator">=</span> <span class="token string">'复制用户'</span><span class="token punctuation">,</span>
SOURCE_PASSWORD <span class="token operator">=</span> <span class="token string">'复制用户密码'</span><span class="token punctuation">,</span>
SOURCE_LOG_FILE <span class="token operator">=</span> <span class="token string">'日志文件名'</span><span class="token punctuation">,</span>
SOURCE_LOG_POS <span class="token operator">=</span> 日志文件位置<span class="token punctuation">,</span>
SOURCE_SSL <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>如果报以下错误，说明以前配置过从库，从库还在运行，需要先停止</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>ERROR 1198 (HY000): This operation cannot be performed with a running slave; run STOP SLAVE first
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-sql line-numbers-mode"><pre class="language-sql"><code>mysql<span class="token operator">&gt;</span> STOP SLAVE<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>步骤 2</strong>：启动 slave 同步 START SLAVE;</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">#启动slave同步</span>
<span class="token keyword">START</span> SLAVE<span class="token punctuation">;</span>
<span class="token comment">#或者</span>
<span class="token keyword">START</span> REPLICA<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>如果报以下错误，说明存在以前的中继日志，需要先重置</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>ERROR <span class="token number">1872</span> <span class="token punctuation">(</span>HY000<span class="token punctuation">)</span>: Slave failed <span class="token keyword">to</span> initialize relay log info structure <span class="token keyword">from</span> the repository
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>可以执行如下操作，删除之前的 relay_log 信息。然后重新执行<code>CHANGE MASTER TO ...</code>语句即可。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>reset slave<span class="token punctuation">;</span> <span class="token comment"># 删除SLAVE数据库的relaylog日志文件，并重新启用新的relaylog文件</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>重置从机配置</strong></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 必须先停止从机复制，才能重置从机的配置</span>
STOP REPLICA<span class="token punctuation">;</span>
<span class="token comment"># 重置从机的配置</span>
RESET SLAVE<span class="token punctuation">;</span>
RESET SLAVE <span class="token keyword">ALL</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><code>RESET SLAVE</code> <strong>作用</strong>：清除从库的复制状态，但<strong>不删除</strong> <code>MASTER_HOST</code> 等主库配置信息。</p> <ul><li>删除从库中保存的二进制日志的相关位置和状态。</li> <li>但保留通过 <code>CHANGE MASTER TO</code> 配置的主库信息（如 <code>MASTER_HOST</code>、<code>MASTER_USER</code>、<code>MASTER_PASSWORD</code> 等）</li></ul> <p><code>RESET SLAVE ALL</code> <strong>作用</strong>：清除从库的复制状态，同时<strong>删除</strong>所有主库配置信息。</p> <ul><li>删除从库中保存的二进制日志相关位置和状态。</li> <li><strong>清除主库配置信息</strong>（<code>MASTER_HOST</code>、<code>MASTER_USER</code>、<code>MASTER_PASSWORD</code>、<code>MASTER_LOG_FILE</code> 等）。</li> <li>完全将从库恢复到未配置复制的初始状态。</li></ul> <p>接着，查看同步状态：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SHOW</span> SLAVE <span class="token keyword">STATUS</span>\G<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-properties line-numbers-mode"><pre class="language-properties"><code><span class="token comment"># 如果两个结果都是yes，说明从机同步成功</span>
<span class="token key attr-name">Slave_IO_Running</span><span class="token punctuation">:</span> <span class="token value attr-value">Yes</span>
<span class="token key attr-name">Slave_SQL_Running</span><span class="token punctuation">:</span> <span class="token value attr-value">Yes</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>显式如下的情况，就是不正确的。可能错误的原因有：</p> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">Slave_IO_Running</span><span class="token punctuation">:</span> <span class="token value attr-value">Connecting</span>
<span class="token key attr-name">Slave_SQL_Running</span><span class="token punctuation">:</span> <span class="token value attr-value">Yes</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>网络不通</li> <li>账户密码错误</li> <li>防火墙</li> <li>mysql 配置文件问题</li> <li>连接服务器时语法</li> <li>主服务器 mysql 权限</li></ul> <h3 id="_3-6-查看主从同步情况"><a href="#_3-6-查看主从同步情况" class="header-anchor">#</a> 3.6 查看主从同步情况</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SHOW</span> SLAVE <span class="token keyword">STATUS</span>\G<span class="token punctuation">;</span>
<span class="token comment"># 新版命令</span>
<span class="token keyword">SHOW</span> REPLICA <span class="token keyword">STATUS</span>\G
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li><code>Replica_IO_Running</code>: IO 线程是否运行。</li> <li><code>Replica_SQL_Running</code>: SQL 线程是否运行。</li></ul> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code><span class="token comment"># 如果两个结果都是yes，说明从机同步成功</span>
<span class="token key attr-name">Slave_IO_Running</span><span class="token punctuation">:</span> <span class="token value attr-value">Yes</span>
<span class="token key attr-name">Slave_SQL_Running</span><span class="token punctuation">:</span> <span class="token value attr-value">Yes</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li><p><code>Replica_IO_State</code>: IO 线程的状态，显示是否正在从主库读取 binlog。</p></li> <li><p><code>Seconds_Behind_Master</code>: 副本与主库的延迟时间，单位为秒。</p></li> <li><p><code>Last_IO_Error / Last_SQL_Error</code>: 最近一次 IO 或 SQL 错误的信息。如果从机同步失败查看此参数。</p></li></ul> <h3 id="_3-7-测试"><a href="#_3-7-测试" class="header-anchor">#</a> 3.7 测试</h3> <p>主机新建库、新建表、insert 记录，从机复制：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">DATABASE</span> dbtest_master_slave<span class="token punctuation">;</span>
<span class="token keyword">USE</span> dbtest_master_slave<span class="token punctuation">;</span>

<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> test<span class="token punctuation">(</span>id <span class="token keyword">INT</span><span class="token punctuation">,</span>NAME <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> test <span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'zhang3'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> test <span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span>@<span class="token variable">@hostname</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SHOW</span> VARIABLES <span class="token operator">LIKE</span> <span class="token string">'hostname'</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> @<span class="token variable">@hostname</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_3-8-停止主从同步"><a href="#_3-8-停止主从同步" class="header-anchor">#</a> 3.8 停止主从同步</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>stop slave<span class="token punctuation">;</span>
<span class="token comment"># 新版命令</span>
stop replica<span class="token punctuation">;</span>
<span class="token comment"># 清除从服务器主从复制的配置</span>
<span class="token comment"># 必须先停止主从复制，才能清除配置</span>
reset replica <span class="token keyword">all</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 删除Master中所有的binglog文件，并将日志索引文件清空，重新开始所有新的日志文件</span>
<span class="token comment"># (慎用) 一般不需要执行此命令</span>
reset master<span class="token punctuation">;</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="_3-8-搭建主从架构常见问题"><a href="#_3-8-搭建主从架构常见问题" class="header-anchor">#</a> 3.8 搭建主从架构常见问题</h3> <h4 id="_3-8-1-caching-sha2-password"><a href="#_3-8-1-caching-sha2-password" class="header-anchor">#</a> 3.8.1 caching_sha2_password</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SHOW</span> SLAVE <span class="token keyword">STATUS</span>\G
Last_IO_Error: Authentication plugin <span class="token string">'caching_sha2_password'</span> reported error: Authentication requires secure connection
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>mysql8.0 以后，<strong><code>caching_sha2_password</code></strong> 成为了默认的用户认证插件。MySQL 主从服务器之间的用户认证也使用此插件。这种认证方式默认要求<strong>加密连接</strong>（如 SSL/TLS），以提高安全性。如果未启用加密连接，从库在同步时会报此错误。</p> <div class="custom-block note"><p class="custom-block-title">可能报错 Access denied for user 'slave1'@'xxx' (using password: YES)</p> <p>这个也可能是 SSL 连接的问题</p></div> <p><strong>处理方案</strong></p> <ul><li>方法一：在主服务器上修改认证插件</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">USER</span> <span class="token string">'slave1'</span><span class="token variable">@'%'</span> IDENTIFIED <span class="token keyword">WITH</span> <span class="token string">'mysql_native_password'</span> <span class="token keyword">BY</span> <span class="token string">'your_password'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>修改 my.cnf 文件，启动<code>mysql_native_password</code>插件</p> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code>[mysqld]
<span class="token key attr-name">mysql_native_password</span><span class="token punctuation">=</span><span class="token value attr-value">ON</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>方案二：从机<code>CHANGE MASTER</code>命令配置 SSL 连接参数</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>CHANGE MASTER <span class="token keyword">TO</span>
MASTER_HOST<span class="token operator">=</span><span class="token string">'主机的IP地址'</span><span class="token punctuation">,</span>
MASTER_USER<span class="token operator">=</span><span class="token string">'主机用户名'</span><span class="token punctuation">,</span>
MASTER_PASSWORD<span class="token operator">=</span><span class="token string">'主机用户名的密码'</span><span class="token punctuation">,</span>
MASTER_LOG_FILE<span class="token operator">=</span><span class="token string">'mysql-bin.具体数字'</span><span class="token punctuation">,</span>
MASTER_LOG_POS<span class="token operator">=</span>具体值<span class="token punctuation">;</span>
MASTER_SSL<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">提示</p> <ol><li>只要执行过一次，就算之后<code>RESET REPLICA ALL</code></li> <li>第二次 change master 就不要加 MASTER_SSL=1;了</li></ol></div> <ul><li>禁用加密连接要求</li></ul> <p>如果确定主从连接在受信任的网络环境中运行，可以禁用加密连接要求。</p> <p>这个方法在对插件<code>caching_sha2_password</code> 无效，默认就是<code>REQUIRE NONE</code></p> <p>但是改为<code>REQUIRE SSL</code>，必须要求从机使用<code>MASTER_SSL=1;</code>，否则报错<code>Access denied for user 'slave1'@'xxx' (using password: YES)</code></p> <p>在主库上修改用户认证的安全连接需求</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">USER</span> <span class="token string">'slave1'</span><span class="token variable">@'%'</span> <span class="token keyword">REQUIRE</span> NONE<span class="token punctuation">;</span> <span class="token comment"># 默认的</span>
<span class="token keyword">show</span> <span class="token keyword">create</span> <span class="token keyword">user</span> slave1<span class="token punctuation">;</span> <span class="token comment"># 可以查看默认值</span>
<span class="token keyword">ALTER</span> <span class="token keyword">USER</span> <span class="token string">'slave1'</span><span class="token variable">@'%'</span> <span class="token keyword">REQUIRE</span> SSL<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>此命令不改变加密插件的类型，可以通过如下命令验证</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token keyword">user</span><span class="token punctuation">,</span> host<span class="token punctuation">,</span> plugin
<span class="token keyword">FROM</span> mysql<span class="token punctuation">.</span><span class="token keyword">user</span>
<span class="token keyword">WHERE</span> <span class="token keyword">user</span> <span class="token operator">=</span> <span class="token string">'slave1'</span> <span class="token operator">AND</span> host <span class="token operator">=</span> <span class="token string">'192.168.1.91'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="_3-8-2-联通性问题"><a href="#_3-8-2-联通性问题" class="header-anchor">#</a> 3.8.2 联通性问题</h4> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">Slave_IO_Running</span><span class="token punctuation">:</span> <span class="token value attr-value">Connecting</span>
<span class="token key attr-name">Slave_SQL_Running</span><span class="token punctuation">:</span> <span class="token value attr-value">Yes</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>在从库服务器尝试手动连接主库，确认网络连通性和用户认证是否正常</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>mysql <span class="token parameter variable">-h</span> <span class="token operator">&lt;</span>ip<span class="token operator">&gt;</span> <span class="token parameter variable">-P</span> <span class="token number">3306</span> <span class="token parameter variable">-u</span> slave1 <span class="token parameter variable">-p</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_3-9-后续"><a href="#_3-9-后续" class="header-anchor">#</a> 3.9 后续</h3> <p><strong>搭建主从复制：双主双</strong></p> <p>一个主机 m1 用于处理所有写请求，它的从机 s1 和另一台主机 m2 还有它的从机 s2 负责所有读请求。当 m1 主机宕机后，m2 主机负责写请求，m1、m2 互为备机。架构图如下：</p> <p><img src="/assets/img/master_master_replication.7f028850.webp" alt="master_master_replication"></p> <p><img src="/assets/img/image-20241202211244895.d71575f5.webp" alt="image-20241202211244895"></p> <h2 id="_4-同步数据一致性问题"><a href="#_4-同步数据一致性问题" class="header-anchor">#</a> 4. 同步数据一致性问题</h2> <p><strong>主从同步的要求：</strong></p> <ul><li>读库和写库的数据一致（最终一致）；</li> <li>写数据必须写到写库；</li> <li>读数据必须到读库（不一定）；</li></ul> <h3 id="_4-1-理解主从延迟问题"><a href="#_4-1-理解主从延迟问题" class="header-anchor">#</a> 4.1 理解主从延迟问题</h3> <p>进行主从同步的内容是二进制日志，它是一个文件，在进行<code>网络传输</code>的过程中就一定会<code>存在主从延迟</code>（比如 500ms），这样就可能造成用户在从库上读取的数据不是最新的数据，也就是主从同步中的<code>数据不一致性</code>问题。</p> <p><strong>举例</strong>：导致主从延迟的时间点主要包括以下三个:</p> <ul><li>主库 A 执行完成一个事务，写入 binlog，我们把这个时刻记为 T1;</li> <li>之后传给从库 B，我们把从库 B 接收完这个 binlog 的时刻记为 T2;</li> <li>从库 B 执行完成这个事务，我们把这个时刻记为 T3。</li></ul> <h3 id="_4-2-主从延迟问题原因"><a href="#_4-2-主从延迟问题原因" class="header-anchor">#</a> 4.2 主从延迟问题原因</h3> <p>在网络正常的时候，日志从主库传给从库所需的时间是很短的，即 T2-T1 的值是非常小的。即，网络正常情况下，主备延迟的主要来源是备库接收完 binlog 和执行完这个事务之间的时间差。</p> <p><strong>主备延迟最直接的表现是，从库消费中继日志(relay log)的速度，比主库生产 binlog 的速度要慢</strong>。造成原因：</p> <ul><li>从库的机器性能比主库要差</li> <li>从库的压力大</li> <li>大事务的执行</li></ul> <p><strong>举例 1</strong>：一次性用 delete 语句删除太多数据</p> <p>结论：后续再删除数据的时候，要控制每个事务删除的数据量，分成多次删除。</p> <p><strong>举例 2</strong>：一次性用 insert...select 插入太多数据</p> <p><strong>举例 3</strong>： 大表 DDL</p> <p>比如在主库对一张 500W 的表添加一个字段耗费了 10 分钟，那么从节点上也会耗费 10 分钟。</p> <h3 id="_4-3-如何减少主从延迟"><a href="#_4-3-如何减少主从延迟" class="header-anchor">#</a> 4.3 如何减少主从延迟</h3> <p>若想要减少主从延迟的时间，可以采取下面的办法：</p> <ol><li>降低多线程大事务并发的概率，优化业务逻辑</li> <li>优化 SQL，避免慢 SQL，<code>减少批量操作</code>，建议写脚本以 update-sleep 这样的形式完成。</li> <li><code>提高从库机器的配置</code>，减少主库写 binlog 和从库读 binlog 的效率差。</li> <li>尽量采用<code>短的链路</code>，也就是主库和从库服务器的距离尽量要短，提升端口带宽，减少 binlog 传输的网络延时。</li> <li>实时性要求的业务读强制走主库，从库只做灾备，备份。</li></ol> <h3 id="_4-4-如何解决一致性问题"><a href="#_4-4-如何解决一致性问题" class="header-anchor">#</a> 4.4 如何解决一致性问题</h3> <p>如果操作的数据存储在同一个数据库中，那么对数据进行更新的时候，可以对记录加写锁，这样在读取的时候就不会发生数据不一致的情况。但这时从库的作用就是<code>备份</code>，并没有起到<code>读写分离</code>，分担主库<code>读压力</code>的作用。</p> <p><img src="data:image/webp;base64,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" alt="image-20241202222315787.webp"></p> <p>读写分离情况下，解决主从同步中数据不一致的问题，就是解决主从之间<code>数据复制方式</code>的问题，如果按照数据一致性<code>从弱到强</code>来进行划分，有以下 3 种复制方式。</p> <h4 id="方法-1-异步复制"><a href="#方法-1-异步复制" class="header-anchor">#</a> 方法 1：异步复制</h4> <p>异步模式就是客户端提交 COMMIT 之后不需要等从库返回任何结果，而是直接将结果返回给客户端，这样做的好处是不会影响主库写的效率，但可能会存在主库宕机，而 Binlog 还没有同步到从库的情况，也就是此时的主库和从库数据不一致。这时候从从库中选择一个作为新主，那么新主则可能缺少原来主服务器中已提交的事务。所以，这种复制模式下的数据一致性是最弱的。</p> <p><img src="/assets/img/image-20241202222315789.6f7336a0.webp" alt="image-20241202222315789"></p> <h4 id="方法-2-半同步复制"><a href="#方法-2-半同步复制" class="header-anchor">#</a> 方法 2：半同步复制</h4> <p>MySQL5.5 版本之后开始支持半同步复制的方式。原理是在客户端提交 COMMIT 之后不直接将结果返回给客户端，而是等待至少有一个从库接收到了 Binlog，并且写入到中继日志中，再返回给客户端。</p> <p>这样做的好处就是提高了数据的一致性，当然相比于异步复制来说，至少多增加了一个网络连接的延迟，降低了主库写的效率。</p> <p>在 MySQL5.7 版本中还增加了一个<code>rpl_semi_sync_master_wait_for_slave_count</code>参数，可以对应答的从库数量进行设置，默认为<code>1</code>，也就是说只要有 1 个从库进行了响应，就可以返回给客户端。如果将这个参数调大，可以提升数据一致性的强度，但也会增加主库等待从库响应的时间。【以时间换取一致性】</p> <p><img src="/assets/img/image-20241202213125944.1316f409.webp" alt="image-20241202213125944"></p> <h4 id="方法-3-组复制"><a href="#方法-3-组复制" class="header-anchor">#</a> 方法 3：组复制</h4> <p>异步复制和半同步复制都无法最终保证数据的一致性问题，半同步复制是通过判断从库响应的个数来决定是否返回给客户端，虽然数据一致性相比于异步复制有提升，但仍然无法满足对数据一致性要求高的场景，比如金融领域。MGR 很好地弥补了这两种复制模式的不足。</p> <p>组复制技术，简称 MGR(MySQL Group Replication)。是 MySQL 在 5.7.17 版本中推出的一种新的数据复制技术，这种复制技术是基于 Paxos 协议的状态机复制。</p> <p><strong>MGR 是如何工作的</strong></p> <p>首先我们将多个节点共同组成一个复制组，在<code>执行读写(RW)事务</code>的时候，需要通过一致性协议层 （Consensus 层）的同意，也就是读写事务想要进行提交，必须要经过组里“大多数人”（对应 Node 节点）的同意，大多数指的是同意的节点数量需要大于(N/2+1)，这样才可以进行提交，而不是原发起方一个说了算。而针对<code>只读(RO)</code>事务则不需要经过组内同意，直接 COMMIT 即可。</p> <p>在一个复制组内有多个节点组成，它们各自维护了自己的数据副本，并且在一致性协议层实现了原子消息和全局有序消息，从而保证组内数据的一致性。</p> <p><img src="/assets/img/image-20241202214839164.20e7e9d5.webp" alt="image-20241202214839164"></p> <p>MGR 将 MySQL 带入了数据强一致性的时代，是一个划时代的创新，其中一个重要的原因就是 MGR 是基于 Paxos 协议的。Paxos 算法是由 2013 年的图灵奖获得者 Leslie Lamport 于 1990 年提出的，有关这个算法的决策机制可以搜一下。事实上，Paxos 算法提出来之后就作为<code>分布式一致性算法</code>被广泛应用，比如 Apache 的 ZooKeeper 也是基于 Paxos 实现的。</p> <h2 id="_5-知识延伸"><a href="#_5-知识延伸" class="header-anchor">#</a> 5. 知识延伸</h2> <p>在主从架构的配置中，如果想要采取读写分离的策略，我们可以<code>自己编写程序</code>，也可以通过<code>第三方的中间件</code>来实现。</p> <ul><li>自己编写程序的好处就在于比较自主，我们可以自己判断哪些查询在从库上来执行，针对实时性要求高的需求，我们还可以考虑哪些查询可以在主库上执行。同时，程序直接连接数据库，减少了中间件层，相当于减少了性能损耗。</li> <li>采用中间件的方法有很明显的优势，<code>功能强大</code>，<code>使用简单</code>。但因为在客户端和数据库之间增加了中间件层会有一些性能损耗，同时商业中间件也是有使用成本的。我们也可以考虑采取一些优秀的开源工具。</li></ul> <p><img src="/assets/img/image-20241202215805941.d71a6622.webp" alt="image-20241202215805941"></p> <p>① <code>Cobar</code> 属于阿里 B2B 事业群，始于 2008 年，在阿里服役 3 年多，接管 3000+个 MySQL 数据库的
schema,集群日处理在线 SQL 请求 50 亿次以上。由于 Cobar 发起人的离职，Cobar 停止维护。</p> <p>② <code>Mycat</code> 是开源社区在阿里 cobar 基础上进行二次开发，解决了 cobar 存在的问题，并且加入了许多新的功能在其中。青出于蓝而胜于蓝</p> <p>③ <code>OneProxy</code> 基于 MySQL 官方的 proxy 思想利用 c 语言进行开发的，OneProxy 是一款商业收费的中间件。舍弃了一些功能，专注在性能和稳定性上。</p> <p>④ <code>kingshard</code> 由小团队用 go 语言开发，还需要发展，需要不断完善。</p> <p>⑤ <code>Vitess</code> 是 Youtube 生产在使用，架构很复杂。不支持 MySQL 原生协议，使用需要大量改造成本。</p> <p>⑥ <code>Atlas</code> 是 360 团队基于 mysql proxy 改写，功能还需完善，高并发下不稳定。</p> <p>⑦ <code>MaxScale</code> 是 mariadb（MySQL 原作者维护的一个版本）研发的中间件</p> <p>⑧ <code>MySQLRoute</code> 是 MySQL 官方 Oracle 公司发布的中间件</p> <p><img src="/assets/img/image-20241202215856411.866b7024.webp" alt="image-20241202215856411.webp"></p> <p><img src="/assets/img/image-20241202215927317.7f154465.webp" alt="image-20241202215927317.webp"></p> <p>主备切换：</p> <p><img src="/assets/img/image-20241202220021079.3e5050d1.webp" alt="image-20241202220021079"></p> <ul><li>主动切换</li> <li>被动切换</li> <li>如何判断主库出问题了？如何解决过程中的数据不一致性问题？</li></ul></div></div> <!----> <div class="page-edit"><!----> <!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2025/09/14, 22:09:10</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-17/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">第17章_其它数据库日志</div></a> <a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-19/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">第19章_数据库备份与恢复</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-17/" class="prev">第17章_其它数据库日志</a></span> <span class="next"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-19/">第19章_数据库备份与恢复</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/java-basic/jdbc-core/"><div>
            JDBC 核心技术(JDK21版)
            <!----></div></a> <span class="date">09-24</span></dt></dl><dl><dd>02</dd> <dt><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-0/"><div>
            第00章_写在前面
            <!----></div></a> <span class="date">05-14</span></dt></dl><dl><dd>03</dd> <dt><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-1/"><div>
            第01章_Linux 下 MySQL 的安装与使用
            <!----></div></a> <span class="date">05-14</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:1214025526@qq.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/coderofmutou" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://gitee.com/ismutou" title="Gitee" target="_blank" class="iconfont icon-gitee"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2024-2025
    <span>bombax | <a href="https://github.com/coderofmutou/coderofmutou.github.io/blob/main/LICENSE" target="_blank">MIT License</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.ca5c989c.js" defer></script><script src="/assets/js/3.f2884e99.js" defer></script><script src="/assets/js/2.81e8b964.js" defer></script><script src="/assets/js/43.7426d1ac.js" defer></script>
  </body>
</html>
