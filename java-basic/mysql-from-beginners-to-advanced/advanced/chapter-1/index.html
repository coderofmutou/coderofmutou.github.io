<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>第01章_Linux 下 MySQL 的安装与使用 | Bombax&#39;s Knowledge Document Notes</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/img/favicon.ico">
    <meta name="description" content="技术知识学习笔记">
    <meta name="keywords" content="技术知识学习笔记">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/assets/css/0.styles.a5ee4d2c.css" as="style"><link rel="preload" href="/assets/js/app.ca5c989c.js" as="script"><link rel="preload" href="/assets/js/3.f2884e99.js" as="script"><link rel="preload" href="/assets/js/2.81e8b964.js" as="script"><link rel="preload" href="/assets/js/72.4f2efca4.js" as="script"><link rel="prefetch" href="/assets/js/1.f754fd0b.js"><link rel="prefetch" href="/assets/js/10.bde6e567.js"><link rel="prefetch" href="/assets/js/100.000718ad.js"><link rel="prefetch" href="/assets/js/101.863f022a.js"><link rel="prefetch" href="/assets/js/102.7b45f43b.js"><link rel="prefetch" href="/assets/js/103.ba5681a8.js"><link rel="prefetch" href="/assets/js/104.e35b7e87.js"><link rel="prefetch" href="/assets/js/105.15a150cd.js"><link rel="prefetch" href="/assets/js/106.aea81b3b.js"><link rel="prefetch" href="/assets/js/107.4f4dec09.js"><link rel="prefetch" href="/assets/js/108.0079fda6.js"><link rel="prefetch" href="/assets/js/109.7a5059de.js"><link rel="prefetch" href="/assets/js/11.fa1b0bc7.js"><link rel="prefetch" href="/assets/js/110.85007649.js"><link rel="prefetch" href="/assets/js/111.dbec93e3.js"><link rel="prefetch" href="/assets/js/112.f17a38c0.js"><link rel="prefetch" href="/assets/js/113.6478506e.js"><link rel="prefetch" href="/assets/js/114.6031c0db.js"><link rel="prefetch" href="/assets/js/115.d7094af2.js"><link rel="prefetch" href="/assets/js/116.316a6234.js"><link rel="prefetch" href="/assets/js/117.1336f5e0.js"><link rel="prefetch" href="/assets/js/118.4b882789.js"><link rel="prefetch" href="/assets/js/119.503f83be.js"><link rel="prefetch" href="/assets/js/12.04b9b957.js"><link rel="prefetch" href="/assets/js/120.af7d94d8.js"><link rel="prefetch" href="/assets/js/121.5cd3597d.js"><link rel="prefetch" href="/assets/js/122.82f45642.js"><link rel="prefetch" href="/assets/js/123.f2ba0b19.js"><link rel="prefetch" href="/assets/js/13.680e50fd.js"><link rel="prefetch" href="/assets/js/14.dfca4100.js"><link rel="prefetch" href="/assets/js/15.01784967.js"><link rel="prefetch" href="/assets/js/16.81c1d5ab.js"><link rel="prefetch" href="/assets/js/17.9a472859.js"><link rel="prefetch" href="/assets/js/18.5366cb68.js"><link rel="prefetch" href="/assets/js/19.b1b74ef9.js"><link rel="prefetch" href="/assets/js/20.e938fa21.js"><link rel="prefetch" href="/assets/js/21.3e38db33.js"><link rel="prefetch" href="/assets/js/22.f9d18654.js"><link rel="prefetch" href="/assets/js/23.8eea4b67.js"><link rel="prefetch" href="/assets/js/24.6fe732dc.js"><link rel="prefetch" href="/assets/js/25.b1885cb6.js"><link rel="prefetch" href="/assets/js/26.936ee89a.js"><link rel="prefetch" href="/assets/js/27.fb3beb63.js"><link rel="prefetch" href="/assets/js/28.af721a74.js"><link rel="prefetch" href="/assets/js/29.427b7eae.js"><link rel="prefetch" href="/assets/js/30.2af5e34e.js"><link rel="prefetch" href="/assets/js/31.60102330.js"><link rel="prefetch" href="/assets/js/32.746872da.js"><link rel="prefetch" href="/assets/js/33.9466d03b.js"><link rel="prefetch" href="/assets/js/34.c7f7b0ef.js"><link rel="prefetch" href="/assets/js/35.53799eb8.js"><link rel="prefetch" href="/assets/js/36.e8875fc1.js"><link rel="prefetch" href="/assets/js/37.c386b2c5.js"><link rel="prefetch" href="/assets/js/38.ee46082f.js"><link rel="prefetch" href="/assets/js/39.11d092ff.js"><link rel="prefetch" href="/assets/js/4.920d0610.js"><link rel="prefetch" href="/assets/js/40.4ee40bcf.js"><link rel="prefetch" href="/assets/js/41.81c3174c.js"><link rel="prefetch" href="/assets/js/42.18f42b9d.js"><link rel="prefetch" href="/assets/js/43.7426d1ac.js"><link rel="prefetch" href="/assets/js/44.d5baff75.js"><link rel="prefetch" href="/assets/js/45.7b25c5ca.js"><link rel="prefetch" href="/assets/js/46.dff72ed3.js"><link rel="prefetch" href="/assets/js/47.15531a4f.js"><link rel="prefetch" href="/assets/js/48.48bbc098.js"><link rel="prefetch" href="/assets/js/49.49acd468.js"><link rel="prefetch" href="/assets/js/5.847584a2.js"><link rel="prefetch" href="/assets/js/50.e26ee1bf.js"><link rel="prefetch" href="/assets/js/51.6728bddb.js"><link rel="prefetch" href="/assets/js/52.c238e7bf.js"><link rel="prefetch" href="/assets/js/53.025903f6.js"><link rel="prefetch" href="/assets/js/54.05baf03a.js"><link rel="prefetch" href="/assets/js/55.b6fc3e0a.js"><link rel="prefetch" href="/assets/js/56.8e5ef1fc.js"><link rel="prefetch" href="/assets/js/57.db41b6fb.js"><link rel="prefetch" href="/assets/js/58.b4cb51f8.js"><link rel="prefetch" href="/assets/js/59.423b27e1.js"><link rel="prefetch" href="/assets/js/6.b384c550.js"><link rel="prefetch" href="/assets/js/60.57eff889.js"><link rel="prefetch" href="/assets/js/61.387a5103.js"><link rel="prefetch" href="/assets/js/62.23ba2982.js"><link rel="prefetch" href="/assets/js/63.2d69780b.js"><link rel="prefetch" href="/assets/js/64.d3f669fb.js"><link rel="prefetch" href="/assets/js/65.f5410640.js"><link rel="prefetch" href="/assets/js/66.59887fb2.js"><link rel="prefetch" href="/assets/js/67.01fba30e.js"><link rel="prefetch" href="/assets/js/68.8a6bbb81.js"><link rel="prefetch" href="/assets/js/69.12e673c4.js"><link rel="prefetch" href="/assets/js/70.a227d4b3.js"><link rel="prefetch" href="/assets/js/71.bd6a3bd7.js"><link rel="prefetch" href="/assets/js/73.7dbf57a8.js"><link rel="prefetch" href="/assets/js/74.28c26d0a.js"><link rel="prefetch" href="/assets/js/75.d36a4feb.js"><link rel="prefetch" href="/assets/js/76.9123efc1.js"><link rel="prefetch" href="/assets/js/77.cbe2020d.js"><link rel="prefetch" href="/assets/js/78.7ab3eb40.js"><link rel="prefetch" href="/assets/js/79.bc69c4a8.js"><link rel="prefetch" href="/assets/js/80.da17de0b.js"><link rel="prefetch" href="/assets/js/81.1d16813f.js"><link rel="prefetch" href="/assets/js/82.586f2e97.js"><link rel="prefetch" href="/assets/js/83.129cc5fa.js"><link rel="prefetch" href="/assets/js/84.83d65ed9.js"><link rel="prefetch" href="/assets/js/85.f4327096.js"><link rel="prefetch" href="/assets/js/86.866a7d4f.js"><link rel="prefetch" href="/assets/js/87.f8aba274.js"><link rel="prefetch" href="/assets/js/88.43c5a138.js"><link rel="prefetch" href="/assets/js/89.b47b6d86.js"><link rel="prefetch" href="/assets/js/9.ef15744b.js"><link rel="prefetch" href="/assets/js/90.4950712a.js"><link rel="prefetch" href="/assets/js/91.80bbaffe.js"><link rel="prefetch" href="/assets/js/92.0d03ce50.js"><link rel="prefetch" href="/assets/js/93.fff94cff.js"><link rel="prefetch" href="/assets/js/94.91d0e36d.js"><link rel="prefetch" href="/assets/js/95.15227fb3.js"><link rel="prefetch" href="/assets/js/96.b3ef20b0.js"><link rel="prefetch" href="/assets/js/97.9e5e1675.js"><link rel="prefetch" href="/assets/js/98.b213b526.js"><link rel="prefetch" href="/assets/js/99.1ec76897.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.1b448e12.js">
    <link rel="stylesheet" href="/assets/css/0.styles.a5ee4d2c.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/logo.webp" alt="Bombax's Knowledge Document Notes" class="logo"> <span class="site-name can-hide">Bombax's Knowledge Document Notes</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java基础" class="dropdown-title"><a href="/java-basic/" class="link-title router-link-active">Java基础</a> <span class="title" style="display:none;">Java基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>前置</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/java-basic/java-learning/" class="nav-link">尚硅谷Java学习</a></li><li class="dropdown-subitem"><a href="/java-basic/software-install-config/" class="nav-link">基础软件安装与配置</a></li></ul></li><li class="dropdown-item"><h4>核心</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/java-basic/java-from-entry-to-proficiency/" class="nav-link">Java从入门到精通(JDK17版)</a></li><li class="dropdown-subitem"><a href="/java-basic/mysql-from-beginners-to-advanced/beginners/" class="nav-link">MySQL从入门到高级-基础篇</a></li><li class="dropdown-subitem"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/" class="nav-link router-link-active">MySQL从入门到高级-高级篇</a></li><li class="dropdown-subitem"><a href="/java-basic/jdbc-core/" class="nav-link">JDBC 核心技术(JDK21版)</a></li></ul></li><li class="dropdown-item"><h4>学习笔记</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/pojo/" class="nav-link">POJO 概念</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="微服务核心" class="dropdown-title"><a href="/micro-service-core/" class="link-title">微服务核心</a> <span class="title" style="display:none;">微服务核心</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Spring Cloud</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/micro-service-core/SpringCloud/" class="nav-link">SpringCloud</a></li><li class="dropdown-subitem"><a href="/micro-service-core/SpringCloud-Alibaba/" class="nav-link">SpringCloud-Alibaba</a></li></ul></li><li class="dropdown-item"><h4>持久层框架</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/micro-service-core/MyBatis/" class="nav-link">MyBatis</a></li><li class="dropdown-subitem"><a href="/micro-service-core/MyBatisPlus/" class="nav-link">MyBatis-Plus</a></li></ul></li><li class="dropdown-item"><h4>相关知识</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/20b7dd/" class="nav-link">Mybatis 代码生成工具比较</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="微服务生态" class="dropdown-title"><a href="/micro-service-ecology/" class="link-title">微服务生态</a> <span class="title" style="display:none;">微服务生态</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>安全框架</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/micro-service-ecology/SpringSecurity/" class="nav-link">安全框架之 Spring Security</a></li><li class="dropdown-subitem"><a href="/micro-service-ecology/Shiro/" class="nav-link">安全框架之 Shiro</a></li></ul></li><li class="dropdown-item"><h4>定时任务框架</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/micro-service-ecology/Quartz/" class="nav-link">定时任务框架之 Quartz</a></li><li class="dropdown-subitem"><a href="/micro-service-ecology/XXL-JOB/" class="nav-link">定时任务框架之 XXL-JOB</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="实用工具" class="dropdown-title"><a href="/tools/" class="link-title">实用工具</a> <span class="title" style="display:none;">实用工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/tools/java-logs/" class="nav-link">Java 日志热门框架</a></li><li class="dropdown-item"><!----> <a href="/tools/git/" class="nav-link">Git 常用命令</a></li><li class="dropdown-item"><!----> <a href="/tools/swagger/" class="nav-link">Swagger API 文档生成工具</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><!----> <span class="title" style="display:;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/weibocom/motan/wiki/zh_overview" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Motan RPC
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.knowledgedict.com/tutorial/lombok-intro.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Lombok Tutorial
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://projectlombok.org/features/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Lombok Features
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/alibaba/fastjson2/wiki/fastjson2_intro_cn" target="_blank" rel="noopener noreferrer" class="nav-link external">
  FastJSON2
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://felord.cn/_doc/spring/5.x.RELEASE/_book/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Spring Framework 5 中文文档
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://x-stream.github.io/index.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  XStream
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://neoremind.com/2016/02/java%E7%9A%84%E4%B8%9A%E5%8A%A1%E9%80%BB%E8%BE%91%E9%AA%8C%E8%AF%81%E6%A1%86%E6%9E%B6fluent-validator/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  fluent-validator 业务逻辑验证框架
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.ehcache.org/documentation/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ehcache java 缓存框架
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/alibaba/jetcache" target="_blank" rel="noopener noreferrer" class="nav-link external">
  jetcache java 缓存框架
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://caffeine.gitbook.io/caffeine" target="_blank" rel="noopener noreferrer" class="nav-link external">
  caffeine 缓存框架
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://springdoc.cn/spring/integration.html#cache" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Spring Cache
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.cnblogs.com/imyjy/p/15695160.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  主流缓存框架调研
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/redisson/redisson/wiki/%E7%9B%AE%E5%BD%95" target="_blank" rel="noopener noreferrer" class="nav-link external">
  redisson 官方中文文档
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://blog.csdn.net/u012934325/article/details/100652805" target="_blank" rel="noopener noreferrer" class="nav-link external">
  LiquiBase 中文学习指南
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://docs.liquibase.com/concepts/introduction-to-liquibase.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  LiquiBase 官方文档
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/coderofmutou/coderofmutou.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="/img/avatar.webp"> <div class="blogger-info"><h3>bombax</h3> <span>小小程序猿</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java基础" class="dropdown-title"><a href="/java-basic/" class="link-title router-link-active">Java基础</a> <span class="title" style="display:none;">Java基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>前置</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/java-basic/java-learning/" class="nav-link">尚硅谷Java学习</a></li><li class="dropdown-subitem"><a href="/java-basic/software-install-config/" class="nav-link">基础软件安装与配置</a></li></ul></li><li class="dropdown-item"><h4>核心</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/java-basic/java-from-entry-to-proficiency/" class="nav-link">Java从入门到精通(JDK17版)</a></li><li class="dropdown-subitem"><a href="/java-basic/mysql-from-beginners-to-advanced/beginners/" class="nav-link">MySQL从入门到高级-基础篇</a></li><li class="dropdown-subitem"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/" class="nav-link router-link-active">MySQL从入门到高级-高级篇</a></li><li class="dropdown-subitem"><a href="/java-basic/jdbc-core/" class="nav-link">JDBC 核心技术(JDK21版)</a></li></ul></li><li class="dropdown-item"><h4>学习笔记</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/pojo/" class="nav-link">POJO 概念</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="微服务核心" class="dropdown-title"><a href="/micro-service-core/" class="link-title">微服务核心</a> <span class="title" style="display:none;">微服务核心</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Spring Cloud</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/micro-service-core/SpringCloud/" class="nav-link">SpringCloud</a></li><li class="dropdown-subitem"><a href="/micro-service-core/SpringCloud-Alibaba/" class="nav-link">SpringCloud-Alibaba</a></li></ul></li><li class="dropdown-item"><h4>持久层框架</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/micro-service-core/MyBatis/" class="nav-link">MyBatis</a></li><li class="dropdown-subitem"><a href="/micro-service-core/MyBatisPlus/" class="nav-link">MyBatis-Plus</a></li></ul></li><li class="dropdown-item"><h4>相关知识</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/20b7dd/" class="nav-link">Mybatis 代码生成工具比较</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="微服务生态" class="dropdown-title"><a href="/micro-service-ecology/" class="link-title">微服务生态</a> <span class="title" style="display:none;">微服务生态</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>安全框架</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/micro-service-ecology/SpringSecurity/" class="nav-link">安全框架之 Spring Security</a></li><li class="dropdown-subitem"><a href="/micro-service-ecology/Shiro/" class="nav-link">安全框架之 Shiro</a></li></ul></li><li class="dropdown-item"><h4>定时任务框架</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/micro-service-ecology/Quartz/" class="nav-link">定时任务框架之 Quartz</a></li><li class="dropdown-subitem"><a href="/micro-service-ecology/XXL-JOB/" class="nav-link">定时任务框架之 XXL-JOB</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="实用工具" class="dropdown-title"><a href="/tools/" class="link-title">实用工具</a> <span class="title" style="display:none;">实用工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/tools/java-logs/" class="nav-link">Java 日志热门框架</a></li><li class="dropdown-item"><!----> <a href="/tools/git/" class="nav-link">Git 常用命令</a></li><li class="dropdown-item"><!----> <a href="/tools/swagger/" class="nav-link">Swagger API 文档生成工具</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><!----> <span class="title" style="display:;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/weibocom/motan/wiki/zh_overview" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Motan RPC
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.knowledgedict.com/tutorial/lombok-intro.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Lombok Tutorial
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://projectlombok.org/features/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Lombok Features
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/alibaba/fastjson2/wiki/fastjson2_intro_cn" target="_blank" rel="noopener noreferrer" class="nav-link external">
  FastJSON2
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://felord.cn/_doc/spring/5.x.RELEASE/_book/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Spring Framework 5 中文文档
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://x-stream.github.io/index.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  XStream
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://neoremind.com/2016/02/java%E7%9A%84%E4%B8%9A%E5%8A%A1%E9%80%BB%E8%BE%91%E9%AA%8C%E8%AF%81%E6%A1%86%E6%9E%B6fluent-validator/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  fluent-validator 业务逻辑验证框架
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.ehcache.org/documentation/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ehcache java 缓存框架
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/alibaba/jetcache" target="_blank" rel="noopener noreferrer" class="nav-link external">
  jetcache java 缓存框架
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://caffeine.gitbook.io/caffeine" target="_blank" rel="noopener noreferrer" class="nav-link external">
  caffeine 缓存框架
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://springdoc.cn/spring/integration.html#cache" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Spring Cache
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.cnblogs.com/imyjy/p/15695160.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  主流缓存框架调研
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/redisson/redisson/wiki/%E7%9B%AE%E5%BD%95" target="_blank" rel="noopener noreferrer" class="nav-link external">
  redisson 官方中文文档
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://blog.csdn.net/u012934325/article/details/100652805" target="_blank" rel="noopener noreferrer" class="nav-link external">
  LiquiBase 中文学习指南
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://docs.liquibase.com/concepts/introduction-to-liquibase.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  LiquiBase 官方文档
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/coderofmutou/coderofmutou.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>前置</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>核心</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Java从入门到精通(JDK17版)</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>MySQL从入门到高级-基础篇</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>MySQL从入门到高级-高级篇</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-0/" class="sidebar-link">第00章_写在前面</a></li><li><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-1/" aria-current="page" class="active sidebar-link">第01章_Linux 下 MySQL 的安装与使用</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-1/#_1-安装前说明" class="sidebar-link">1. 安装前说明</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-1/#_1-1-查看是否安装过-mysql" class="sidebar-link">1.1 查看是否安装过 MySQL</a></li><li class="sidebar-sub-header level3"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-1/#_1-2-mysql-的卸载" class="sidebar-link">1.2 MySQL 的卸载</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-1/#_2-mysql-的-linux-版安装" class="sidebar-link">2. MySQL 的 Linux 版安装</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-1/#_2-1-linux-系统下安装-mysql-的几种方式" class="sidebar-link">2.1 Linux 系统下安装 MySQL 的几种方式</a></li><li class="sidebar-sub-header level3"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-1/#_2-2-通过-rpm-包方式安装-mysql" class="sidebar-link">2.2 通过 rpm 包方式安装 MySQL</a></li><li class="sidebar-sub-header level3"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-1/#_2-3-通过设置官方的-yum-仓库进行安装" class="sidebar-link">2.3 通过设置官方的 yum 仓库进行安装</a></li><li class="sidebar-sub-header level3"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-1/#_2-4-查看-mysql-版本" class="sidebar-link">2.4 查看 MySQL 版本</a></li><li class="sidebar-sub-header level3"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-1/#_2-5-初始化-mysql-数据目录" class="sidebar-link">2.5 初始化 MySQL 数据目录</a></li><li class="sidebar-sub-header level3"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-1/#_2-6-启动-mysql-查看状态" class="sidebar-link">2.6 启动 MySQL 查看状态</a></li><li class="sidebar-sub-header level3"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-1/#_2-7-查看-mysql-服务是否自启动" class="sidebar-link">2.7 查看 MySQL 服务是否自启动</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-1/#_3-mysql-登录" class="sidebar-link">3. MySQL 登录</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-1/#_3-1-首次登录" class="sidebar-link">3.1 首次登录</a></li><li class="sidebar-sub-header level3"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-1/#_3-2-修改密码" class="sidebar-link">3.2 修改密码</a></li><li class="sidebar-sub-header level3"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-1/#_3-3-设置远程登录" class="sidebar-link">3.3 设置远程登录</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-1/#_4-mysql-密码验证插件和组件" class="sidebar-link">4. MySQL 密码验证插件和组件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-1/#_4-1-mysql8-之前的安全策略" class="sidebar-link">4.1 MySQL8 之前的安全策略</a></li><li class="sidebar-sub-header level3"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-1/#_4-2-mysql8-的安全策略" class="sidebar-link">4.2 MySQL8 的安全策略</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-1/#_5-字符集的相关操作" class="sidebar-link">5. 字符集的相关操作</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-1/#_5-1-修改-mysql-字符集" class="sidebar-link">5.1 修改 MySQL 字符集</a></li><li class="sidebar-sub-header level3"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-1/#_5-2-各级别的字符集" class="sidebar-link">5.2 各级别的字符集</a></li><li class="sidebar-sub-header level3"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-1/#_5-3-字符集与比较规则" class="sidebar-link">5.3 字符集与比较规则</a></li><li class="sidebar-sub-header level3"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-1/#_5-4-请求到响应过程中字符集的变化" class="sidebar-link">5.4 请求到响应过程中字符集的变化</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-1/#_6-sql-大小写规范" class="sidebar-link">6. SQL 大小写规范</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-1/#_6-1-windows-和-linux-平台区别" class="sidebar-link">6.1 Windows 和 Linux 平台区别</a></li><li class="sidebar-sub-header level3"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-1/#_6-2-linux-下大小写规则设置" class="sidebar-link">6.2 Linux 下大小写规则设置</a></li><li class="sidebar-sub-header level3"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-1/#_6-3-sql-编写规范建议" class="sidebar-link">6.3 SQL 编写规范建议</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-1/#_7-sql-mode-的合理设置" class="sidebar-link">7. sql_mode 的合理设置</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-1/#_7-1-介绍" class="sidebar-link">7.1 介绍</a></li><li class="sidebar-sub-header level3"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-1/#_7-2-宽松模式-vs-严格模式" class="sidebar-link">7.2 宽松模式 vs 严格模式</a></li><li class="sidebar-sub-header level3"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-1/#_7-3-宽松模式再举例" class="sidebar-link">7.3 宽松模式再举例</a></li><li class="sidebar-sub-header level3"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-1/#_7-4-模式查看和设置" class="sidebar-link">7.4 模式查看和设置</a></li><li class="sidebar-sub-header level3"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-1/#_7-5-sql-mode-常用值" class="sidebar-link">7.5 sql_mode 常用值</a></li></ul></li></ul></li><li><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-2/" class="sidebar-link">第02章_MySQL 的数据目录</a></li><li><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-3/" class="sidebar-link">第03章_用户与权限管理</a></li><li><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-4/" class="sidebar-link">第04章_逻辑架构</a></li><li><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-5/" class="sidebar-link">第05章_存储引擎</a></li><li><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-6/" class="sidebar-link">第06章_索引的数据结构</a></li><li><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-7/" class="sidebar-link">第07章_InnoDB 数据存储结构</a></li><li><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-8/" class="sidebar-link">第08章_索引的创建与设计原则</a></li><li><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-9/" class="sidebar-link">第09章_性能分析工具的使用</a></li><li><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-10/" class="sidebar-link">第10章_索引优化与查询优化</a></li><li><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-11/" class="sidebar-link">第11章_数据库的设计规范</a></li><li><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-12/" class="sidebar-link">第12章_数据库其它调优策略</a></li><li><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-13/" class="sidebar-link">第13章_事务基础知识</a></li><li><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-14/" class="sidebar-link">第14章_MySQL 事务日志</a></li><li><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-15/" class="sidebar-link">第15章_锁</a></li><li><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-16/" class="sidebar-link">第16章_多版本并发控制</a></li><li><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-17/" class="sidebar-link">第17章_其它数据库日志</a></li><li><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-18/" class="sidebar-link">第18章_主从复制</a></li><li><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-19/" class="sidebar-link">第19章_数据库备份与恢复</a></li></ul></section></li><li><a href="/java-basic/jdbc-core/" class="sidebar-link">JDBC 核心技术(JDK21版)</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>学习笔记</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/categories/?category=Java%E5%9F%BA%E7%A1%80" title="分类" data-v-06225672>Java基础</a></li><li data-v-06225672><a href="/categories/?category=%E6%A0%B8%E5%BF%83" title="分类" data-v-06225672>核心</a></li><li data-v-06225672><a href="/categories/?category=MySQL%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E9%AB%98%E7%BA%A7-%E9%AB%98%E7%BA%A7%E7%AF%87" title="分类" data-v-06225672>MySQL从入门到高级-高级篇</a></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="https://github.com/coderofmutou" target="_blank" title="作者" class="beLink" data-v-06225672>bombax</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2025-05-14</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABKFJREFUSA3tVl1oFVcQnrMbrak3QUgkya1akpJYcrUtIqW1JvFBE9LiQ5v6JmJpolbMg32rVrhgoYK0QiMY6i9Y6EMaW5D+xFJaTYItIuK2Kr3+BJNwkxBj05sQY3b3nM6cs2dv9t7NT/vQJw/sndk5M/PNzJkzewGerP+pAmy+ON8lLzUJgA8ZYxYIYZmGYRnctDaWvJJAmTtfP1pvXsBCCPP8QFcCaRkZYACgDZFO4stNIcBCajEOlmmC9XpJ9bAGCaPaPmzPl32dvLSVu3BWCTQs0XQQ6g0DYgwLIoAZbBCdW/i+781o1VVlm/410mw4h06Y7bIPHNyWDyL4FHkX03Q8SrzNhZTZriieckWt7cL6MM85YcLpsi/7O9/iXFT6MswI0DmmpkSaJ0qLxFIm3+i1THHB3zmBH3PYx9CcykcLOeQVVa7QtdxTgQgEleX2AjHYfwA+2ddV77ruGoJUbhGDI09YSNXyMpUt5ylOzxgbUmtOp7NmbNt8v3arjTBfYELmLUV+M+nSawNNAUqpT3ClJWg5I3BLT+cGW/DXNGCa6tx1aakCGEigArTn4TDIPdrXXYKCZNrHLMCOEPvHBlLQ99s9eHB7EB6NTki73CVPQ2F5MSx/uRQixfmq7rK0wYD8w8E905bnPDfwoWs/rfv93NWN/ZfvwsLIU7A09gxECyISeGJkHAau98L97tuw7NXnoPyNF8FcYGLGKsOs0mN3OEyec9esGW/ZEl945dTP34wlR2FZVQWU1q0Cw8Tr7p+hgLLNL0FPxx/Q35mA8aEUrH6nCgwEl0tn7wUiZYJnNRh6DK4UH/k0lfyrsBKdPVv/AriGIQcEDQZ65LBAGe2Rzui9Ybjz7XUppz1/uKBbyVPGkN3ZAeC6hr0x7Nr38N5+EqkoOm17xpoqR9ohQF55ERSvr4Dkr3chNfC3DMzGJlNBElW8w9nsGQvhNGIzDkXzCg8cLK951xHsFBlTJspJNi3ZFIMF2AeDV3q8DNOB+YHi6QTrChDIWDBRi5U5f+ZMfJLu3ccrqxtdxk4SKH336LFxSmkqefwU5T8fhdSdQf9IVKD6aNiwI/hnmcAZ91isYMJIaCUCx9W098+LgruikeTqzqqxKPUwqJyCPJiyemVVZBOijDGjD38Os0jOiSPL1z3SPjXNANbiNPXAdzTfukjjuknNBbyz3nwgTd3AVFqUJ5hpHlq9MveLnWwttUfoygBmvVjuikxND3znrhsELnZk7k+OjIGxeNEkomyLVta0xxn+HZhjBc4YZ/AFjHjz9u3xRZl2BN4aq9nFwWh16IrQ1aHHEd3j1+4/dB9OtH4e29A2H1DyHQRmOSfQZ1Fy7MHBTGB6J/Djq6p3OxyO2cB+4Car7v/o3GXgfAkj23+x9ID1Teoamo/SXcbvSf2PX7Vc8DdCmE1vN9di+32P9/5YR3vLnhCVGUWBjEkr3yh4H8v9CzmsbdhzOKzsJKM90iFdaTMjRPhGVsakRvOaRidljo6H6G7j+ctrJpsP+4COhDIl0La2+FS4+5mlocBaXY5QnGZysIBYoeSsl5qQzrSj/cgNrfuEzlWBfwA+EjrZyWUvpAAAAABJRU5ErkJggg==">第01章_Linux 下 MySQL 的安装与使用<!----></h1> <!----> <div class="theme-vdoing-content content__default"><h1 id="第-01-章-linux-下-mysql-的安装与使用"><a href="#第-01-章-linux-下-mysql-的安装与使用" class="header-anchor">#</a> 第 01 章 Linux 下 MySQL 的安装与使用</h1> <h2 id="_1-安装前说明"><a href="#_1-安装前说明" class="header-anchor">#</a> 1. 安装前说明</h2> <h3 id="_1-1-查看是否安装过-mysql"><a href="#_1-1-查看是否安装过-mysql" class="header-anchor">#</a> 1.1 查看是否安装过 MySQL</h3> <ul><li><p>如果使用 rpm 安装, 检查一下 RPM PACKAGE</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">rpm</span> <span class="token parameter variable">-qa</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token parameter variable">-i</span> mysql <span class="token comment"># -i 忽略大小写</span>
<span class="token comment"># 或者</span>
yum list installed <span class="token operator">|</span> <span class="token function">grep</span> mysql
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>如果存在 mysql-libs 的旧版本包，显示如下</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@node2 ~<span class="token punctuation">]</span><span class="token comment"># rpm -qa | grep -i mysql</span>
mysql-community-common-8.0.25-1.el7.x86_64
mysql-community-server-8.0.25-1.el7.x86_64
mysql-community-client-plugins-8.0.25-1.el7.x86_64
mysql-community-client-8.0.25-1.el7.x86_64
mysql-community-libs-8.0.25-1.el7.x86_64

<span class="token punctuation">[</span>root@node2 ~<span class="token punctuation">]</span><span class="token comment"># yum list installed | grep mysql</span>
mysql-community-client.x86_64          <span class="token number">8.0</span>.25-1.el7                    installed
mysql-community-client-plugins.x86_64  <span class="token number">8.0</span>.25-1.el7                    installed
mysql-community-common.x86_64          <span class="token number">8.0</span>.25-1.el7                    installed
mysql-community-libs.x86_64            <span class="token number">8.0</span>.25-1.el7                    installed
mysql-community-server.x86_64          <span class="token number">8.0</span>.25-1.el7                    installed
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">提示</p> <p>&quot;libs&quot; 是 &quot;libraries&quot; 的缩写，意为库</p></div></li></ul> <ul><li><p>检查 mysql service</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>systemctl status mysqld.service
mysqladmin <span class="token parameter variable">--version</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li></ul> <h3 id="_1-2-mysql-的卸载"><a href="#_1-2-mysql-的卸载" class="header-anchor">#</a> 1.2 MySQL 的卸载</h3> <h4>1. 关闭 mysql 服务</h4> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>systemctl stop mysqld.service
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4>2. 查看当前 mysql 安装状况</h4> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">rpm</span> <span class="token parameter variable">-qa</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token parameter variable">-i</span> mysql
<span class="token comment"># 或</span>
yum list installed <span class="token operator">|</span> <span class="token function">grep</span> mysql
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4>3. 卸载上述命令查询出的已安装程序</h4> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>yum remove mysql-xxx mysql-xxx mysql-xxx 
yum remove mysql-*
<span class="token function">rpm</span> <span class="token parameter variable">-qa</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token parameter variable">-i</span> mysql<span class="token operator">|</span><span class="token function">xargs</span> yum remove <span class="token parameter variable">-y</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>务必卸载干净，反复执行<code>rpm -qa | grep -i mysql</code>确认是否有卸载残留</p> <h4>4. 查找删除 mysql 相关文件</h4> <ul><li><strong>查找相关文件</strong></li></ul> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 注意不要误删</span>
<span class="token comment"># 找出文件名为 mysql 的所有文件或目录</span>
<span class="token function">find</span> / <span class="token parameter variable">-name</span> mysql
<span class="token comment"># 找出文件名包含 mysql 的所有文件或目录</span>
<span class="token comment"># * 是通配符，代表任意字符</span>
<span class="token function">find</span> / <span class="token parameter variable">-name</span> <span class="token string">'*mysql*'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ul><li><strong>删除上述命令查找出的相关文件</strong></li></ul> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">rm</span> <span class="token parameter variable">-rf</span> xxx
<span class="token comment"># 容易误删,不要使用此命令</span>
<span class="token function">find</span> / <span class="token parameter variable">-name</span> mysql<span class="token operator">|</span><span class="token function">xargs</span> <span class="token function">rm</span> <span class="token parameter variable">-rf</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4>5. 删除 `my.cnf`</h4> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code> <span class="token function">rm</span> <span class="token parameter variable">-rf</span> /etc/my.cnf
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4>6. 常见需要删除的目录和文件</h4> <ul><li><strong>数据目录</strong> 通常是 <code>/var/lib/mysql/</code>，包含 MySQL 数据库的数据文件</li> <li><strong>配置文件</strong> 包括但不限于 <code>/etc/my.cnf</code> 和 <code>/etc/mysql/</code> 目录下的配置文件</li> <li><strong>日志文件</strong> MySQL 日志文件通常存储在 <code>/var/log/mysql/</code> 目录下</li> <li><strong>临时文件</strong> MySQL 可能会在运行时创建临时文件，这些文件可能存储在 <code>/tmp/</code> 目录下或其他指定的临时目录中</li> <li><strong>启动脚本</strong> 如果使用的是 systemd，可能需要删除位于 <code>/etc/systemd/system/</code> 目录下的 MySQL 启动脚本</li> <li><strong>用户和组</strong> 如果安装 MySQL 时创建了专用的用户和组，可能需要删除这些用户和组。</li></ul> <h2 id="_2-mysql-的-linux-版安装"><a href="#_2-mysql-的-linux-版安装" class="header-anchor">#</a> 2. MySQL 的 Linux 版安装</h2> <h3 id="_2-1-linux-系统下安装-mysql-的几种方式"><a href="#_2-1-linux-系统下安装-mysql-的几种方式" class="header-anchor">#</a> 2.1 Linux 系统下安装 MySQL 的几种方式</h3> <h4>方式一：rpm 命令安装</h4> <p>使用 rpm 命令安装扩展名为<code>.rpm</code>的软件包。</p> <p><code>.rpm</code>包的一般格式：</p> <p><img src="/assets/img/image-20230824015832372.602391e4.webp" alt="image-20230824015832372"></p> <p>系统版本 el7 <code>Red Hat Enterprise Linux (RHEL) 7</code></p> <h4>方式二：yum 命令</h4> <p>需联网，从互联网获取的 yum 源，直接使用 yum 命令安装。</p> <h4>方式三：编译安装源码包</h4> <p>针对 <code>tar.gz</code> 这样的压缩格式，要用 tar 命令来解压；如果是其它压缩格式，就使用其它命令。</p> <table><thead><tr><th style="text-align:left;">安装方式</th> <th style="text-align:left;">特点</th></tr></thead> <tbody><tr><td style="text-align:left;">rpm</td> <td style="text-align:left;">安装简单，灵活性差，无法灵活选择版本、升级</td></tr> <tr><td style="text-align:left;">rpm repository</td> <td style="text-align:left;">安装包极小，版本安装简单灵活，升级方便，需要联网安装</td></tr> <tr><td style="text-align:left;">通用二进制</td> <td style="text-align:left;">包安装比较复杂，灵活性高，平台通用性好</td></tr> <tr><td style="text-align:left;">源码包</td> <td style="text-align:left;">安装最复杂，时间长，参数设置灵活，性能好</td></tr></tbody></table> <h3 id="_2-2-通过-rpm-包方式安装-mysql"><a href="#_2-2-通过-rpm-包方式安装-mysql" class="header-anchor">#</a> 2.2 通过 rpm 包方式安装 MySQL</h3> <h4>下载 rpm 包</h4> <ul><li><p><strong>通过<a href="https://downloads.mysql.com/archives/community/" target="_blank" rel="noopener noreferrer">网页下载<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，上传到服务器</strong></p> <p>这里不能直接选择 CentOS 系统的版本，所以选择与之对应的 Red Hat Enterprise Linux。</p> <p>直接点 Download 下载 RPM Bundle 全量包。包括了所有下面的组件。不需要一个一个下载了。</p></li> <li><p><strong>直接通过 wget 下载</strong></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">mkdir</span> /opt/mysql
<span class="token builtin class-name">cd</span> /opt/mysql
<span class="token comment">#下载mysql安装包</span>
<span class="token function">wget</span> https://cdn.mysql.com/archives/mysql-8.0/mysql-8.0.25-1.el8.x86_64.rpm-bundle.tar
<span class="token function">wget</span> https://cdn.mysql.com/archives/mysql-5.7/mysql-5.7.26-1.el7.x86_64.rpm-bundle.tar
<span class="token function">tar</span> <span class="token parameter variable">-xvf</span> mysql-5.7.26-1.el7.x86_64.rpm-bundle.tar
<span class="token comment"># 软件名mysql 版本号 5.7.26</span>
<span class="token comment"># 发布次数1 系统版本el7 硬件平台 x86_64</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></li></ul> <h4>检查 MySQL 依赖</h4> <p><strong>检查 <code>/tmp</code>  临时目录权限（必不可少）</strong></p> <p>由于 mysql 安装过程中，会通过 mysql 用户在 <code>/tmp</code> 目录下新建 <code>tmp_db</code> 文件，所以请给 <code>/tmp</code> 较大的权限。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">chmod</span> <span class="token parameter variable">-R</span> <span class="token number">777</span> /tmp
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>可能缺失的依赖</strong></p> <p><code>libaio net-tools ncurses-compat-libs perl-interpreter</code></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 检查依赖</span>
<span class="token function">rpm</span> -qa<span class="token operator">|</span><span class="token function">grep</span> libaio
<span class="token function">rpm</span> -qa<span class="token operator">|</span><span class="token function">grep</span> net-tools
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>缺少依赖文件，可以通过以下命令查找安装</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>yum provides <span class="token operator">&lt;</span>缺失的文件名<span class="token operator">&gt;</span>
<span class="token comment"># 安装缺失的依赖</span>
yum <span class="token function">install</span> xxx
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>错误: 依赖检测失败:
	/usr/bin/perl 被 mysql-community-server-8.0.25-1.el8.x86_64 需要
<span class="token comment"># yum provides /usr/bin/perl</span>
perl-interpreter-4:5.26.3-419.el8.x86_64 <span class="token builtin class-name">:</span> Standalone executable Perl interpreter
仓库: baseos
匹配来源:
文件名: /usr/bin/perl
<span class="token comment"># yum install perl-interpreter</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4>RPM 包介绍</h4> <ul><li><code>mysql-community-client.rpm</code>：MySQL 客户端软件包，用于连接到 MySQL 服务器并执行 SQL 查询和管理数据库。</li> <li><code>mysql-community-common.rpm</code>：MySQL 的共享文件，包含了所有 MySQL 安装中共享的文件。</li> <li><code>mysql-community-devel.rpm</code>：MySQL 开发文件，包含了用于编译和开发 MySQL 应用程序的头文件和库文件。</li> <li><code>mysql-community-embedded.rpm</code>：MySQL 嵌入式服务器，适用于嵌入式应用程序和特殊用途场景。</li> <li><code>mysql-community-embedded-compat.rpm</code>：MySQL 嵌入式兼容库，与嵌入式服务器一起使用。</li> <li><code>mysql-community-embedded-devel.rpm</code>：MySQL 嵌入式开发文件，用于开发嵌入式应用程序。</li> <li><code>mysql-community-libs.rpm</code> 包含 MySQL 客户端和服务器所需的共享库文件。这些共享库文件包括了 MySQL 的核心功能和支持文件。</li> <li><code>mysql-community-libs-compat.rpm</code>：MySQL 客户端库的兼容库。兼任旧版本的 MySQL 库。</li> <li><code>mysql-community-server.rpm</code>：MySQL 服务器软件包，用于安装和运行 MySQL 数据库服务器。</li> <li><code>mysql-community-test.rpm</code>：MySQL 测试套件，用于测试 MySQL 服务器的性能和功能。</li></ul> <h4>MySQL 安装过程</h4> <p><strong>将安装程序拷贝到 <code>/opt</code> 目录下</strong></p> <p>在 mysql 的安装文件目录下执行：（必须按照顺序执行）</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">rpm</span> <span class="token parameter variable">-ivh</span> mysql-community-common-8.0.25-1.el7.x86_64.rpm
<span class="token comment"># MySQL 5.7 没有 mysql-community-client-plugins，安装其他四个rpm包即可</span>
<span class="token function">rpm</span> <span class="token parameter variable">-ivh</span> mysql-community-client-plugins-8.0.25-1.el7.x86_64.rpm 
<span class="token function">rpm</span> <span class="token parameter variable">-ivh</span> mysql-community-libs-8.0.25-1.el7.x86_64.rpm 
<span class="token function">rpm</span> <span class="token parameter variable">-ivh</span> mysql-community-client-8.0.25-1.el7.x86_64.rpm 
<span class="token comment"># 如果安装 MySQL 8.4 ，这里还需要安装 icu-data-files</span>
<span class="token comment"># mysql-community-icu-data-files-8.4.5-1.el7.x86_64</span>
<span class="token function">rpm</span> <span class="token parameter variable">-ivh</span> mysql-community-server-8.0.25-1.el7.x86_64.rpm
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ul><li><code>rpm</code> 是 Redhat Package Manage 缩写，通过 RPM 的管理，用户可以把源代码包装成以 rpm 为扩展名的文件形式，易于安装。</li> <li><code>-i</code>, --install 安装软件包</li> <li><code>-v</code>, --verbose 提供更多的详细信息输出</li> <li><code>-h</code>, --hash 软件包安装的时候列出哈希标记 （和 -v 一起使用效果更好），展示进度条</li></ul> <div class="custom-block warning"><p class="custom-block-title">注意</p> <ol><li>如在检查工作时，没有检查 mysql 依赖环境，在安装 <code>mysql-community-server</code> 会报错。</li> <li>安装 <code>mysql-community-libs</code> 时，若存在 <code>mariadb-libs</code> 问题。 错误: 依赖检测失败：<code>mariadb-libs</code> 被 <code>mysql-community-libs-8.0.25-1.el7.x86_64</code> 取代。 执行 <code>yum remove mysql-libs</code> 即可。</li></ol></div> <h3 id="_2-3-通过设置官方的-yum-仓库进行安装"><a href="#_2-3-通过设置官方的-yum-仓库进行安装" class="header-anchor">#</a> 2.3 通过设置官方的 yum 仓库进行安装</h3> <p><a href="https://dev.mysql.com/doc/mysql-yum-repo-quick-guide/en/#repo-qg-yum-repo-setup" target="_blank" rel="noopener noreferrer">MySQL :: A Quick Guide to Using the MySQL Yum Repository<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>官方仓库通常会提供额外的工具和插件，这些工具和插件可能不在系统默认仓库中。比如 <code>mysql shell</code></p> <p><a href="https://dev.mysql.com/downloads/repo/yum/" target="_blank" rel="noopener noreferrer">YUM 仓库配置文件下载地址<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h4>安装仓库文件</h4> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># yum localinstall platform-and-version-specific-package-name.rpm</span>
yum localinstall mysql84-community-release-el8-n.noarch.rpm
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>配置文件的名字开头是默认安装的 mysql 版本号，比如 <code>mysql84</code> 即  <code>mysql8.4 LTS</code> 版本</p> <h4>选择不同的发布系列</h4> <p>在 <a href="https://repo.mysql.com/yum/" target="_blank" rel="noopener noreferrer">MySQL Yum 仓库<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>中，不同版本系列的 MySQL Community Server 存放在不同的子仓库中。最新的 LTS 系列的子仓库默认启用，而其他所有系列的子仓库默认禁用。</p> <p>使用以下命令查看 MySQL Yum 仓库中的所有子仓库，可以查看子仓库的状态</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>yum repolist all <span class="token operator">|</span> <span class="token function">grep</span> mysql
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>安装不同版本的 MySQL 需要切换子仓库的状态</p> <p>切换默认的 mysql 版本 8.4 到 8.0</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> yum-config-manager <span class="token parameter variable">--disable</span> mysql-8.4-lts-community
<span class="token function">sudo</span> yum-config-manager <span class="token parameter variable">--disable</span> mysql-tools-8.4-lts-community

<span class="token function">sudo</span> yum-config-manager <span class="token parameter variable">--enable</span> mysql80-community
<span class="token function">sudo</span> yum-config-manager <span class="token parameter variable">--enable</span> mysql-tools-community
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>禁用 Centos yum 自带的 mysql 模块，防止冲突</strong></p> <p>RHEL8 包含默认的 mysql 模块，如果不禁止该模块，它会优先于官方提供的模块。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>yum module disable mysql
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>安装 mysql</strong></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>yum <span class="token function">install</span> mysql-community-server
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>查看其他可以安装的 mysql 相关的组件和产品</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>yum <span class="token parameter variable">--disablerepo</span><span class="token operator">=</span><span class="token punctuation">\</span>* <span class="token parameter variable">--enablerepo</span><span class="token operator">=</span><span class="token string">'mysql*-community*'</span> list available
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_2-4-查看-mysql-版本"><a href="#_2-4-查看-mysql-版本" class="header-anchor">#</a> 2.4 查看 MySQL 版本</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>mysql <span class="token parameter variable">--version</span> 
mysqladmin <span class="token parameter variable">--version</span>
<span class="token comment">#或者</span>
<span class="token function">rpm</span> -qa<span class="token operator">|</span><span class="token function">grep</span> <span class="token parameter variable">-i</span> mysql
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="_2-5-初始化-mysql-数据目录"><a href="#_2-5-初始化-mysql-数据目录" class="header-anchor">#</a> 2.5 初始化 MySQL 数据目录</h3> <p>为了保证数据库目录与文件的所有者为 mysql 登录用户，如果你是以 root 身份运行 mysql 服务，需要执行下面的命令初始化：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>mysqld <span class="token parameter variable">--initialize</span> <span class="token parameter variable">--user</span><span class="token operator">=</span>mysql
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li><p><code>--initialize</code>：这是 <code>mysqld</code> 的一个选项，指示 <code>mysqld</code> 执行初始化操作。初始化操作包括创建 MySQL 数据目录并生成初始的系统表、权限表等。</p></li> <li><p><code>--user=mysql</code>：这是一个可选的选项，指定在初始化过程中 <code>mysqld</code> 进程所使用的操作系统用户。在这个例子中，<code>mysqld</code> 进程将以 <code>mysql</code> 用户的身份运行。这有助于提高安全性，因为 MySQL 进程将以非特权用户的身份运行，从而减少了潜在的安全风险。</p></li></ul> <div class="custom-block tip"><p class="custom-block-title">说明</p> <p><code>--initialize</code>  选项默认以“安全”模式来初始化，则会为 root 用户生成一个密码并将<code>该密码标记为过期</code>，登录后你需要设置一个新的密码。生成的<code>临时密码</code>会往日志中记录一份。</p></div> <p><strong>查看密码：</strong></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># mysql安装初次启动后，才会有日志内容可供查询</span>
<span class="token function">cat</span> /var/log/mysqld.log<span class="token operator">|</span><span class="token function">grep</span> password
<span class="token punctuation">[</span>Note<span class="token punctuation">]</span> A temporary password is generated <span class="token keyword">for</span> root@localhost: <span class="token operator">&lt;</span>password<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">rpm 安装方式，可以不执行此命令</p> <p>在以下两种情况下，可能需要执行</p> <ul><li>通过二进制包安装 <code>.tar.gz</code>或者<code>.zip</code></li> <li>通过源代码编译安装</li></ul> <p>在以上两种情况下，MySQL 数据目录通常是空的或者不存在的，因此需要执行初始化命令来准备数据库系统的初始状态。</p></div> <h3 id="_2-6-启动-mysql-查看状态"><a href="#_2-6-启动-mysql-查看状态" class="header-anchor">#</a> 2.6 启动 MySQL 查看状态</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 加不加.service后缀都可以 </span>
启动: systemctl start mysqld.service 
关闭: systemctl stop mysqld.service 
重启: systemctl restart mysqld.service 
查看状态: systemctl status mysqld.service
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">提示</p> <p><code>mysqld</code> 这个可执行文件就代表着 <code>MySQL</code> 服务器程序，运行这个可执行文件就可以直接启动一个服务器进程。</p></div> <p><strong>查看进程</strong></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">ps</span> <span class="token parameter variable">-ef</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token parameter variable">-i</span> mysql
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_2-7-查看-mysql-服务是否自启动"><a href="#_2-7-查看-mysql-服务是否自启动" class="header-anchor">#</a> 2.7 查看 MySQL 服务是否自启动</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>systemctl list-unit-files<span class="token operator">|</span><span class="token function">grep</span> mysqld.service
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>如不是 enabled 可以运行如下命令设置自启动</li></ul> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>systemctl <span class="token builtin class-name">enable</span> mysqld.service
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>如果希望不进行自启动，运行如下命令设置</li></ul> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>systemctl disable mysqld.service
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="_3-mysql-登录"><a href="#_3-mysql-登录" class="header-anchor">#</a> 3. MySQL 登录</h2> <h3 id="_3-1-首次登录"><a href="#_3-1-首次登录" class="header-anchor">#</a> 3.1 首次登录</h3> <p>通过 <code>mysql -hlocalhost -P3306 -uroot -p</code> 进行登录</p> <p>在 Enter password：录入初始化密码</p> <div class="custom-block tip"><p class="custom-block-title">提示</p> <p><code>--ssl-mode=DISABLED</code>  版本不同时可能需要用到这个参数，比如客户端 mysql 8.0.26 去连服务端 mysql 5.7.26。</p></div> <h3 id="_3-2-修改密码"><a href="#_3-2-修改密码" class="header-anchor">#</a> 3.2 修改密码</h3> <ul><li>因为初始化密码默认是过期的，所以查看数据库会报错。</li> <li>修改密码：<div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">USER</span> <span class="token string">'root'</span><span class="token variable">@'localhost'</span> IDENTIFIED <span class="token keyword">BY</span> <span class="token string">'new_password'</span><span class="token punctuation">;</span>
<span class="token comment"># 或者</span>
<span class="token keyword">set</span> password <span class="token keyword">for</span> <span class="token string">'root'</span><span class="token variable">@'localhost'</span><span class="token operator">=</span>password<span class="token punctuation">(</span><span class="token string">'root1234'</span><span class="token punctuation">)</span>
flush <span class="token keyword">privileges</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li> <li>5.7 版本之后（不含 5.7），mysql 加入了全新的密码安全机制。设置新密码太简单会报错。</li> <li>改为更复杂的密码规则之后，设置成功，可以正常使用数据库了。</li> <li>测试环境可以修改安全策略降低，以便使用弱密码。<div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># MySQL 5.7</span>
<span class="token keyword">SET</span> <span class="token keyword">GLOBAL</span> validate_password_policy<span class="token operator">=</span>LOW<span class="token punctuation">;</span>
<span class="token keyword">SET</span> <span class="token keyword">GLOBAL</span> validate_password_policy<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment"># 等同于LOW</span>

<span class="token comment"># MySQL 8.0 以上最后一个斜杠改成点</span>
<span class="token keyword">SET</span> <span class="token keyword">GLOBAL</span> validate_password<span class="token punctuation">.</span>policy<span class="token operator">=</span>LOW<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li></ul> <h3 id="_3-3-设置远程登录"><a href="#_3-3-设置远程登录" class="header-anchor">#</a> 3.3 设置远程登录</h3> <h4>确认网络</h4> <p>在远程机器上使用 ping ip 地址<code>保证网络畅通</code></p> <p>在远程机器上使用 telnet 命令<code>保证端口号开放</code>访问</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>telnet <span class="token function">ip</span> port
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">开启 telnet</p> <p>控制面板--&gt;程序和功能--&gt;启动或者关闭 windows 功能--&gt;Telnet 客户端勾选--&gt;确定</p></div> <h4>关闭防火墙或开放端口</h4> <p><strong>方式一：关闭防火墙</strong></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># CentOS6</span>
<span class="token function">service</span> iptables stop

<span class="token comment"># CentOS7</span>
<span class="token comment">#开启防火墙</span>
systemctl start firewalld.service
<span class="token comment">#查看防火墙状态</span>
systemctl status firewalld.service
<span class="token comment">#关闭防火墙</span>
systemctl stop firewalld.service
<span class="token comment">#设置开机启用防火墙 </span>
systemctl <span class="token builtin class-name">enable</span> firewalld.service 
<span class="token comment">#设置开机禁用防火墙 </span>
systemctl disable firewalld.service
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p><strong>方式二：开放端口</strong></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 查看开放的端口号</span>
firewall-cmd --list-all

<span class="token comment"># 设置开放的端口号</span>
firewall-cmd --add-service<span class="token operator">=</span>http <span class="token parameter variable">--permanent</span>
firewall-cmd --add-port<span class="token operator">=</span><span class="token number">3306</span>/tcp <span class="token parameter variable">--permanent</span>

<span class="token comment"># 重启防火墙</span>
firewall-cmd <span class="token parameter variable">--reload</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4>Linux 下修改配置</h4> <ul><li>修改允许远程登陆</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">use</span> mysql<span class="token punctuation">;</span>
<span class="token keyword">select</span> Host<span class="token punctuation">,</span><span class="token keyword">User</span> <span class="token keyword">from</span> <span class="token keyword">user</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">-----------+------------------+</span>
<span class="token operator">|</span> Host      <span class="token operator">|</span> <span class="token keyword">User</span>             <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-----------+------------------+</span>
<span class="token operator">|</span> localhost <span class="token operator">|</span> mysql<span class="token punctuation">.</span>infoschema <span class="token operator">|</span>
<span class="token operator">|</span> localhost <span class="token operator">|</span> mysql<span class="token punctuation">.</span><span class="token keyword">session</span>    <span class="token operator">|</span>
<span class="token operator">|</span> localhost <span class="token operator">|</span> mysql<span class="token punctuation">.</span>sys        <span class="token operator">|</span>
<span class="token operator">|</span> localhost <span class="token operator">|</span> root             <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-----------+------------------+</span>

<span class="token keyword">use</span> mysql<span class="token punctuation">;</span>
<span class="token keyword">update</span> <span class="token keyword">user</span> <span class="token keyword">set</span> host <span class="token operator">=</span> <span class="token string">'%'</span> <span class="token keyword">where</span> <span class="token keyword">user</span> <span class="token operator">=</span><span class="token string">'root'</span><span class="token punctuation">;</span>
flush <span class="token keyword">privileges</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">-----------+------------------+</span>
<span class="token operator">|</span> Host      <span class="token operator">|</span> <span class="token keyword">User</span>             <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-----------+------------------+</span>
<span class="token operator">|</span> <span class="token operator">%</span>         <span class="token operator">|</span> root             <span class="token operator">|</span>
<span class="token operator">|</span> localhost <span class="token operator">|</span> mysql<span class="token punctuation">.</span>infoschema <span class="token operator">|</span>
<span class="token operator">|</span> localhost <span class="token operator">|</span> mysql<span class="token punctuation">.</span><span class="token keyword">session</span>    <span class="token operator">|</span>
<span class="token operator">|</span> localhost <span class="token operator">|</span> mysql<span class="token punctuation">.</span>sys        <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-----------+------------------+</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">提示</p> <ul><li>Host 列指定了允许用户登录所使用的 IP</li> <li><code>%</code> 是个通配符，如果 <code>Host=192.168.1.%</code>，表示只允许 IP 地址前缀为 <code>192.168.1.</code> 的客户端连接。如果 <code>Host=%</code>，表示所有 IP 都有连接权限。</li> <li><strong>注意</strong>：在生产环境下不能为了省事将 host 设置为 <code>%</code> ，这样做会存在安全问题，具体的设置可以根据生产环境的 IP 进行设置。</li></ul></div> <h4>MySQL 8.0 配置新连接报错</h4> <ul><li>错误号码 2058，Plugin caching_sha2_password could not be loaded.</li> <li>原因是 mysql 8.0 默认的密码加密算法与 5.7 版本不同。
<ul><li>MySQL 5.7 默认的身份验证插件是 <strong>mysql_native_password</strong></li> <li>MySQL 8.0 默认的身份验证插件是 <strong>aching_sha2_password</strong></li></ul></li></ul> <p><strong>解决方法一</strong>：升级远程连接工具版本</p> <p><strong>解决方法二</strong>：服务端设置使用 <code>mysql_native_password</code> 身份验证插件</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">#服务端执行该命令</span>
<span class="token keyword">ALTER</span> <span class="token keyword">USER</span> <span class="token string">'root'</span><span class="token variable">@'%'</span> IDENTIFIED <span class="token keyword">WITH</span> mysql_native_password <span class="token keyword">BY</span> <span class="token string">'abc123'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><code>IDENTIFIED WITH mysql_native_password</code>：指定要将用户的身份验证方式更改为使用 MySQL 的原生密码身份验证插件（<code>mysql_native_password</code>），与旧版本的 MySQL 兼容。</p> <h2 id="_4-mysql-密码验证插件和组件"><a href="#_4-mysql-密码验证插件和组件" class="header-anchor">#</a> 4. MySQL 密码验证插件和组件</h2> <p><a href="https://dev.mysql.com/doc/refman/5.7/en/validate-password.html" target="_blank" rel="noopener noreferrer">MySQL 5.7 Reference Manual :: The Password Validation Plugin<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://dev.mysql.com/doc/refman/8.0/en/validate-password.html" target="_blank" rel="noopener noreferrer">MySQL 8.0 Reference Manual :: The Password Validation Component<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="_4-1-mysql8-之前的安全策略"><a href="#_4-1-mysql8-之前的安全策略" class="header-anchor">#</a> 4.1 MySQL8 之前的安全策略</h3> <p>在 MySQL 8.0 之前，MySQL 使用的是 validate_password 插件检测、验证账号密码强度，保障账号的安全性。</p> <p><strong>安装/启用插件方式 1：在参数文件 my.cnf 中添加参数</strong></p> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code>[mysqld]
<span class="token key attr-name">plugin-load-add</span><span class="token punctuation">=</span><span class="token value attr-value">validate_password.so</span>

<span class="token comment"># ON/OFF/FORCE/FORCE_PLUS_PERMANENT: 启动时是否使用该插件(及强制/永久强制使用)</span>
<span class="token key attr-name">validate-password</span><span class="token punctuation">=</span><span class="token value attr-value">FORCE_PLUS_PERMANENT</span>

<span class="token comment"># 密码强度配置</span>
<span class="token key attr-name">validate_password_policy</span><span class="token punctuation">=</span><span class="token value attr-value">MEDIUM</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">提示</p> <ol><li>plugin library 中的 <code>validate_password</code> 文件名的后缀名根据平台不同有所差异。 对于 Unix 和 Unix-like 系统而言，它的文件后缀名是 <code>.so</code>，对于 Windows 系统而言，它的文件后缀名是 <code>.dll</code>。</li> <li>修改参数后必须重启 MySQL 服务才能生效。</li> <li>参数 <code>FORCE_PLUS_PERMANENT</code> 是为了防止插件在 MySQL 运行时的时候被卸载。当你卸载插件时就会报错。</li></ol></div> <p><code>validate-password</code> 此选项控制服务器在启动时如何加载 validate_password 插件。</p> <table><thead><tr><th><strong>模式</strong></th> <th><strong>是否启用密码验证</strong></th> <th><strong>能否动态卸载</strong></th> <th><strong>能否动态修改策略</strong></th> <th><strong>重启后生效</strong></th></tr></thead> <tbody><tr><td><code>OFF</code></td> <td>❌ 否</td> <td>-</td> <td>-</td> <td>否</td></tr> <tr><td><code>ON</code></td> <td>✅ 是</td> <td>✅ 允许</td> <td>✅ 允许</td> <td>否</td></tr> <tr><td><code>FORCE</code></td> <td>✅ 是</td> <td>❌ 禁止</td> <td>✅ 允许</td> <td>否</td></tr> <tr><td><code>FORCE_PLUS_PERMANENT</code></td> <td>✅ 是</td> <td>❌ 禁止</td> <td>❌ 禁止</td> <td>✅ 必须重启</td></tr></tbody></table> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> PLUGIN_NAME<span class="token punctuation">,</span> PLUGIN_LIBRARY<span class="token punctuation">,</span> PLUGIN_STATUS<span class="token punctuation">,</span> LOAD_OPTION
<span class="token keyword">FROM</span> INFORMATION_SCHEMA<span class="token punctuation">.</span>PLUGINS
<span class="token keyword">WHERE</span> PLUGIN_NAME <span class="token operator">=</span> <span class="token string">'validate_password'</span><span class="token punctuation">;</span>

<span class="token operator">+</span><span class="token comment">-------------------+----------------------+---------------+----------------------+</span>
<span class="token operator">|</span> PLUGIN_NAME       <span class="token operator">|</span> PLUGIN_LIBRARY       <span class="token operator">|</span> PLUGIN_STATUS <span class="token operator">|</span> LOAD_OPTION          <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------------------+----------------------+---------------+----------------------+</span>
<span class="token operator">|</span> validate_password <span class="token operator">|</span> validate_password<span class="token punctuation">.</span>so <span class="token operator">|</span> ACTIVE        <span class="token operator">|</span> FORCE_PLUS_PERMANENT <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------------------+----------------------+---------------+----------------------+</span>

mysql<span class="token operator">&gt;</span> UNINSTALL PLUGIN validate_password<span class="token punctuation">;</span>
ERROR <span class="token number">1702</span> <span class="token punctuation">(</span>HY000<span class="token punctuation">)</span>: Plugin <span class="token string">'validate_password'</span> <span class="token operator">is</span> force_plus_permanent <span class="token operator">and</span> can <span class="token operator">not</span> be
unloaded
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p><strong>安装/启用插件方式 2：运行时命令安装（推荐）</strong></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>INSTALL PLUGIN validate_password <span class="token keyword">SONAME</span> <span class="token string">'validate_password.so'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>此方法也会注册到元数据，也就是 <code>mysql.plugin</code> 表中，所以不用担心 MySQL 重启后插件会失效。</p> <p><strong>卸载插件</strong></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>UNINSTALL PLUGIN validate_password<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_4-2-mysql8-的安全策略"><a href="#_4-2-mysql8-的安全策略" class="header-anchor">#</a> 4.2 MySQL8 的安全策略</h3> <h4>validate_password 说明</h4> <p>MySQL 8.0 引入了服务器组件(Components)这个特性，validate_password 插件已用服务器组件重新实现。8.0.25 版本的数据库中，默认自动安装 validate_password 组件。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 安装组件</span>
INSTALL COMPONENT <span class="token string">'file://component_validate_password'</span><span class="token punctuation">;</span>
<span class="token comment"># 卸载组件</span>
UNINSTALL COMPONENT <span class="token string">'file://component_validate_password'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><code>未安装插件前，执行如下两个指令</code>，执行效果</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>mysql<span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> mysql<span class="token punctuation">.</span>component<span class="token punctuation">;</span>
ERROR <span class="token number">1146</span> <span class="token punctuation">(</span><span class="token number">42</span>S02<span class="token punctuation">)</span>: <span class="token keyword">Table</span> <span class="token string">'mysql.component'</span> doesn<span class="token string">'t exist

mysql&gt; show variables like '</span>validate_password<span class="token operator">%</span>'<span class="token punctuation">;</span>
Empty <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.04</span> sec<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><code>安装插件后，执行如下两个指令</code>，执行效果：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>mysql<span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> mysql<span class="token punctuation">.</span>component<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">--------------+--------------------+------------------------------------+</span>
<span class="token operator">|</span> component_id <span class="token operator">|</span> component_group_id <span class="token operator">|</span> component_urn                      <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------------+--------------------+------------------------------------+</span>
<span class="token operator">|</span> <span class="token number">1</span>            <span class="token operator">|</span> <span class="token number">1</span>                  <span class="token operator">|</span> <span class="token keyword">file</span>:<span class="token comment">//component_validate_password |</span>
<span class="token operator">+</span><span class="token comment">--------------+--------------------+------------------------------------+</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-sql line-numbers-mode"><pre class="language-sql"><code>mysql<span class="token operator">&gt;</span> <span class="token keyword">show</span> variables <span class="token operator">like</span> <span class="token string">'validate_password%'</span><span class="token punctuation">;</span>
<span class="token comment"># MySQL 5.7版本</span>
<span class="token operator">+</span><span class="token comment">--------------------------------------+--------+</span>
<span class="token operator">|</span> Variable_name                        <span class="token operator">|</span> <span class="token keyword">Value</span>  <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------------------------------------+--------+</span>
<span class="token operator">|</span> validate_password_check_user_name    <span class="token operator">|</span> <span class="token keyword">OFF</span>    <span class="token operator">|</span>
<span class="token operator">|</span> validate_password_dictionary_file    <span class="token operator">|</span>        <span class="token operator">|</span>
<span class="token operator">|</span> validate_password_length             <span class="token operator">|</span> <span class="token number">8</span>      <span class="token operator">|</span>
<span class="token operator">|</span> validate_password_mixed_case_count   <span class="token operator">|</span> <span class="token number">1</span>      <span class="token operator">|</span>
<span class="token operator">|</span> validate_password_number_count       <span class="token operator">|</span> <span class="token number">1</span>      <span class="token operator">|</span>
<span class="token operator">|</span> validate_password_policy             <span class="token operator">|</span> MEDIUM <span class="token operator">|</span>
<span class="token operator">|</span> validate_password_special_char_count <span class="token operator">|</span> <span class="token number">1</span>      <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------------------------------------+--------+</span>

<span class="token comment"># MySQL 8.0版本</span>
<span class="token operator">+</span><span class="token comment">--------------------------------------+--------+</span>
<span class="token operator">|</span> Variable_name                        <span class="token operator">|</span> <span class="token keyword">Value</span>  <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------------------------------------+--------+</span>
<span class="token operator">|</span> validate_password<span class="token punctuation">.</span>check_user_name    <span class="token operator">|</span> <span class="token keyword">ON</span>     <span class="token operator">|</span>
<span class="token operator">|</span> validate_password<span class="token punctuation">.</span>dictionary_file    <span class="token operator">|</span>        <span class="token operator">|</span>
<span class="token operator">|</span> validate_password<span class="token punctuation">.</span>length             <span class="token operator">|</span> <span class="token number">8</span>      <span class="token operator">|</span>
<span class="token operator">|</span> validate_password<span class="token punctuation">.</span>mixed_case_count   <span class="token operator">|</span> <span class="token number">1</span>      <span class="token operator">|</span>
<span class="token operator">|</span> validate_password<span class="token punctuation">.</span>number_count       <span class="token operator">|</span> <span class="token number">1</span>      <span class="token operator">|</span>
<span class="token operator">|</span> validate_password<span class="token punctuation">.</span>policy             <span class="token operator">|</span> MEDIUM <span class="token operator">|</span>
<span class="token operator">|</span> validate_password<span class="token punctuation">.</span>special_char_count <span class="token operator">|</span> <span class="token number">1</span>      <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------------------------------------+--------+</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><p>关于<code>validate_password</code> 组件对应的系统变量说明：</p> <table><thead><tr><th style="text-align:left;">选项</th> <th style="text-align:left;">默认值</th> <th style="text-align:left;">参数描述</th></tr></thead> <tbody><tr><td style="text-align:left;">validate_password_check_user_name</td> <td style="text-align:left;">ON</td> <td style="text-align:left;">设置为 ON 的时候表示能将密码设置成当前用户名。</td></tr> <tr><td style="text-align:left;">validate_password_dictionary_file</td> <td style="text-align:left;"></td> <td style="text-align:left;">用于检查密码的字典文件的路径名，默认为空</td></tr> <tr><td style="text-align:left;"><code>validate_password_length</code></td> <td style="text-align:left;">8</td> <td style="text-align:left;">密码的最小长度，也就是说密码长度必须大于或等于 8</td></tr> <tr><td style="text-align:left;">validate_password_mixed_case_count</td> <td style="text-align:left;">1</td> <td style="text-align:left;">如果密码策略是中等或更强的，validate_password 要求密码具有的小写和大写字符的最小数量。对于给定的这个值密码必须有那么多小写字符和那么多大写字符。</td></tr> <tr><td style="text-align:left;">validate_password_number_count</td> <td style="text-align:left;">1</td> <td style="text-align:left;">密码必须包含的数字个数</td></tr> <tr><td style="text-align:left;"><code>validate_password_policy</code></td> <td style="text-align:left;">MEDIUM</td> <td style="text-align:left;">密码强度检验等级，可以使用数值 0、1、2 或相应的符号值 LOW、MEDIUM、STRONG 来指定。<br><code>0/LOW</code>：只检查长度。<br><code>1/MEDIUM</code>：检查长度、数字、大小写、特殊字符。<br><code>2/STRONG</code>：检查长度、数字、大小写、特殊字符、字典文件。</td></tr> <tr><td style="text-align:left;">validate_password_special_char_count</td> <td style="text-align:left;">1</td> <td style="text-align:left;">密码必须包含的特殊字符个数</td></tr></tbody></table> <div class="custom-block tip"><p class="custom-block-title">提示</p> <p>组件和插件的默认值可能有所不同。</p> <p>例如，MySQL 5.7 validate_password_check_user_name 的默认值为 OFF。</p></div> <h4>修改安全策略</h4> <p>修改密码验证安全强度</p> <table><thead><tr><th style="text-align:left;">策略</th> <th style="text-align:left;">检查规则</th></tr></thead> <tbody><tr><td style="text-align:left;">0 or LOW</td> <td style="text-align:left;">Length 验证长度（至少 8 位）</td></tr> <tr><td style="text-align:left;">1 or MEDIUM</td> <td style="text-align:left;">Length;<br>numeric, lowercase/uppercase, and special characters<br>验证长度 数字 大小写 特殊字符</td></tr> <tr><td style="text-align:left;">2 or STRONG</td> <td style="text-align:left;">Length; <br>numeric, lowercase/uppercase,<br>and special characters; dictionary file<br>验证长度 数字 大小写 特殊字符 字典文件</td></tr></tbody></table> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># MySQL 5.7</span>
<span class="token keyword">SET</span> <span class="token keyword">GLOBAL</span> validate_password_policy<span class="token operator">=</span>LOW<span class="token punctuation">;</span>
<span class="token keyword">SET</span> <span class="token keyword">GLOBAL</span> validate_password_policy<span class="token operator">=</span>MEDIUM<span class="token punctuation">;</span>
<span class="token keyword">SET</span> <span class="token keyword">GLOBAL</span> validate_password_policy<span class="token operator">=</span>STRONG<span class="token punctuation">;</span>
<span class="token keyword">SET</span> <span class="token keyword">GLOBAL</span> validate_password_policy<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment"># For LOW</span>
<span class="token keyword">SET</span> <span class="token keyword">GLOBAL</span> validate_password_policy<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment"># For MEDIUM</span>
<span class="token keyword">SET</span> <span class="token keyword">GLOBAL</span> validate_password_policy<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment"># For HIGH</span>

<span class="token comment"># MySQL 8.0 以上最后一个下划线改成点</span>
<span class="token keyword">SET</span> <span class="token keyword">GLOBAL</span> validate_password<span class="token punctuation">.</span>policy<span class="token operator">=</span>LOW<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>此外，还可以修改密码中字符的长度</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">set</span> <span class="token keyword">global</span> validate_password_length<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4>密码强度测试</h4> <p>如果创建密码遇到“Your password does not satisfy the current policy requirements“说明密码强度不符合设定的要求。</p> <p>可以通过函数组件去检测密码是否满足条件：0-100。</p> <p>当评估在 100 时就是说明使用上了最基本的规则：大写+小写+特殊字符+数字组成的 8 位以上密码。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>mysql<span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> VALIDATE_PASSWORD_STRENGTH<span class="token punctuation">(</span><span class="token string">'medium'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">--------------------------------------+</span>
<span class="token operator">|</span> VALIDATE_PASSWORD_STRENGTH<span class="token punctuation">(</span><span class="token string">'medium'</span><span class="token punctuation">)</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------------------------------------+</span>
<span class="token operator">|</span> <span class="token number">25</span>                                   <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------------------------------------+</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-sql line-numbers-mode"><pre class="language-sql"><code>mysql<span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> VALIDATE_PASSWORD_STRENGTH<span class="token punctuation">(</span><span class="token string">'K354*45jKd5'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">-------------------------------------------+</span>
<span class="token operator">|</span> VALIDATE_PASSWORD_STRENGTH<span class="token punctuation">(</span><span class="token string">'K354*45jKd5'</span><span class="token punctuation">)</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------------------------------------------+</span>
<span class="token operator">|</span> <span class="token number">100</span>                                       <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------------------------------------------+</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">提示</p> <p>如果没有安装 validate_password 组件或插件的话，那么这个函数永远都返回 0。</p></div> <p>关于密码复杂度对应的密码复杂度策略。如下表格所示：</p> <table><thead><tr><th style="text-align:left;">Password Test</th> <th style="text-align:left;">Return Value</th></tr></thead> <tbody><tr><td style="text-align:left;">Length &lt; 4</td> <td style="text-align:left;">0</td></tr> <tr><td style="text-align:left;">Length ≥ 4 and &lt; validate_password.length</td> <td style="text-align:left;">25</td></tr> <tr><td style="text-align:left;">Satisfies policy 1 (LOW)</td> <td style="text-align:left;">50</td></tr> <tr><td style="text-align:left;">Satisfies policy 2 (MEDIUM)</td> <td style="text-align:left;">75</td></tr> <tr><td style="text-align:left;">Satisfies policy 3 (STRONG)</td> <td style="text-align:left;">100</td></tr></tbody></table> <div class="custom-block tip"><p class="custom-block-title">提示</p> <ul><li>当有字典文件的时候，才会有 75 这个值。</li> <li>当密码符合强度 MEDIUM，但是包含字典里的单词，则会返回强度值 75。</li></ul></div> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 在mysql数据目录下，创建目录，放字典文件</span>
<span class="token function">mkdir</span> /var/lib/mysql/password_dictionary<span class="token punctuation">;</span>
SET GLOBAL <span class="token assign-left variable">validate_password_dictionary_file</span><span class="token operator">=</span><span class="token string">'/path/to/password_dictionary/dictionary.txt'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="_5-字符集的相关操作"><a href="#_5-字符集的相关操作" class="header-anchor">#</a> 5. 字符集的相关操作</h2> <p>MySQL 8.0 版本之前，默认字符集为 <code>latin1</code> ，utf8 字符集指向的是 <code>utf8mb3</code></p> <p>在数据库设计的时候往往会将编码修改为 utf8 字符集。如果遗忘修改默认的编码，就会出现乱码的问题。</p> <p>MySQL 8.0 开始，数据库的默认编码将改为 <code>utf8mb4</code></p> <h3 id="_5-1-修改-mysql-字符集"><a href="#_5-1-修改-mysql-字符集" class="header-anchor">#</a> 5.1 修改 MySQL 字符集</h3> <h4>查看默认使用的字符集</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">show</span> variables <span class="token operator">like</span> <span class="token string">'character%'</span><span class="token punctuation">;</span>
<span class="token comment"># 或者</span>
<span class="token comment"># 会多一个密码组件那边的变量，其他相同</span>
<span class="token keyword">show</span> variables <span class="token operator">like</span> <span class="token string">'%char%'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">show</span> variables <span class="token operator">like</span> <span class="token string">'character%'</span><span class="token punctuation">;</span>

<span class="token comment"># MySQL 8</span>
<span class="token operator">+</span><span class="token comment">--------------------------+--------------------------------+</span>
<span class="token operator">|</span> Variable_name            <span class="token operator">|</span> <span class="token keyword">Value</span>                          <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------------------------+--------------------------------+</span>
<span class="token operator">|</span> character_set_client     <span class="token operator">|</span> utf8mb4                        <span class="token operator">|</span>
<span class="token operator">|</span> character_set_connection <span class="token operator">|</span> utf8mb4                        <span class="token operator">|</span>
<span class="token operator">|</span> character_set_database   <span class="token operator">|</span> utf8mb4                        <span class="token operator">|</span>
<span class="token operator">|</span> character_set_filesystem <span class="token operator">|</span> <span class="token keyword">binary</span>                         <span class="token operator">|</span>
<span class="token operator">|</span> character_set_results    <span class="token operator">|</span> utf8mb4                        <span class="token operator">|</span>
<span class="token operator">|</span> character_set_server     <span class="token operator">|</span> utf8mb4                        <span class="token operator">|</span>
<span class="token operator">|</span> character_set_system     <span class="token operator">|</span> utf8mb3                        <span class="token operator">|</span>
<span class="token operator">|</span> character_sets_dir       <span class="token operator">|</span> <span class="token operator">/</span>usr<span class="token operator">/</span><span class="token keyword">share</span><span class="token operator">/</span>mysql<span class="token operator">-</span><span class="token number">8.0</span><span class="token operator">/</span>charsets<span class="token operator">/</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------------------------+--------------------------------+</span>

<span class="token comment"># MySQL 5.7</span>
<span class="token operator">+</span><span class="token comment">--------------------------+----------------------------+</span>
<span class="token operator">|</span> Variable_name            <span class="token operator">|</span> <span class="token keyword">Value</span>                      <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------------------------+----------------------------+</span>
<span class="token operator">|</span> character_set_client     <span class="token operator">|</span> utf8                       <span class="token operator">|</span>
<span class="token operator">|</span> character_set_connection <span class="token operator">|</span> utf8                       <span class="token operator">|</span>
<span class="token operator">|</span> character_set_database   <span class="token operator">|</span> latin1                     <span class="token operator">|</span>
<span class="token operator">|</span> character_set_filesystem <span class="token operator">|</span> <span class="token keyword">binary</span>                     <span class="token operator">|</span>
<span class="token operator">|</span> character_set_results    <span class="token operator">|</span> utf8                       <span class="token operator">|</span>
<span class="token operator">|</span> character_set_server     <span class="token operator">|</span> latin1                     <span class="token operator">|</span>
<span class="token operator">|</span> character_set_system     <span class="token operator">|</span> utf8                       <span class="token operator">|</span>
<span class="token operator">|</span> character_sets_dir       <span class="token operator">|</span> <span class="token operator">/</span>usr<span class="token operator">/</span><span class="token keyword">share</span><span class="token operator">/</span>mysql<span class="token operator">/</span>charsets<span class="token operator">/</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------------------------+----------------------------+</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><h4>演示 mysql 5.7 字符集问题</h4> <p>MySQL 5.7 默认的服务器字符集是 <code>latin1</code>，不支持中文，保存中文会报错。</p> <p><code>character_set_database</code> <strong>当前</strong>数据库字符集，没有指定的话，和默认的数据库字符集保持一致</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">database</span> dbtest1<span class="token punctuation">;</span>
<span class="token keyword">use</span> dbtest1<span class="token punctuation">;</span>

<span class="token keyword">create</span> <span class="token keyword">table</span> empl<span class="token punctuation">(</span>id <span class="token keyword">int</span><span class="token punctuation">,</span>lname <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> empl<span class="token punctuation">(</span>id<span class="token punctuation">,</span>lname<span class="token punctuation">)</span> <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'Tom'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> empl<span class="token punctuation">(</span>id<span class="token punctuation">,</span>lname<span class="token punctuation">)</span> <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'张三'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ERROR <span class="token number">1366</span> <span class="token punctuation">(</span>HY000<span class="token punctuation">)</span>: Incorrect string <span class="token keyword">value</span>: <span class="token string">'\xE5\xBC\xA0\xE4\xB8\x89'</span> <span class="token keyword">for</span> <span class="token keyword">column</span> <span class="token string">'lname'</span> at <span class="token keyword">row</span> <span class="token number">1</span>

<span class="token comment"># 查看具体数据库和表使用的字符集</span>
<span class="token keyword">show</span> <span class="token keyword">create</span> <span class="token keyword">database</span> xxx<span class="token punctuation">;</span>
<span class="token keyword">show</span> <span class="token keyword">create</span> <span class="token keyword">table</span> xxx<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4>修改字符集</h4> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">vim</span> /etc/my.cnf

<span class="token comment"># 在MySQL 5.7或之前的版本中，在文件最后加上中文字符集配置</span>
<span class="token assign-left variable">character_set_server</span><span class="token operator">=</span>utf8

<span class="token comment"># 重新启动MySQL服务</span>
systemctl restart mysqld
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">提示</p> <p>但是原库、原表的设定不会发生变化，参数修改只对新建的数据库生效。</p></div> <p>&lt;4&gt;修改已有库和表的字符集</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 修改已创建数据库的字符集</span>
<span class="token keyword">alter</span> <span class="token keyword">database</span> dbtest1 <span class="token keyword">character</span> <span class="token keyword">set</span> <span class="token string">'utf8'</span><span class="token punctuation">;</span>

<span class="token comment"># 修改已创建数据表的字符集</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> empl <span class="token keyword">convert</span> <span class="token keyword">to</span> <span class="token keyword">character</span> <span class="token keyword">set</span> <span class="token string">'utf8'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">提示</p> <p>但是原有的数据如果是用非<code>utf8</code>编码的话，数据本身编码不会发生改变。已有数据需要导出或删除，然后重新插入。</p></div> <h3 id="_5-2-各级别的字符集"><a href="#_5-2-各级别的字符集" class="header-anchor">#</a> 5.2 各级别的字符集</h3> <p>MySQL 有 4 个级别的字符集和比较规则，分别是</p> <ul><li>服务器级别</li> <li>数据库级别</li> <li>表级别</li> <li>列级别</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">show</span> variables <span class="token operator">like</span> <span class="token string">'character%'</span><span class="token punctuation">;</span>

<span class="token operator">+</span><span class="token comment">--------------------------+--------------------------------+</span>
<span class="token operator">|</span> Variable_name            <span class="token operator">|</span> <span class="token keyword">Value</span>                          <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------------------------+--------------------------------+</span>
<span class="token operator">|</span> character_set_client     <span class="token operator">|</span> utf8mb4                        <span class="token operator">|</span>
<span class="token operator">|</span> character_set_connection <span class="token operator">|</span> utf8mb4                        <span class="token operator">|</span>
<span class="token operator">|</span> character_set_database   <span class="token operator">|</span> utf8mb4                        <span class="token operator">|</span>
<span class="token operator">|</span> character_set_filesystem <span class="token operator">|</span> <span class="token keyword">binary</span>                         <span class="token operator">|</span>
<span class="token operator">|</span> character_set_results    <span class="token operator">|</span> utf8mb4                        <span class="token operator">|</span>
<span class="token operator">|</span> character_set_server     <span class="token operator">|</span> utf8mb4                        <span class="token operator">|</span>
<span class="token operator">|</span> character_set_system     <span class="token operator">|</span> utf8mb3                        <span class="token operator">|</span>
<span class="token operator">|</span> character_sets_dir       <span class="token operator">|</span> <span class="token operator">/</span>usr<span class="token operator">/</span><span class="token keyword">share</span><span class="token operator">/</span>mysql<span class="token operator">-</span><span class="token number">8.0</span><span class="token operator">/</span>charsets<span class="token operator">/</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------------------------+--------------------------------+</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><ul><li><code>character_set_server</code>：服务器级别的字符集。</li> <li><code>character_set_database</code>：<strong>动态参数，当前</strong>数据库的字符集。</li> <li><code>character_set_client</code>：服务器解码请求时使用的字符集。</li> <li><code>character_set_connection</code>：服务器处理请求时会把请求字符串从 <code>character_set_client</code> 转为 <code>character_set_connection</code>。</li> <li><code>character_set_results</code>：服务器向客户端返回数据时使用的字符集。</li></ul> <h4>服务器级别</h4> <p><code>character_set_server</code> 服务器级别的字符集</p> <p>可以在启动服务器程序时通过启动选项修改</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>mysqld --character-set-server<span class="token operator">=</span>utf8mb4 --collation-server<span class="token operator">=</span>utf8mb4_unicode_ci
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>或者在服务器程序运行过程中使用<code>SET</code>语句修改这两个变量的值</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SET</span> character_set_server <span class="token operator">=</span> <span class="token string">'utf8mb4'</span><span class="token punctuation">,</span> collation_server <span class="token operator">=</span> <span class="token string">'utf8mb4_unicode_ci'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>或者通过配置文件配置</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token punctuation">[</span>server<span class="token punctuation">]</span>
character_set_server<span class="token operator">=</span>gbk <span class="token comment"># 默认字符集</span>
collation_server<span class="token operator">=</span>gbk_chinese_ci <span class="token comment">#对应的默认的比较规则</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4>数据库级别</h4> <p><code>character_set_database</code> 当前数据库的字符集</p> <p>在创建和修改数据库的时候可以指定该数据库的字符集和比较规则，具体语法如下：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">DATABASE</span> 数据库名
    <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token keyword">DEFAULT</span><span class="token punctuation">]</span> <span class="token keyword">CHARACTER</span> <span class="token keyword">SET</span> 字符集名称<span class="token punctuation">]</span>
    <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token keyword">DEFAULT</span><span class="token punctuation">]</span> <span class="token keyword">COLLATE</span> 比较规则名称<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">ALTER</span> <span class="token keyword">DATABASE</span> 数据库名
    <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token keyword">DEFAULT</span><span class="token punctuation">]</span> <span class="token keyword">CHARACTER</span> <span class="token keyword">SET</span> 字符集名称<span class="token punctuation">]</span>
    <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token keyword">DEFAULT</span><span class="token punctuation">]</span> <span class="token keyword">COLLATE</span> 比较规则名称<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><code>DEFAULT</code>可以省略，并不影响语义</p> <div class="custom-block tip"><p class="custom-block-title">提示</p> <ul><li>如果创建数据库时，不指定字符集和比较规则，则默认使用服务器级别的字符集和比较规则，作为数据库的字符集和比较规则。</li> <li>修改数据库字符集必须显示的指明字符集。</li></ul></div> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">DATABASE</span> charset_demo_db
<span class="token keyword">CHARACTER</span> <span class="token keyword">SET</span> gb2312
<span class="token keyword">COLLATE</span> gb2312_chinese_ci<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4>表级别</h4> <p>可以在创建和修改表的时候指定表的字符集和比较规则，语法如下：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> 表名 <span class="token punctuation">(</span>列的信息<span class="token punctuation">)</span>
    <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token keyword">DEFAULT</span><span class="token punctuation">]</span> <span class="token keyword">CHARACTER</span> <span class="token keyword">SET</span> 字符集名称<span class="token punctuation">]</span>
    <span class="token punctuation">[</span><span class="token keyword">COLLATE</span> 比较规则名称<span class="token punctuation">]</span><span class="token punctuation">]</span>

<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> 表名
    <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token keyword">DEFAULT</span><span class="token punctuation">]</span> <span class="token keyword">CHARACTER</span> <span class="token keyword">SET</span> 字符集名称<span class="token punctuation">]</span>
    <span class="token punctuation">[</span><span class="token keyword">COLLATE</span> 比较规则名称<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">提示</p> <p>如果创建和修改表的语句中没有指明字符集和比较规则，将使用该表所在数据库的字符集和比较规则作为该表的字符集和比较规则。</p></div> <h4>列级别</h4>
对于存储字符串的列，同一个表中的不同的列也可以有不同的字符集和比较规则。
<p>在创建和修改列定义的时候可以指定该列的字符集和比较规则，语法如下：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> 表名<span class="token punctuation">(</span>
    列名 字符串类型 <span class="token punctuation">[</span><span class="token keyword">CHARACTER</span> <span class="token keyword">SET</span> 字符集名称<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token keyword">COLLATE</span> 比较规则名称<span class="token punctuation">]</span><span class="token punctuation">,</span>
    其他列<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> 表名 <span class="token keyword">MODIFY</span> 列名 字符串类型 <span class="token punctuation">[</span><span class="token keyword">CHARACTER</span> <span class="token keyword">SET</span> 字符集名称<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token keyword">COLLATE</span> 比较规则名称<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">提示</p> <ul><li>对于某个列来说，如果在创建和修改的语句中没有指明字符集和比较规则，将使用该列所在表的字符集和比较规则作为该列的字符集和比较规则。</li> <li>在转换列的字符集时需要注意，如果转换前列中存储的数据不能用转换后的字符集进行表示会发生错误。比方说原先列使用的字符集是 utf8，列中存储了一些汉字，现在把列的字符集转换为 ascii 的话就会出错，因为 ascii 字符集并不能表示汉字字符。</li></ul></div> <h4>小结</h4> <ul><li>如果<code>创建或修改列</code>时没有显式的指定字符集和比较规则，则该列<code>默认用表的</code>字符集和比较规则；</li> <li>如果<code>创建表时</code>没有显式的指定字符集和比较规则，则该表<code>默认用数据库的</code>字符集和比较规则；</li> <li>如果<code>创建数据库时</code>没有显式的指定字符集和比较规则，则该数据库<code>默认用服务器的</code>字符集和比较规则。</li></ul> <h3 id="_5-3-字符集与比较规则"><a href="#_5-3-字符集与比较规则" class="header-anchor">#</a> 5.3 字符集与比较规则</h3> <h4>utf8 与 utf8mb4</h4> <p><code>utf8</code>字符集表示一个字符需要使用 1～4 个字节，但是我们常用的一些字符使用 1～3 个字节就可以表示了。字符集表示一个字符所用的最大字节长度，在某些方面会影响系统的存储和性能。</p> <p>所以设计 MySQL 的设计者定义了两个概念：</p> <p><code>utf8mb3</code> ：阉割过的 utf8 字符集，只使用 1～3 个字节表示字符。
<code>utf8mb4</code> ：正宗的 utf8 字符集，使用 1～4 个字节表示字符。</p> <div class="custom-block tip"><p class="custom-block-title">提示</p> <p>在 MySQL 中<code>utf8</code>是<code>utf8mb3</code>的别名，当存储需要 4 字节编码的字符时，要使用<code>utf8mb4</code>，比如<code>emoji 表情</code></p></div> <h4>字符集和比较规则</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 查看mysql支持的字符集</span>
<span class="token keyword">SHOW</span> <span class="token keyword">CHARSET</span><span class="token punctuation">;</span>
<span class="token keyword">SHOW</span> <span class="token keyword">CHARACTER</span> <span class="token keyword">SET</span><span class="token punctuation">;</span>

<span class="token comment"># 总共41种仅摘录部分</span>
<span class="token operator">+</span><span class="token comment">----------+---------------------------------+---------------------+--------+</span>
<span class="token operator">|</span> <span class="token keyword">Charset</span>  <span class="token operator">|</span> Description                     <span class="token operator">|</span> <span class="token keyword">Default</span> collation   <span class="token operator">|</span> Maxlen <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------+---------------------------------+---------------------+--------+</span>
<span class="token operator">|</span> latin1   <span class="token operator">|</span> cp1252 West European            <span class="token operator">|</span> latin1_swedish_ci   <span class="token operator">|</span>      <span class="token number">1</span> <span class="token operator">|</span>
<span class="token operator">|</span> latin2   <span class="token operator">|</span> ISO <span class="token number">8859</span><span class="token operator">-</span><span class="token number">2</span> Central European     <span class="token operator">|</span> latin2_general_ci   <span class="token operator">|</span>      <span class="token number">1</span> <span class="token operator">|</span>
<span class="token operator">|</span> ascii    <span class="token operator">|</span> US ASCII                        <span class="token operator">|</span> ascii_general_ci    <span class="token operator">|</span>      <span class="token number">1</span> <span class="token operator">|</span>
<span class="token operator">|</span> gb2312   <span class="token operator">|</span> GB2312 Simplified Chinese       <span class="token operator">|</span> gb2312_chinese_ci   <span class="token operator">|</span>      <span class="token number">2</span> <span class="token operator">|</span>
<span class="token operator">|</span> gbk      <span class="token operator">|</span> GBK Simplified Chinese          <span class="token operator">|</span> gbk_chinese_ci      <span class="token operator">|</span>      <span class="token number">2</span> <span class="token operator">|</span>
<span class="token operator">|</span> utf8     <span class="token operator">|</span> UTF<span class="token operator">-</span><span class="token number">8</span> Unicode                   <span class="token operator">|</span> utf8_general_ci     <span class="token operator">|</span>      <span class="token number">3</span> <span class="token operator">|</span>
<span class="token operator">|</span> utf8mb4  <span class="token operator">|</span> UTF<span class="token operator">-</span><span class="token number">8</span> Unicode                   <span class="token operator">|</span> utf8mb4_general_ci  <span class="token operator">|</span>      <span class="token number">4</span> <span class="token operator">|</span>
<span class="token operator">|</span> utf16    <span class="token operator">|</span> UTF<span class="token operator">-</span><span class="token number">16</span> Unicode                  <span class="token operator">|</span> utf16_general_ci    <span class="token operator">|</span>      <span class="token number">4</span> <span class="token operator">|</span>
<span class="token operator">|</span> utf32    <span class="token operator">|</span> UTF<span class="token operator">-</span><span class="token number">32</span> Unicode                  <span class="token operator">|</span> utf32_general_ci    <span class="token operator">|</span>      <span class="token number">4</span> <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token keyword">binary</span>   <span class="token operator">|</span> <span class="token keyword">Binary</span> pseudo <span class="token keyword">charset</span>           <span class="token operator">|</span> <span class="token keyword">binary</span>              <span class="token operator">|</span>      <span class="token number">1</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------+---------------------------------+---------------------+--------+</span>
<span class="token number">41</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>上表中，MySQL 版本一共支持 41 种字符集，<code>Default collation</code> 列表示这种字符集中一种默认的比较规则，里面包含着该比较规则主要作用于哪种语言，比如 <code>utf8_polish_ci</code> 表示以波兰语的规则比较，<code>utf8_spanish_ci</code> 是以西班牙语的规则比较，<code>utf8_general_ci</code> 是一种通用的比较规则。</p> <p>后缀表示该比较规则是否区分语言中的重音、大小写。具体如下：</p> <table><thead><tr><th style="text-align:left;">后缀</th> <th style="text-align:left;">英文释义</th> <th style="text-align:left;">描述</th></tr></thead> <tbody><tr><td style="text-align:left;"><code>_ai</code></td> <td style="text-align:left;"><code>accent insensitive</code></td> <td style="text-align:left;">不区分重音</td></tr> <tr><td style="text-align:left;"><code>_as</code></td> <td style="text-align:left;"><code>accent sensitive</code></td> <td style="text-align:left;">区分重音</td></tr> <tr><td style="text-align:left;"><code>_ci</code></td> <td style="text-align:left;"><code>case insensitive</code></td> <td style="text-align:left;">不区分大小写</td></tr> <tr><td style="text-align:left;"><code>_cs</code></td> <td style="text-align:left;"><code>case sensitive</code></td> <td style="text-align:left;">区分大小写</td></tr> <tr><td style="text-align:left;"><code>_bin</code></td> <td style="text-align:left;"><code>binary</code></td> <td style="text-align:left;">以二进制方式比较</td></tr></tbody></table> <p>最后一列<code>Maxlen</code> ，它代表该种字符集表示一个字符最多需要几个字节。</p> <p>常见的字符集和对应的 Maxlen</p> <table><thead><tr><th style="text-align:left;">字符集名称</th> <th style="text-align:left;">Maxlen</th></tr></thead> <tbody><tr><td style="text-align:left;"><code>ascii</code></td> <td style="text-align:left;">1</td></tr> <tr><td style="text-align:left;"><code>latin1</code></td> <td style="text-align:left;">1</td></tr> <tr><td style="text-align:left;"><code>gb2312</code></td> <td style="text-align:left;">2</td></tr> <tr><td style="text-align:left;"><code>gbk</code></td> <td style="text-align:left;">2</td></tr> <tr><td style="text-align:left;"><code>utf8</code></td> <td style="text-align:left;">3</td></tr> <tr><td style="text-align:left;"><code>utf8mb4</code></td> <td style="text-align:left;">4</td></tr></tbody></table> <h4>常用操作</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">#查看GBK字符集的比较规则</span>
<span class="token keyword">SHOW</span> COLLATION <span class="token operator">LIKE</span> <span class="token string">'gbk%'</span><span class="token punctuation">;</span>
<span class="token comment">#查看UTF-8字符集的比较规则</span>
<span class="token keyword">SHOW</span> COLLATION <span class="token operator">LIKE</span> <span class="token string">'utf8%'</span><span class="token punctuation">;</span>

<span class="token comment">#查看服务器的字符集和比较规则</span>
<span class="token keyword">SHOW</span> VARIABLES <span class="token operator">LIKE</span> <span class="token string">'%_server'</span><span class="token punctuation">;</span>
<span class="token comment">#查看数据库的字符集和比较规则</span>
<span class="token keyword">SHOW</span> VARIABLES <span class="token operator">LIKE</span> <span class="token string">'%_database'</span><span class="token punctuation">;</span>

<span class="token comment">#查看具体数据库的字符集</span>
<span class="token keyword">SHOW</span> <span class="token keyword">CREATE</span> <span class="token keyword">DATABASE</span> dbtest1<span class="token punctuation">;</span>
<span class="token comment">#修改具体数据库的字符集</span>
<span class="token keyword">ALTER</span> <span class="token keyword">DATABASE</span> dbtest1 <span class="token keyword">DEFAULT</span> <span class="token keyword">CHARACTER</span> <span class="token keyword">SET</span> <span class="token string">'utf8'</span> <span class="token keyword">COLLATE</span> <span class="token string">'utf8_general_ci'</span><span class="token punctuation">;</span>

<span class="token comment">#查看表的字符集</span>
<span class="token keyword">show</span> <span class="token keyword">create</span> <span class="token keyword">table</span> employees<span class="token punctuation">;</span>
<span class="token comment">#查看表的比较规则</span>
<span class="token keyword">show</span> <span class="token keyword">table</span> <span class="token keyword">status</span> <span class="token keyword">from</span> atguigudb <span class="token operator">like</span> <span class="token string">'employees'</span><span class="token punctuation">;</span>
<span class="token comment">#修改表的字符集和比较规则</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> emp1 <span class="token keyword">DEFAULT</span> <span class="token keyword">CHARACTER</span> <span class="token keyword">SET</span> <span class="token string">'utf8'</span> <span class="token keyword">COLLATE</span> <span class="token string">'utf8_general_ci'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">提示</p> <ol><li>utf8_unicode_ci 和 utf8_general_ci 对于中、英文来说没有实质的差别。
<ul><li>utf8_general_ci 较对速度快，但准确度稍差。</li> <li>utf8_unicode_ci 准确度高，但校对速度稍慢。</li></ul></li> <li>一般情况，用 utf8_general_ci 就够了，但是如果应用有法语、德语或者俄语，请一定要使用 utf8_unicode_ci。</li> <li>修改数据库的默认字符集和比较规则之后，原来已经创建的表的字符集和比较规则并不会改变。</li> <li>如果有需要，必须单独对这些表进行修改。</li></ol></div> <h3 id="_5-4-请求到响应过程中字符集的变化"><a href="#_5-4-请求到响应过程中字符集的变化" class="header-anchor">#</a> 5.4 请求到响应过程中字符集的变化</h3> <p>客户端发往服务器的请求本质上是一个<code>字符串</code>，服务器向客户端返回的结果本质上也是一个字符串。而字符串其实是使用某种字符集编码的<code>二进制数据</code>。从发送请求到返回结果这个过程伴随着<code>多次字符集的转换</code>。</p> <p><img src="/assets/img/image-20230826100036241.07365f6d.webp" alt="image-20230826100036241"></p> <table><thead><tr><th style="text-align:left;">系统变量</th> <th style="text-align:left;">描述</th></tr></thead> <tbody><tr><td style="text-align:left;"><code>character_set_client</code></td> <td style="text-align:left;">服务器解码请求时使用的字符集</td></tr> <tr><td style="text-align:left;"><code>character_set_connection</code></td> <td style="text-align:left;">服务器处理请求时会把请求字符串从<br><code>character_set_client</code>转为<code>character_set_connection</code></td></tr> <tr><td style="text-align:left;"><code>character_set_results</code></td> <td style="text-align:left;">服务器向客户端返回数据时使用的字符集</td></tr></tbody></table> <h4>一个请求案例</h4> <p><strong>分析请求从发送到结果返回过程中字符集的变化</strong></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 假设此时，设置character_set_connection为gbk</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">set</span> character_set_connection <span class="token operator">=</span> gbk<span class="token punctuation">;</span>
<span class="token comment"># 客户端发送的请求</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> t <span class="token keyword">WHERE</span> s <span class="token operator">=</span> <span class="token string">'我'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h5>客户端发送请求所使用的字符集</h5> <p>一般情况下客户端所使用的字符集和当前操作系统一致，不同操作系统使用的字符集可能不一样，类<code>Unix</code>系统使用的是<code>utf8</code>,<code>Windows</code>使用<code>gbk</code></p> <p>当客户端使用的是<code>utf8</code>字符集，字符<code>我</code>在发送给服务器的请求中的字节形式就是：<code>0xE68891</code></p> <div class="custom-block tip"><p class="custom-block-title">提示</p> <p>如果你使用的是可视化工具，比如 navicat 之类的，这些工具可能会使用自定义的字符集来编码发送到服务器的字符串，而不采用操作系统默认的字符集。</p></div> <h5>服务器接收到客户端发送来的请求</h5> <p>其实是一串二进制的字节，它会认为这串字节采用的字符集是<code>character_set_client</code> ，然后把这串字节转换为<code>character_set_connection</code>字符集编码的字符。</p> <p>由于我的计算机上 <code>character_set_client</code> 的值是 <code>utf8</code> ，首先会按照 <code>utf8</code> 字符集对字节串 <code>0xE68891</code> 进行解码，得到的字符串就是'我' ，然后按照<code>character_set_connection</code> 代表的字符集，也就是 gbk 进行编码，得到的结果就是字节串 <code>0xCED2</code> 。</p> <h5>查找记录</h5> <p>因为表 <code>t</code> 的列 <code>col</code> 采用的是 <code>gbk</code> 字符集，与 <code>character_set_connection</code> 一致，所以直接到列中找字节值为 <code>0xCED2</code> 的记录，最后找到了一条记录。</p> <div class="custom-block tip"><p class="custom-block-title">提示</p> <p>如果某个列使用的字符集和 character_set_connection 代表的字符集不一致的话，还需要进行一次字符集转换。</p></div> <h5>服务端返回数据</h5> <p>上一步骤找到的记录中的<code>col</code> 列其实是一个字节串<code>0xCED2</code> ， <code>col</code> 列是采用 <code>gbk</code> 进行编码的，所以首先会将这个字节串使用 <code>gbk</code> 进行解码，得到字符串<code>'我'</code> ，然后再把这个字符串使用 <code>character_set_results</code> 代表的字符集，也就是 <code>utf8</code> 进行编码，得到了新的字节串：<code>0xE68891</code> ，然后发送给客户端。</p> <h5>客户端接受数据</h5> <p>由于客户端是用的字符集是<code>utf8</code> ，所以可以顺利的将 <code>0xE68891</code> 解释成字符我，从而显示到我们的显示器上，所以我们人类也读懂了返回的结果。</p> <h5>总结显示图</h5> <p><img src="/assets/img/image-20230826103318707.ed959547.webp" alt="image-20230826103318707"></p> <h4>经验</h4> <p>开发中通常把 <code>character_set_client</code>、<code>character_set_connection</code>、<code>character_set_results</code> 这三个系统变量设置成和客户端使用的字符集一致，减少无谓的字符集转换。</p> <ul><li>在运行时设置</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 统一设置三个系统变量</span>
<span class="token keyword">SET</span> NAMES 字符集名<span class="token punctuation">;</span>
<span class="token keyword">SET</span> NAMES utf8<span class="token punctuation">;</span>

<span class="token comment"># 相当于</span>
<span class="token keyword">SET</span> character_set_client <span class="token operator">=</span> 字符集名<span class="token punctuation">;</span>
<span class="token keyword">SET</span> character_set_connection <span class="token operator">=</span> 字符集名<span class="token punctuation">;</span>
<span class="token keyword">SET</span> character_set_results <span class="token operator">=</span> 字符集名<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ul><li>在配置文件中设置</li></ul> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code>[client]
<span class="token key attr-name">default-character-set</span><span class="token punctuation">=</span><span class="token value attr-value">utf8</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="_6-sql-大小写规范"><a href="#_6-sql-大小写规范" class="header-anchor">#</a> 6. SQL 大小写规范</h2> <h3 id="_6-1-windows-和-linux-平台区别"><a href="#_6-1-windows-和-linux-平台区别" class="header-anchor">#</a> 6.1 Windows 和 Linux 平台区别</h3> <p>在 SQL 中，关键字和函数名是不区分字母大小写的，如 SELECT、WHERE 等关键字，以及 ABS、MOD、MAX 等函数名。</p> <p><code>windows系统默认大小写不敏感</code>，但是 <code>linux系统是大小写敏感的</code>。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SHOW</span> VARIABLES <span class="token operator">LIKE</span> <span class="token string">'%lower_case_table_names%'</span>

<span class="token comment"># Windows</span>
<span class="token operator">+</span><span class="token comment">------------------------+-------+</span>
<span class="token operator">|</span> Variable_name          <span class="token operator">|</span> <span class="token keyword">Value</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------------------------+-------+</span>
<span class="token operator">|</span> lower_case_table_names <span class="token operator">|</span> <span class="token number">1</span>     <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------------------------+-------+</span>

<span class="token comment"># Linux</span>
<span class="token operator">+</span><span class="token comment">------------------------+-------+</span>
<span class="token operator">|</span> Variable_name          <span class="token operator">|</span> <span class="token keyword">Value</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------------------------+-------+</span>
<span class="token operator">|</span> lower_case_table_names <span class="token operator">|</span> <span class="token number">0</span>     <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------------------------+-------+</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p><code>lower_case_table_names</code>参数值的设置：</p> <ul><li>默认为 0，大小写敏感。</li> <li>设置 1，大小写不敏感。创建的表，数据库都是以小写形式存放在磁盘上，对于 sql 语句都是转换为小写对表和数据库进行查找。</li> <li>设置 2，创建的表和数据库依据语句上格式存放，凡是查找都是转换为小写进行。</li></ul> <div class="custom-block tip"><p class="custom-block-title">在 Linux 环境下 MySQL 大小写规则</p> <ol><li>数据库名、表名、表的别名、变量名是严格区分大小写的；</li> <li>关键字、函数名称在 SQL 中不区分大小写；</li> <li>列名（或字段名）与列的别名（或字段别名）在所有的情况下均是忽略大小写的</li></ol> <p><strong>MySQL 在 Windows 的环境下全部不区分大小写</strong></p></div> <h3 id="_6-2-linux-下大小写规则设置"><a href="#_6-2-linux-下大小写规则设置" class="header-anchor">#</a> 6.2 Linux 下大小写规则设置</h3> <p>可以通过配置文件<code>/etc/my.cnf</code> 设置大小写规则为大小写不敏感：</p> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code>[mysqld]
<span class="token key attr-name">lower_case_table_names</span><span class="token punctuation">=</span><span class="token value attr-value">1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>注意：设置大小写不敏感后，在重启数据库实例之前就需要将原来的数据库和表转换为小写，否则将找不到数据库名。</strong></p> <p>从 MySQL 8.0.11 开始，禁止在重新启动 MySQL 服务时将 <code>lower_case_table_names</code> 设置成不同于初始化 MySQL 服务时设置的 <code>lower_case_table_names</code> 值。因为数据字典表字段使用的排序规则基于服务器初始化时定义的<code>lower_case_table_names</code>设置，而重新启动具有不同设置的服务器将引入关于标识符如何排序和比较的不一致性。</p> <div class="custom-block tip"><p class="custom-block-title">提示</p> <ul><li>数据字典表是数据库中存储关于数据库结构、对象、权限等元数据(metadata)的特殊表。</li> <li>在数据库中，标识符(identifier)指的是用于标识数据库对象（如表、列、索引等）的名称</li></ul></div> <p>如果非要将 MySQL 8 设置为大小写不敏感，需重新初始化数据库，具体步骤为：</p> <ol><li>停止 MySQL 服务</li> <li>删除数据目录，即删除 <code>/var/lib/mysql</code> 目录</li> <li>在 MySQL 配置文件 <code>/etc/my.cnf</code> 中添加 <code>lower_case_table_names=1</code></li> <li>启动 MySQL  服务</li></ol> <h3 id="_6-3-sql-编写规范建议"><a href="#_6-3-sql-编写规范建议" class="header-anchor">#</a> 6.3 SQL 编写规范建议</h3> <div class="custom-block tip"><p class="custom-block-title">SQL 编写规范建议</p> <ul><li>关键字和函数名称全部大写；</li> <li>数据库名、表名、表别名、字段名、字段别名等全部小写；</li> <li>SQL 语句必须以分号结尾。</li></ul></div> <p>数据库名、表名和表的别名在 Linux MySQL 环境下是区分大小写的，因此建议你统一这些字段的命名规则，比如全部采用小写的方式。</p> <p>虽然关键字和函数名称在 SQL 中不区分大小写，也就是如果小写的话同样可以执行。但是同时将关键词和函数名称全部大写，以便于区分。</p> <h2 id="_7-sql-mode-的合理设置"><a href="#_7-sql-mode-的合理设置" class="header-anchor">#</a> 7. sql_mode 的合理设置</h2> <h3 id="_7-1-介绍"><a href="#_7-1-介绍" class="header-anchor">#</a> 7.1 介绍</h3> <p>sql_mode 会影响 MySQL 支持的 SQL 语法以及它执行的<code>数据验证检查</code>。通过设置 sql_mode，可以完成不同严格程度的数据校验，有效地保障数据准确性。</p> <p>MySQL 服务器可以在不同的 SQL 模式下运行，并且可以针对不同的客户端以不同的方式应用这些模式，具体取决于 sql_mode 系统变量的值。</p> <p>MySQL 5.6 和 MySQL 5.7 默认的 sql_mode 模式参数是不一样的：</p> <ul><li>MySQL 5.6 的 mode 默认值为空（即：<code>NO_ENGINE_SUBSTITUTION</code>），其实表示的是一个空值，相当于没有什么模式设置，可以理解为<code>宽松模式</code>。在这种设置下是可以允许一些非法操作的，比如允许一些非法数据的插入。</li> <li>MySQL 5.7 的 mode 是<code>STRICT_TRANS_TABLES</code>，也就是<code>严格模式</code>。用于进行数据的严格校验，错误数据不能插入，报 error，并且事务回滚。</li></ul> <h3 id="_7-2-宽松模式-vs-严格模式"><a href="#_7-2-宽松模式-vs-严格模式" class="header-anchor">#</a> 7.2 宽松模式 vs 严格模式</h3> <h4>宽松模式</h4> <p>如果设置的是宽松模式，那么我们在插入数据的时候，即便是给了一个错误的数据，也可能会被接受，并且不报错。</p> <p><strong>举例</strong>：我在创建一个表时，该表中有一个字段为 name，给 name 设置的字段类型时 char(10) ，如果我在插入数据的时候，其中 name 这个字段对应的有一条数据的长度超过了 10 ，例如'1234567890abc'，超过了设定的字段长度 10，那么不会报错，并且取前 10 个字符存上，也就是说这个数据被存为了'1234567890'，而'abc'就没有了。但是，我们给的这条数据是错误的，因为超过了字段长度，但是并没有报错，并且 mysql 自行处理并接受了，这就是宽松模式的效果。</p> <p><strong>应用场景</strong>：通过设置 sql mode 为宽松模式，来保证大多数 sql 符合标准的 sql 语法，这样应用在不同数据库之间进行迁移时，则不需要对业务 sql 进行较大的修改。</p> <h4>严格模式</h4> <p>出现上面宽松模式的错误，应该报错才对，所以 MySQL 5.7 版本就将 sql_mode 默认值改为了严格模式。所以在<code>生产等环境</code>中，我们必须采用的是严格模式，进而<code>开发、测试环境</code>的数据库也必须要设置，这样在开发测试阶段就可以发现问题。并且我们即便是用的 MySQL 5.6，也应该自行将其改为严格模式。</p> <p><strong>开发经验</strong>：MySQL 等数据库总想把关于数据的所有操作都自己包揽下来，包括数据的校验，其实开发中，我们应该在自己<code>开发的项目程序级别将这些校验给做了</code>，虽然写项目的时候麻烦了一些步骤，但是这样做之后，我们在进行数据库迁移或者在项目的迁移时，就会方便很多。</p> <p><strong>改为严格模式后可能会存在的问题</strong>：若设置模式中包含了<code>NO_ZERO_DATE</code> ，那么 MySQL 数据库不允许插入零日期，插入零日期会抛出错误而不是警告。例如，表中含字段 TIMESTAMP 列（如果未声明为 NULL 或显示 DEFAULT 子句）将自动分配 DEFAULT '0000-00-00 00:00:00'（零时间戳），这显然是不满足 sql_mode 中的 NO_ZERO_DATE 而报错。</p> <h3 id="_7-3-宽松模式再举例"><a href="#_7-3-宽松模式再举例" class="header-anchor">#</a> 7.3 宽松模式再举例</h3> <p><strong>宽松模式举例 1</strong></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> employees <span class="token keyword">group</span> <span class="token keyword">by</span> department_id <span class="token keyword">limit</span> <span class="token number">10</span><span class="token punctuation">;</span>

<span class="token keyword">set</span> sql_mode <span class="token operator">=</span> ONLY_FULL_GROUP_BY<span class="token punctuation">;</span>
<span class="token comment"># 查询失败</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> employees <span class="token keyword">group</span> <span class="token keyword">by</span> department_id <span class="token keyword">limit</span> <span class="token number">10</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>宽松模式举例 2</strong></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">set</span> sql_mode <span class="token operator">=</span> STRICT_TRANS_TABLES<span class="token punctuation">;</span>
<span class="token comment"># 插入数据严格检查，不符合数据类型且无法转换的类型会导致插入失败</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_7-4-模式查看和设置"><a href="#_7-4-模式查看和设置" class="header-anchor">#</a> 7.4 模式查看和设置</h3> <p><strong>查看当前的 sql_mode</strong></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> @<span class="token variable">@session.sql_mode</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> @<span class="token variable">@global.sql_mode</span><span class="token punctuation">;</span>
<span class="token comment">#或者</span>
<span class="token keyword">show</span> variables <span class="token operator">like</span> <span class="token string">'sql_mode'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>临时设置方式：设置当前窗口中设置 sql_mode</strong></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SET</span> <span class="token keyword">GLOBAL</span> sql_mode <span class="token operator">=</span> <span class="token string">'modes...'</span><span class="token punctuation">;</span> <span class="token comment">#全局</span>
<span class="token keyword">SET</span> <span class="token keyword">SESSION</span> sql_mode <span class="token operator">=</span> <span class="token string">'modes...'</span><span class="token punctuation">;</span> <span class="token comment">#当前会话</span>

<span class="token comment">-- 改为严格模式。此方法只在当前会话中生效，关闭当前会话就不生效了。</span>
<span class="token keyword">set</span> <span class="token keyword">SESSION</span> sql_mode<span class="token operator">=</span><span class="token string">'STRICT_TRANS_TABLES'</span><span class="token punctuation">;</span>

<span class="token comment">-- 改为严格模式。此方法在当前服务中生效，重启MySQL服务后失效。</span>
<span class="token keyword">set</span> <span class="token keyword">GLOBAL</span> sql_mode<span class="token operator">=</span><span class="token string">'STRICT_TRANS_TABLES'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><strong>永久设置方式：在 <code>/etc/my.cnf</code> 中配置 sql_mode</strong></p> <p>在 <code>my.cnf</code> 文件（windows 系统是 <code>my.ini</code> 文件），新增以下内容，然后<code>重启MySQL</code></p> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code>[mysqld]
<span class="token key attr-name">sql_mode</span><span class="token punctuation">=</span><span class="token value attr-value">ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">提示</p> <p>当然生产环境上是禁止重启 MySQL 服务的，所以采用<code>临时设置方式 + 永久设置</code>方式来解决线上的问题，那么即便是有一天真的重启了 MySQL 服务，也会永久生效了。</p></div> <h3 id="_7-5-sql-mode-常用值"><a href="#_7-5-sql-mode-常用值" class="header-anchor">#</a> 7.5 sql_mode 常用值</h3> <p><a href="https://dev.mysql.com/doc/refman/5.7/en/sql-mode.html" target="_blank" rel="noopener noreferrer">MySQL 5.7 Reference Manual :: Server SQL Modes<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://dev.mysql.com/doc/refman/8.0/en/sql-mode.html" target="_blank" rel="noopener noreferrer">MySQL 8.0 Reference Manual :: Server SQL Modes<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <table><thead><tr><th style="text-align:left;">sql_mode</th> <th style="text-align:left;">解释</th></tr></thead> <tbody><tr><td style="text-align:left;">ONLY_FULL_GROUP_BY</td> <td style="text-align:left;">对于 GROUP BY 聚合操作，如果在 SELECT 中的列，没有在 GROUP BY 中出现，那么这个 SQL 是不合法的。</td></tr> <tr><td style="text-align:left;">NO_AUTO_VALUE_ON_ZERO</td> <td style="text-align:left;">该值影响自增长列的插入。默认设置下，插入 0 或 NULL 代表生成下一个自增长值。如果用户希望插入的值为 0，而该列又是自增长列，则使用该模式</td></tr> <tr><td style="text-align:left;"><strong>STRICT_TRANS_TABLES</strong></td> <td style="text-align:left;">在该模式下，如果一个值不能插入到一个事务表中，则中断当前操作，对非事务表不做限制。<br><strong>数据类型检查</strong> 检查插入或更新的数据是否符合列的数据类型定义。<br>不会自动将插入或更新的数据转换为合适的类型。例如，如果插入字符串到整数列中，MySQL 将抛出错误，而不是尝试进行隐式转换。</td></tr> <tr><td style="text-align:left;">NO_ZERO_IN_DATE</td> <td style="text-align:left;">不允许日期和月份为零</td></tr> <tr><td style="text-align:left;">NO_ZERO_DATE</td> <td style="text-align:left;">不允许插入零日期，插入零日期会抛出错误而非警告。</td></tr> <tr><td style="text-align:left;">ERROR_FOR_DIVISION_BY_ZERO</td> <td style="text-align:left;">在 INSERT 或者 UPDATE 过程中，如果数据被零除，则会产生错误而非警告。如果设置该模式那么数据被零除时 MySQL 会返回 NULL</td></tr> <tr><td style="text-align:left;">NO_AUTO_CREATE_USER</td> <td style="text-align:left;">禁止 GRANT 创建密码为空的用户。<br>即将弃用该模式，GRANT 不再用于创建用户</td></tr> <tr><td style="text-align:left;">NO_ENGINE_SUBSTITUTION</td> <td style="text-align:left;">如果需要的存储引擎被禁用或者未编译，那么抛出错误。不设置此值时，用默认的存储引擎替代，并抛出一个异常</td></tr></tbody></table> <table><thead><tr><th style="text-align:left;">sql_mode</th> <th style="text-align:left;">解释</th></tr></thead> <tbody><tr><td style="text-align:left;">PIPES_AS_CONCAT</td> <td style="text-align:left;">将 <code>||</code> 视为字符串的连接操作符而非或运算符，这和 Oracle 数据库是一样的，也和字符串拼接函数 Concat 相类似</td></tr> <tr><td style="text-align:left;">ANSI_QUOTES</td> <td style="text-align:left;">改变了标识符（如表名、列名）的引号解析方式<br>默认情况下，MySQL 使用反引号符号来引用标识符<br>启用 <code>ANSI_QUOTES</code> 模式后，MySQL 将支持使用双引号<code>&quot;</code>来引用标识符</td></tr></tbody></table></div></div> <!----> <div class="page-edit"><!----> <!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2025/06/18, 23:09:08</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-0/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">第00章_写在前面</div></a> <a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-2/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">第02章_MySQL 的数据目录</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-0/" class="prev">第00章_写在前面</a></span> <span class="next"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-2/">第02章_MySQL 的数据目录</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/java-basic/jdbc-core/"><div>
            JDBC 核心技术(JDK21版)
            <!----></div></a> <span class="date">09-24</span></dt></dl><dl><dd>02</dd> <dt><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-0/"><div>
            第00章_写在前面
            <!----></div></a> <span class="date">05-14</span></dt></dl><dl><dd>03</dd> <dt><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-2/"><div>
            第02章_MySQL 的数据目录
            <!----></div></a> <span class="date">05-14</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:1214025526@qq.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/coderofmutou" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://gitee.com/ismutou" title="Gitee" target="_blank" class="iconfont icon-gitee"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2024-2025
    <span>bombax | <a href="https://github.com/coderofmutou/coderofmutou.github.io/blob/main/LICENSE" target="_blank">MIT License</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.ca5c989c.js" defer></script><script src="/assets/js/3.f2884e99.js" defer></script><script src="/assets/js/2.81e8b964.js" defer></script><script src="/assets/js/72.4f2efca4.js" defer></script>
  </body>
</html>
