<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>第03章_用户与权限管理 | Bombax&#39;s Knowledge Document Notes</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/img/favicon.ico">
    <meta name="description" content="技术知识学习笔记">
    <meta name="keywords" content="技术知识学习笔记">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/assets/css/0.styles.a5ee4d2c.css" as="style"><link rel="preload" href="/assets/js/app.ca5c989c.js" as="script"><link rel="preload" href="/assets/js/3.f2884e99.js" as="script"><link rel="preload" href="/assets/js/2.81e8b964.js" as="script"><link rel="preload" href="/assets/js/114.6031c0db.js" as="script"><link rel="prefetch" href="/assets/js/1.f754fd0b.js"><link rel="prefetch" href="/assets/js/10.bde6e567.js"><link rel="prefetch" href="/assets/js/100.000718ad.js"><link rel="prefetch" href="/assets/js/101.863f022a.js"><link rel="prefetch" href="/assets/js/102.7b45f43b.js"><link rel="prefetch" href="/assets/js/103.ba5681a8.js"><link rel="prefetch" href="/assets/js/104.e35b7e87.js"><link rel="prefetch" href="/assets/js/105.15a150cd.js"><link rel="prefetch" href="/assets/js/106.aea81b3b.js"><link rel="prefetch" href="/assets/js/107.4f4dec09.js"><link rel="prefetch" href="/assets/js/108.0079fda6.js"><link rel="prefetch" href="/assets/js/109.7a5059de.js"><link rel="prefetch" href="/assets/js/11.fa1b0bc7.js"><link rel="prefetch" href="/assets/js/110.85007649.js"><link rel="prefetch" href="/assets/js/111.dbec93e3.js"><link rel="prefetch" href="/assets/js/112.f17a38c0.js"><link rel="prefetch" href="/assets/js/113.6478506e.js"><link rel="prefetch" href="/assets/js/115.d7094af2.js"><link rel="prefetch" href="/assets/js/116.316a6234.js"><link rel="prefetch" href="/assets/js/117.1336f5e0.js"><link rel="prefetch" href="/assets/js/118.4b882789.js"><link rel="prefetch" href="/assets/js/119.503f83be.js"><link rel="prefetch" href="/assets/js/12.04b9b957.js"><link rel="prefetch" href="/assets/js/120.af7d94d8.js"><link rel="prefetch" href="/assets/js/121.5cd3597d.js"><link rel="prefetch" href="/assets/js/122.82f45642.js"><link rel="prefetch" href="/assets/js/123.f2ba0b19.js"><link rel="prefetch" href="/assets/js/13.680e50fd.js"><link rel="prefetch" href="/assets/js/14.dfca4100.js"><link rel="prefetch" href="/assets/js/15.01784967.js"><link rel="prefetch" href="/assets/js/16.81c1d5ab.js"><link rel="prefetch" href="/assets/js/17.9a472859.js"><link rel="prefetch" href="/assets/js/18.5366cb68.js"><link rel="prefetch" href="/assets/js/19.b1b74ef9.js"><link rel="prefetch" href="/assets/js/20.e938fa21.js"><link rel="prefetch" href="/assets/js/21.3e38db33.js"><link rel="prefetch" href="/assets/js/22.f9d18654.js"><link rel="prefetch" href="/assets/js/23.8eea4b67.js"><link rel="prefetch" href="/assets/js/24.6fe732dc.js"><link rel="prefetch" href="/assets/js/25.b1885cb6.js"><link rel="prefetch" href="/assets/js/26.936ee89a.js"><link rel="prefetch" href="/assets/js/27.fb3beb63.js"><link rel="prefetch" href="/assets/js/28.af721a74.js"><link rel="prefetch" href="/assets/js/29.427b7eae.js"><link rel="prefetch" href="/assets/js/30.2af5e34e.js"><link rel="prefetch" href="/assets/js/31.60102330.js"><link rel="prefetch" href="/assets/js/32.746872da.js"><link rel="prefetch" href="/assets/js/33.9466d03b.js"><link rel="prefetch" href="/assets/js/34.c7f7b0ef.js"><link rel="prefetch" href="/assets/js/35.53799eb8.js"><link rel="prefetch" href="/assets/js/36.e8875fc1.js"><link rel="prefetch" href="/assets/js/37.c386b2c5.js"><link rel="prefetch" href="/assets/js/38.ee46082f.js"><link rel="prefetch" href="/assets/js/39.11d092ff.js"><link rel="prefetch" href="/assets/js/4.920d0610.js"><link rel="prefetch" href="/assets/js/40.4ee40bcf.js"><link rel="prefetch" href="/assets/js/41.81c3174c.js"><link rel="prefetch" href="/assets/js/42.18f42b9d.js"><link rel="prefetch" href="/assets/js/43.7426d1ac.js"><link rel="prefetch" href="/assets/js/44.d5baff75.js"><link rel="prefetch" href="/assets/js/45.7b25c5ca.js"><link rel="prefetch" href="/assets/js/46.dff72ed3.js"><link rel="prefetch" href="/assets/js/47.15531a4f.js"><link rel="prefetch" href="/assets/js/48.48bbc098.js"><link rel="prefetch" href="/assets/js/49.49acd468.js"><link rel="prefetch" href="/assets/js/5.847584a2.js"><link rel="prefetch" href="/assets/js/50.e26ee1bf.js"><link rel="prefetch" href="/assets/js/51.6728bddb.js"><link rel="prefetch" href="/assets/js/52.c238e7bf.js"><link rel="prefetch" href="/assets/js/53.025903f6.js"><link rel="prefetch" href="/assets/js/54.05baf03a.js"><link rel="prefetch" href="/assets/js/55.b6fc3e0a.js"><link rel="prefetch" href="/assets/js/56.8e5ef1fc.js"><link rel="prefetch" href="/assets/js/57.db41b6fb.js"><link rel="prefetch" href="/assets/js/58.b4cb51f8.js"><link rel="prefetch" href="/assets/js/59.423b27e1.js"><link rel="prefetch" href="/assets/js/6.b384c550.js"><link rel="prefetch" href="/assets/js/60.57eff889.js"><link rel="prefetch" href="/assets/js/61.387a5103.js"><link rel="prefetch" href="/assets/js/62.23ba2982.js"><link rel="prefetch" href="/assets/js/63.2d69780b.js"><link rel="prefetch" href="/assets/js/64.d3f669fb.js"><link rel="prefetch" href="/assets/js/65.f5410640.js"><link rel="prefetch" href="/assets/js/66.59887fb2.js"><link rel="prefetch" href="/assets/js/67.01fba30e.js"><link rel="prefetch" href="/assets/js/68.8a6bbb81.js"><link rel="prefetch" href="/assets/js/69.12e673c4.js"><link rel="prefetch" href="/assets/js/70.a227d4b3.js"><link rel="prefetch" href="/assets/js/71.bd6a3bd7.js"><link rel="prefetch" href="/assets/js/72.4f2efca4.js"><link rel="prefetch" href="/assets/js/73.7dbf57a8.js"><link rel="prefetch" href="/assets/js/74.28c26d0a.js"><link rel="prefetch" href="/assets/js/75.d36a4feb.js"><link rel="prefetch" href="/assets/js/76.9123efc1.js"><link rel="prefetch" href="/assets/js/77.cbe2020d.js"><link rel="prefetch" href="/assets/js/78.7ab3eb40.js"><link rel="prefetch" href="/assets/js/79.bc69c4a8.js"><link rel="prefetch" href="/assets/js/80.da17de0b.js"><link rel="prefetch" href="/assets/js/81.1d16813f.js"><link rel="prefetch" href="/assets/js/82.586f2e97.js"><link rel="prefetch" href="/assets/js/83.129cc5fa.js"><link rel="prefetch" href="/assets/js/84.83d65ed9.js"><link rel="prefetch" href="/assets/js/85.f4327096.js"><link rel="prefetch" href="/assets/js/86.866a7d4f.js"><link rel="prefetch" href="/assets/js/87.f8aba274.js"><link rel="prefetch" href="/assets/js/88.43c5a138.js"><link rel="prefetch" href="/assets/js/89.b47b6d86.js"><link rel="prefetch" href="/assets/js/9.ef15744b.js"><link rel="prefetch" href="/assets/js/90.4950712a.js"><link rel="prefetch" href="/assets/js/91.80bbaffe.js"><link rel="prefetch" href="/assets/js/92.0d03ce50.js"><link rel="prefetch" href="/assets/js/93.fff94cff.js"><link rel="prefetch" href="/assets/js/94.91d0e36d.js"><link rel="prefetch" href="/assets/js/95.15227fb3.js"><link rel="prefetch" href="/assets/js/96.b3ef20b0.js"><link rel="prefetch" href="/assets/js/97.9e5e1675.js"><link rel="prefetch" href="/assets/js/98.b213b526.js"><link rel="prefetch" href="/assets/js/99.1ec76897.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.1b448e12.js">
    <link rel="stylesheet" href="/assets/css/0.styles.a5ee4d2c.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/logo.webp" alt="Bombax's Knowledge Document Notes" class="logo"> <span class="site-name can-hide">Bombax's Knowledge Document Notes</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java基础" class="dropdown-title"><a href="/java-basic/" class="link-title router-link-active">Java基础</a> <span class="title" style="display:none;">Java基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>前置</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/java-basic/java-learning/" class="nav-link">尚硅谷Java学习</a></li><li class="dropdown-subitem"><a href="/java-basic/software-install-config/" class="nav-link">基础软件安装与配置</a></li></ul></li><li class="dropdown-item"><h4>核心</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/java-basic/java-from-entry-to-proficiency/" class="nav-link">Java从入门到精通(JDK17版)</a></li><li class="dropdown-subitem"><a href="/java-basic/mysql-from-beginners-to-advanced/beginners/" class="nav-link">MySQL从入门到高级-基础篇</a></li><li class="dropdown-subitem"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/" class="nav-link router-link-active">MySQL从入门到高级-高级篇</a></li><li class="dropdown-subitem"><a href="/java-basic/jdbc-core/" class="nav-link">JDBC 核心技术(JDK21版)</a></li></ul></li><li class="dropdown-item"><h4>学习笔记</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/pojo/" class="nav-link">POJO 概念</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="微服务核心" class="dropdown-title"><a href="/micro-service-core/" class="link-title">微服务核心</a> <span class="title" style="display:none;">微服务核心</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Spring Cloud</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/micro-service-core/SpringCloud/" class="nav-link">SpringCloud</a></li><li class="dropdown-subitem"><a href="/micro-service-core/SpringCloud-Alibaba/" class="nav-link">SpringCloud-Alibaba</a></li></ul></li><li class="dropdown-item"><h4>持久层框架</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/micro-service-core/MyBatis/" class="nav-link">MyBatis</a></li><li class="dropdown-subitem"><a href="/micro-service-core/MyBatisPlus/" class="nav-link">MyBatis-Plus</a></li></ul></li><li class="dropdown-item"><h4>相关知识</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/20b7dd/" class="nav-link">Mybatis 代码生成工具比较</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="微服务生态" class="dropdown-title"><a href="/micro-service-ecology/" class="link-title">微服务生态</a> <span class="title" style="display:none;">微服务生态</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>安全框架</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/micro-service-ecology/SpringSecurity/" class="nav-link">安全框架之 Spring Security</a></li><li class="dropdown-subitem"><a href="/micro-service-ecology/Shiro/" class="nav-link">安全框架之 Shiro</a></li></ul></li><li class="dropdown-item"><h4>定时任务框架</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/micro-service-ecology/Quartz/" class="nav-link">定时任务框架之 Quartz</a></li><li class="dropdown-subitem"><a href="/micro-service-ecology/XXL-JOB/" class="nav-link">定时任务框架之 XXL-JOB</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="实用工具" class="dropdown-title"><a href="/tools/" class="link-title">实用工具</a> <span class="title" style="display:none;">实用工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/tools/java-logs/" class="nav-link">Java 日志热门框架</a></li><li class="dropdown-item"><!----> <a href="/tools/git/" class="nav-link">Git 常用命令</a></li><li class="dropdown-item"><!----> <a href="/tools/swagger/" class="nav-link">Swagger API 文档生成工具</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><!----> <span class="title" style="display:;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/weibocom/motan/wiki/zh_overview" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Motan RPC
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.knowledgedict.com/tutorial/lombok-intro.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Lombok Tutorial
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://projectlombok.org/features/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Lombok Features
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/alibaba/fastjson2/wiki/fastjson2_intro_cn" target="_blank" rel="noopener noreferrer" class="nav-link external">
  FastJSON2
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://felord.cn/_doc/spring/5.x.RELEASE/_book/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Spring Framework 5 中文文档
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://x-stream.github.io/index.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  XStream
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://neoremind.com/2016/02/java%E7%9A%84%E4%B8%9A%E5%8A%A1%E9%80%BB%E8%BE%91%E9%AA%8C%E8%AF%81%E6%A1%86%E6%9E%B6fluent-validator/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  fluent-validator 业务逻辑验证框架
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.ehcache.org/documentation/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ehcache java 缓存框架
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/alibaba/jetcache" target="_blank" rel="noopener noreferrer" class="nav-link external">
  jetcache java 缓存框架
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://caffeine.gitbook.io/caffeine" target="_blank" rel="noopener noreferrer" class="nav-link external">
  caffeine 缓存框架
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://springdoc.cn/spring/integration.html#cache" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Spring Cache
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.cnblogs.com/imyjy/p/15695160.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  主流缓存框架调研
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/redisson/redisson/wiki/%E7%9B%AE%E5%BD%95" target="_blank" rel="noopener noreferrer" class="nav-link external">
  redisson 官方中文文档
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://blog.csdn.net/u012934325/article/details/100652805" target="_blank" rel="noopener noreferrer" class="nav-link external">
  LiquiBase 中文学习指南
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://docs.liquibase.com/concepts/introduction-to-liquibase.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  LiquiBase 官方文档
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/coderofmutou/coderofmutou.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="/img/avatar.webp"> <div class="blogger-info"><h3>bombax</h3> <span>小小程序猿</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java基础" class="dropdown-title"><a href="/java-basic/" class="link-title router-link-active">Java基础</a> <span class="title" style="display:none;">Java基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>前置</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/java-basic/java-learning/" class="nav-link">尚硅谷Java学习</a></li><li class="dropdown-subitem"><a href="/java-basic/software-install-config/" class="nav-link">基础软件安装与配置</a></li></ul></li><li class="dropdown-item"><h4>核心</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/java-basic/java-from-entry-to-proficiency/" class="nav-link">Java从入门到精通(JDK17版)</a></li><li class="dropdown-subitem"><a href="/java-basic/mysql-from-beginners-to-advanced/beginners/" class="nav-link">MySQL从入门到高级-基础篇</a></li><li class="dropdown-subitem"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/" class="nav-link router-link-active">MySQL从入门到高级-高级篇</a></li><li class="dropdown-subitem"><a href="/java-basic/jdbc-core/" class="nav-link">JDBC 核心技术(JDK21版)</a></li></ul></li><li class="dropdown-item"><h4>学习笔记</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/pojo/" class="nav-link">POJO 概念</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="微服务核心" class="dropdown-title"><a href="/micro-service-core/" class="link-title">微服务核心</a> <span class="title" style="display:none;">微服务核心</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Spring Cloud</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/micro-service-core/SpringCloud/" class="nav-link">SpringCloud</a></li><li class="dropdown-subitem"><a href="/micro-service-core/SpringCloud-Alibaba/" class="nav-link">SpringCloud-Alibaba</a></li></ul></li><li class="dropdown-item"><h4>持久层框架</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/micro-service-core/MyBatis/" class="nav-link">MyBatis</a></li><li class="dropdown-subitem"><a href="/micro-service-core/MyBatisPlus/" class="nav-link">MyBatis-Plus</a></li></ul></li><li class="dropdown-item"><h4>相关知识</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/20b7dd/" class="nav-link">Mybatis 代码生成工具比较</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="微服务生态" class="dropdown-title"><a href="/micro-service-ecology/" class="link-title">微服务生态</a> <span class="title" style="display:none;">微服务生态</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>安全框架</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/micro-service-ecology/SpringSecurity/" class="nav-link">安全框架之 Spring Security</a></li><li class="dropdown-subitem"><a href="/micro-service-ecology/Shiro/" class="nav-link">安全框架之 Shiro</a></li></ul></li><li class="dropdown-item"><h4>定时任务框架</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/micro-service-ecology/Quartz/" class="nav-link">定时任务框架之 Quartz</a></li><li class="dropdown-subitem"><a href="/micro-service-ecology/XXL-JOB/" class="nav-link">定时任务框架之 XXL-JOB</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="实用工具" class="dropdown-title"><a href="/tools/" class="link-title">实用工具</a> <span class="title" style="display:none;">实用工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/tools/java-logs/" class="nav-link">Java 日志热门框架</a></li><li class="dropdown-item"><!----> <a href="/tools/git/" class="nav-link">Git 常用命令</a></li><li class="dropdown-item"><!----> <a href="/tools/swagger/" class="nav-link">Swagger API 文档生成工具</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><!----> <span class="title" style="display:;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/weibocom/motan/wiki/zh_overview" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Motan RPC
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.knowledgedict.com/tutorial/lombok-intro.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Lombok Tutorial
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://projectlombok.org/features/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Lombok Features
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/alibaba/fastjson2/wiki/fastjson2_intro_cn" target="_blank" rel="noopener noreferrer" class="nav-link external">
  FastJSON2
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://felord.cn/_doc/spring/5.x.RELEASE/_book/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Spring Framework 5 中文文档
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://x-stream.github.io/index.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  XStream
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://neoremind.com/2016/02/java%E7%9A%84%E4%B8%9A%E5%8A%A1%E9%80%BB%E8%BE%91%E9%AA%8C%E8%AF%81%E6%A1%86%E6%9E%B6fluent-validator/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  fluent-validator 业务逻辑验证框架
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.ehcache.org/documentation/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ehcache java 缓存框架
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/alibaba/jetcache" target="_blank" rel="noopener noreferrer" class="nav-link external">
  jetcache java 缓存框架
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://caffeine.gitbook.io/caffeine" target="_blank" rel="noopener noreferrer" class="nav-link external">
  caffeine 缓存框架
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://springdoc.cn/spring/integration.html#cache" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Spring Cache
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.cnblogs.com/imyjy/p/15695160.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  主流缓存框架调研
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/redisson/redisson/wiki/%E7%9B%AE%E5%BD%95" target="_blank" rel="noopener noreferrer" class="nav-link external">
  redisson 官方中文文档
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://blog.csdn.net/u012934325/article/details/100652805" target="_blank" rel="noopener noreferrer" class="nav-link external">
  LiquiBase 中文学习指南
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://docs.liquibase.com/concepts/introduction-to-liquibase.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  LiquiBase 官方文档
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/coderofmutou/coderofmutou.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>前置</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>核心</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Java从入门到精通(JDK17版)</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>MySQL从入门到高级-基础篇</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>MySQL从入门到高级-高级篇</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-0/" class="sidebar-link">第00章_写在前面</a></li><li><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-1/" class="sidebar-link">第01章_Linux 下 MySQL 的安装与使用</a></li><li><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-2/" class="sidebar-link">第02章_MySQL 的数据目录</a></li><li><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-3/" aria-current="page" class="active sidebar-link">第03章_用户与权限管理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-3/#_1-用户管理" class="sidebar-link">1. 用户管理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-3/#_1-1-登录-mysql-服务器" class="sidebar-link">1.1 登录 MySQL 服务器</a></li><li class="sidebar-sub-header level3"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-3/#_1-2-创建用户" class="sidebar-link">1.2 创建用户</a></li><li class="sidebar-sub-header level3"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-3/#_1-3-修改用户" class="sidebar-link">1.3 修改用户</a></li><li class="sidebar-sub-header level3"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-3/#_1-4-删除用户" class="sidebar-link">1.4 删除用户</a></li><li class="sidebar-sub-header level3"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-3/#_1-5-查看创建用户的语句" class="sidebar-link">1.5 查看创建用户的语句</a></li><li class="sidebar-sub-header level3"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-3/#_1-6-设置当前用户密码" class="sidebar-link">1.6 设置当前用户密码</a></li><li class="sidebar-sub-header level3"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-3/#_1-7-修改其它用户密码" class="sidebar-link">1.7 修改其它用户密码</a></li><li class="sidebar-sub-header level3"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-3/#_1-8-mysql8-密码管理" class="sidebar-link">1.8 MySQL8 密码管理</a></li><li class="sidebar-sub-header level4"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-3/#密码过期策略" class="sidebar-link">密码过期策略</a></li><li class="sidebar-sub-header level4"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-3/#密码重用策略" class="sidebar-link">密码重用策略</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-3/#_2-权限管理" class="sidebar-link">2. 权限管理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-3/#_2-1-权限列表" class="sidebar-link">2.1 权限列表</a></li><li class="sidebar-sub-header level3"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-3/#_2-2-授予权限的原则" class="sidebar-link">2.2 授予权限的原则</a></li><li class="sidebar-sub-header level3"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-3/#_2-3-授予权限" class="sidebar-link">2.3 授予权限</a></li><li class="sidebar-sub-header level3"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-3/#_2-4-查看权限" class="sidebar-link">2.4 查看权限</a></li><li class="sidebar-sub-header level3"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-3/#_2-5-收回权限" class="sidebar-link">2.5 收回权限</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-3/#_3-权限表" class="sidebar-link">3. 权限表</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-3/#_3-1-user-表" class="sidebar-link">3.1 user 表</a></li><li class="sidebar-sub-header level3"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-3/#_3-2-db-表" class="sidebar-link">3.2 db 表</a></li><li class="sidebar-sub-header level3"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-3/#_3-3-tables-priv-表和-columns-priv-表" class="sidebar-link">3.3 tablespriv 表和 columnspriv 表</a></li><li class="sidebar-sub-header level3"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-3/#_3-4-procs-priv-表" class="sidebar-link">3.4 procs_priv 表</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-3/#_4-访问控制权限" class="sidebar-link">4. 访问控制权限</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-3/#_4-1-连接核实阶段" class="sidebar-link">4.1 连接核实阶段</a></li><li class="sidebar-sub-header level3"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-3/#_4-2-请求核实阶段" class="sidebar-link">4.2 请求核实阶段</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-3/#_5-角色管理" class="sidebar-link">5. 角色管理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-3/#_5-1-创建角色" class="sidebar-link">5.1 创建角色</a></li><li class="sidebar-sub-header level3"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-3/#_5-2-给角色赋予权限" class="sidebar-link">5.2 给角色赋予权限</a></li><li class="sidebar-sub-header level3"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-3/#_5-3-查看角色的权限" class="sidebar-link">5.3 查看角色的权限</a></li><li class="sidebar-sub-header level3"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-3/#_5-4-回收角色的权限" class="sidebar-link">5.4 回收角色的权限</a></li><li class="sidebar-sub-header level3"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-3/#_5-5-删除角色" class="sidebar-link">5.5 删除角色</a></li><li class="sidebar-sub-header level3"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-3/#_5-6-给用户赋予角色" class="sidebar-link">5.6 给用户赋予角色</a></li><li class="sidebar-sub-header level3"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-3/#_5-7-激活角色" class="sidebar-link">5.7 激活角色</a></li><li class="sidebar-sub-header level3"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-3/#_5-8-撤销用户的角色" class="sidebar-link">5.8 撤销用户的角色</a></li><li class="sidebar-sub-header level3"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-3/#_5-9-设置强制角色-mandatory-role" class="sidebar-link">5.9 设置强制角色(mandatory role)</a></li><li class="sidebar-sub-header level3"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-3/#_5-10-小结" class="sidebar-link">5.10 小结</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-3/#_6-配置文件的使用" class="sidebar-link">6. 配置文件的使用</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-3/#_6-1-配置文件格式" class="sidebar-link">6.1 配置文件格式</a></li><li class="sidebar-sub-header level3"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-3/#_6-2-启动命令与选项组" class="sidebar-link">6.2 启动命令与选项组</a></li><li class="sidebar-sub-header level3"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-3/#_6-3-特定-mysql-版本的专用选项组" class="sidebar-link">6.3 特定 MySQL 版本的专用选项组</a></li><li class="sidebar-sub-header level3"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-3/#_6-4-同一个配置文件中多个组的优先级" class="sidebar-link">6.4 同一个配置文件中多个组的优先级</a></li><li class="sidebar-sub-header level3"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-3/#_6-5-命令行和配置文件中启动选项的区别" class="sidebar-link">6.5 命令行和配置文件中启动选项的区别</a></li></ul></li></ul></li><li><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-4/" class="sidebar-link">第04章_逻辑架构</a></li><li><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-5/" class="sidebar-link">第05章_存储引擎</a></li><li><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-6/" class="sidebar-link">第06章_索引的数据结构</a></li><li><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-7/" class="sidebar-link">第07章_InnoDB 数据存储结构</a></li><li><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-8/" class="sidebar-link">第08章_索引的创建与设计原则</a></li><li><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-9/" class="sidebar-link">第09章_性能分析工具的使用</a></li><li><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-10/" class="sidebar-link">第10章_索引优化与查询优化</a></li><li><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-11/" class="sidebar-link">第11章_数据库的设计规范</a></li><li><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-12/" class="sidebar-link">第12章_数据库其它调优策略</a></li><li><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-13/" class="sidebar-link">第13章_事务基础知识</a></li><li><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-14/" class="sidebar-link">第14章_MySQL 事务日志</a></li><li><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-15/" class="sidebar-link">第15章_锁</a></li><li><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-16/" class="sidebar-link">第16章_多版本并发控制</a></li><li><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-17/" class="sidebar-link">第17章_其它数据库日志</a></li><li><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-18/" class="sidebar-link">第18章_主从复制</a></li><li><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-19/" class="sidebar-link">第19章_数据库备份与恢复</a></li></ul></section></li><li><a href="/java-basic/jdbc-core/" class="sidebar-link">JDBC 核心技术(JDK21版)</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>学习笔记</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/categories/?category=Java%E5%9F%BA%E7%A1%80" title="分类" data-v-06225672>Java基础</a></li><li data-v-06225672><a href="/categories/?category=%E6%A0%B8%E5%BF%83" title="分类" data-v-06225672>核心</a></li><li data-v-06225672><a href="/categories/?category=MySQL%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E9%AB%98%E7%BA%A7-%E9%AB%98%E7%BA%A7%E7%AF%87" title="分类" data-v-06225672>MySQL从入门到高级-高级篇</a></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="https://github.com/coderofmutou" target="_blank" title="作者" class="beLink" data-v-06225672>bombax</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2025-05-14</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABGpJREFUSA3tVVtoXFUU3fvOI53UlmCaKIFmwEhsE7QK0ipFEdHEKpXaZGrp15SINsXUWvBDpBgQRKi0+KKoFeJHfZA+ED9KKoIU2gYD9UejTW4rVIzm0VSTziPzuNu1z507dibTTjL4U/DAzLn3nL3X2o91ziX6f9wMFdh6Jvbm9nNSV0msViVO6tN1Rm7NMu2OpeJ9lWBUTDxrJbYTS0hInuwciu9eLHlFxCLCZEk3MegsJmZ5K/JD6t7FkFdEvGUo1g7qJoG3MHImqRIn8/nzY1K9UPKKiJmtnUqHVE3Gbuay6vJE/N2FEmuxFjW2nUuE0yQXRRxLiTUAzs36zhZvOXJPdX850EVnnLZkB8prodQoM5JGj7Xk2mvC7JB8tG04Ef5PiXtG0UtxupRQSfTnBoCy554x18yJHI6I+G5Eru4LHmPJZEQsrvPUbMiA8G/WgMK7w7I+ez7++o2ANfbrjvaOl1tFMs+htG3IrZH9/hDX1Pr8Tc0UvH8tcX29KzAgIGcEkINyW5BF9x891hw6VYqgJHEk0huccS7vh3C6gTiODL+26huuBtbct8eZnqLML8PkxGYpuPZBqtqwkSjgc4mB5gbgig5i+y0UDK35LMxXisn9xQtK+nd26gTIHsHe/oblK/b29fUmN/8Y+9jAQrnBp56m1LcDlDp9irKTExSKduXJVWSqdBMA08pEJnEIOB3FPPMybu/oeV8zFeYN3xx576Q6RH+VmplE4ncQV5v+5rzSoyOU7PuEAg8g803PwBJ0CExno/jcMbN8tONYeOmHiuUNryvm3fRUy4tMPVLdAGkUhNWuggGrJcXPv+ouCjz0MKUHz1J2/E8IC9nqTabcxgaBYM0hPhD5Y65FsbxRQKxCQrDjDctW7PUM3HuZunFyifSAqEfuzCp48Il24luWUWZoyJCaPR82jE0+kFA643wRFVni4RYSq3ohJO2pZ7B5dO4xkDWbEpossJPLSrPjYID8rS2UHTlvyNxqIGsg674XJJ7vnh5L7PNwC4hh2sjCI96mzszOTpxLF0T7l88Yz7lAuK6OnL8gXLOnTvpzSb22YG8W7us3jSebFHeeqnXRG1vt+MoUM84LQIBmMsCTAcOauTh0T0l0neQK7m2bLMt2mGxU3HYssS0J2cdv5wljlPsrIuZLAG/2DOZIXgCYT8uMGZN+e2kSirfxZOPCsC0f24nTZzspnVn9VePS1Z5vubmAGGXG8ZFno9Hel0yfA5ZPhF7Dh972BQJ2qCpgH67lmWtBYbvk6sz02wjky2vXyz0XErP/kFB619js1BtwfOV4OPRqOQBjy3Qbk18vigUPPSD5ceHnwck7W9bhAqZdd7SuG7w4/P2F/GaJh8c7e9qgow+Q7cGBo+98WsLkuktFqiZabtXuQTu/Y5ETbR0v7tNSFnvrmu6pjdoan2KjMu8q/Hmj1EfCO2ZGfEIbIXKUlw8qaX9/b2oeSJmFksSeT/Fn0V3nSypChh4Gjh74ybO9aeZ/AN2dwciu2/MhAAAAAElFTkSuQmCC">第03章_用户与权限管理<!----></h1> <!----> <div class="theme-vdoing-content content__default"><h1 id="第-03-章-用户与权限管理"><a href="#第-03-章-用户与权限管理" class="header-anchor">#</a> 第 03 章 用户与权限管理</h1> <h2 id="_1-用户管理"><a href="#_1-用户管理" class="header-anchor">#</a> 1. 用户管理</h2> <p>MySQL 用户可以分为<code>普通用户</code>和 <code>root 用户</code>。root 用户是超级管理员，拥有所有权限，包括创建用户、删除用户和修改用户的密码等管理权限；普通用户只拥有被授予的各种权限。</p> <p><strong>MySQL 提供了许多语句用来管理用户账号</strong>，这些语句可以用来管理包括登录和退出 MySQL 服务器、创建用户、删除用户、密码管理和权限管理等内容。</p> <p><strong>MySQL 数据库的安全性需要通过账号管理来保证。</strong></p> <h3 id="_1-1-登录-mysql-服务器"><a href="#_1-1-登录-mysql-服务器" class="header-anchor">#</a> 1.1 登录 MySQL 服务器</h3> <p>启动 MySQL 服务后，可以通过 mysql 命令来登录 MySQL 服务器，命令如下：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>mysql –h <span class="token function">hostname</span><span class="token operator">|</span>hostIP –P port –u username –p DatabaseName –e <span class="token string">&quot;SQL语句&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li><code>-h参数</code>后面接主机名或者主机 IP，hostname 为主机名，hostIP 为主机 IP。</li> <li><code>-P参数</code>后面接 MySQL 服务的端口，通过该参数连接到指定的端口。MySQL 服务的默认端口是 <code>3306</code>，不使用该参数时自动连接到 3306 端口，port 为连接的端口号。</li> <li><code>-u参数</code>后面接用户名，username 为用户名。</li> <li><code>-p参数</code>会提示输入密码。</li> <li><code>DatabaseName参数</code>指明登录到哪一个数据库中。如果没有该参数，就会直接登录到 MySQL 数据库中，然后可以使用 USE 命令来选择数据库。</li> <li><code>-e参数</code>后面可以直接加 SQL 语句。登录 MySQL 服务器以后即可执行这个 SQL 语句，然后退出 MySQL 服务器。</li></ul> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>mysql <span class="token parameter variable">-uroot</span> <span class="token parameter variable">-p</span> <span class="token parameter variable">-hlocalhost</span> <span class="token parameter variable">-P3306</span> mysql <span class="token parameter variable">-e</span> <span class="token string">&quot;select host,user from user&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_1-2-创建用户"><a href="#_1-2-创建用户" class="header-anchor">#</a> 1.2 创建用户</h3> <p>在 MySQL 数据库中，官方推荐使用 <code>CREATE USER</code> 语句创建新用户。MySQL8 版本移除了 PASSWORD 加密方法，因此不再推荐使用 INSERT 语句直接操作 MySQL 中的 user 表来增加用户。</p> <p>使用 <code>CREATE USER 语句</code>来创建新用户时，<strong>必须拥有 CREATE USER 权限</strong>。每添加一个用户，<code>CREATE USER</code> 语句会在 <code>MySQL.user</code> 表中添加一条新记录，但是<strong>新创建的账户没有任何权限</strong>。如果添加的账户已经存在，CREATE USER 语句就会返回一个错误。</p> <p><strong>创建用户语句</strong></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">USER</span> 用户名 <span class="token punctuation">[</span>IDENTIFIED <span class="token keyword">BY</span> <span class="token string">'密码'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">,</span>用户名 <span class="token punctuation">[</span>IDENTIFIED <span class="token keyword">BY</span> <span class="token string">'密码'</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>用户名参数表示新建用户的账户，由<code>用户（User）</code>和<code>主机名（Host）</code>构成；</li> <li><code>[ ]</code>表示可选，也就是说，可以指定用户登录时需要密码验证，也可以不指定密码验证，这样用户可以直接登录。不过，不指定密码的方式不安全，不推荐使用。如果指定密码值，这里需要使用 <code>IDENTIFIED BY</code> 指定明文密码值。</li> <li><code>CREATE USER</code> 语句可以同时创建多个用户。</li></ul> <p>举例：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">USER</span> <span class="token string">'bombax'</span> IDENTIFIED <span class="token keyword">BY</span> <span class="token string">'123123'</span><span class="token punctuation">;</span> <span class="token comment"># 默认host是 %</span>
<span class="token keyword">CREATE</span> <span class="token keyword">USER</span> <span class="token string">'bombax'</span><span class="token variable">@'localhost'</span> IDENTIFIED <span class="token keyword">BY</span> <span class="token string">'123456'</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> host<span class="token punctuation">,</span><span class="token keyword">user</span> <span class="token keyword">from</span> <span class="token keyword">user</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="_1-3-修改用户"><a href="#_1-3-修改用户" class="header-anchor">#</a> 1.3 修改用户</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">UPDATE</span> mysql<span class="token punctuation">.</span><span class="token keyword">user</span> <span class="token keyword">SET</span> <span class="token keyword">USER</span><span class="token operator">=</span><span class="token string">'li4'</span> <span class="token keyword">WHERE</span> <span class="token keyword">USER</span><span class="token operator">=</span><span class="token string">'wang5'</span><span class="token punctuation">;</span> 
FLUSH <span class="token keyword">PRIVILEGES</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">提示</p> <ul><li>当 host 字段设置为局域网 IP 段时，本机访问本机上的 mysql，也需要-h 指定本机的 IP</li> <li>不能省略，省略为 localhost，会导致无法访问</li></ul></div> <h3 id="_1-4-删除用户"><a href="#_1-4-删除用户" class="header-anchor">#</a> 1.4 删除用户</h3> <p><strong>方式 1：使用 DROP 方式删除（推荐）</strong></p> <p>使用 DROP USER 语句来删除用户时，必须拥有 DROP USER 权限。DROP USER 语句的基本语法形式如下：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">DROP</span> <span class="token keyword">USER</span> <span class="token keyword">user</span><span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token keyword">user</span><span class="token punctuation">]</span>…<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>其中，user 参数是需要删除的用户，由用户的用户名(User)和主机名(Host)组成。DROP USER 语句可以同时删除多个用户，各用户之间用逗号隔开。</p> <p>举例：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">DROP</span> <span class="token keyword">USER</span> li4 <span class="token punctuation">;</span> <span class="token comment"># 默认删除host为%的用户</span>
<span class="token keyword">DROP</span> <span class="token keyword">USER</span> <span class="token string">'kangshifu'</span><span class="token variable">@'localhost'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>方式 2：使用 DELETE 方式删除（不推荐，有残留信息）</strong></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> mysql<span class="token punctuation">.</span><span class="token keyword">user</span> <span class="token keyword">WHERE</span> Host<span class="token operator">=</span><span class="token string">'hostname'</span> <span class="token operator">AND</span> <span class="token keyword">User</span><span class="token operator">=</span><span class="token string">'username'</span><span class="token punctuation">;</span>
FLUSH <span class="token keyword">PRIVILEGES</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="custom-block warning"><p class="custom-block-title">注意</p> <p>不推荐通过 DELETE 方式进行删除，系统会有残留信息保留。而 drop user 命令会删除用户以及对应的权限，执行命令后 mysql.user 表和 mysql.db 表的相应记录都消失了。</p></div> <h3 id="_1-5-查看创建用户的语句"><a href="#_1-5-查看创建用户的语句" class="header-anchor">#</a> 1.5 查看创建用户的语句</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SHOW</span> <span class="token keyword">create</span> <span class="token keyword">user</span> <span class="token operator">&lt;</span>username<span class="token operator">&gt;</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_1-6-设置当前用户密码"><a href="#_1-6-设置当前用户密码" class="header-anchor">#</a> 1.6 设置当前用户密码</h3> <p>适用于 root 用户修改自己的密码，以及普通用户登录后修改自己的密码。</p> <p>root 用户拥有很高的权限，因此必须保证 root 用户的密码安全。root 用户可以通过多种方式来修改密码，使用 <code>ALTER USER</code> 修改用户密码是 MySQL <strong>官方推荐</strong> 的方法，此时，也可以通过 <code>SET 语句</code> 修改密码。</p> <p><strong>使用 ALTER USER 命令来修改当前用户密码</strong></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">USER</span> <span class="token keyword">USER</span><span class="token punctuation">(</span><span class="token punctuation">)</span> IDENTIFIED <span class="token keyword">BY</span> <span class="token string">'new_password'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>使用 SET 语句来修改当前用户密码</strong></p> <p>该语句会自动将密码加密后再赋值给当前用户。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SET</span> PASSWORD<span class="token operator">=</span><span class="token string">'new_password'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_1-7-修改其它用户密码"><a href="#_1-7-修改其它用户密码" class="header-anchor">#</a> 1.7 修改其它用户密码</h3> <p><strong>使用 ALTER 语句来修改普通用户的密码</strong></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">USER</span> <span class="token keyword">user</span> <span class="token punctuation">[</span>IDENTIFIED <span class="token keyword">BY</span> <span class="token string">'新密码'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token keyword">user</span><span class="token punctuation">[</span>IDENTIFIED <span class="token keyword">BY</span> <span class="token string">'新密码'</span><span class="token punctuation">]</span><span class="token punctuation">]</span>…<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>user 参数由用户名和主机名组成</p> <p><strong>使用 SET 命令来修改普通用户的密码</strong></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SET</span> PASSWORD <span class="token keyword">FOR</span> <span class="token string">'username'</span><span class="token variable">@'hostname'</span><span class="token operator">=</span><span class="token string">'new_password'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>使用 UPDATE 语句修改普通用户的密码（不推荐）</strong></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">UPDATE</span> MySQL<span class="token punctuation">.</span><span class="token keyword">user</span> <span class="token keyword">SET</span> authentication_string<span class="token operator">=</span>PASSWORD<span class="token punctuation">(</span><span class="token string">&quot;123456&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">WHERE</span> <span class="token keyword">User</span> <span class="token operator">=</span> <span class="token string">&quot;username&quot;</span> <span class="token operator">AND</span> Host <span class="token operator">=</span> <span class="token string">&quot;hostname&quot;</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">提示</p> <p>由于 MySQL8 中已经移除了 PASSWORD() 函数，因此不再使用 UPDATE 语句直接操作用户表修改密码。</p></div> <h3 id="_1-8-mysql8-密码管理"><a href="#_1-8-mysql8-密码管理" class="header-anchor">#</a> 1.8 MySQL8 密码管理</h3> <p>MySQL 中记录使用过的历史密码，目前包含如下密码管理功能：</p> <ol><li>密码过期：要求定期修改密码。</li> <li>密码重用限制：不允许使用旧密码。</li> <li>密码强度评估：要求使用高强度的密码。</li></ol> <div class="custom-block tip"><p class="custom-block-title">提示</p> <p>MySQL 密码管理功能只针对使用基于 MySQL 授权插件的账号，这些插件有 mysql_native_password、sha256_password 和 caching_sha2_password。</p></div> <h4 id="密码过期策略"><a href="#密码过期策略" class="header-anchor">#</a> 密码过期策略</h4> <p>在 MySQL 中，数据库管理员可以<code>手动设置</code>账号密码过期，也可以建立一个<code>自动</code>密码过期策略。</p> <p>过期策略可以是<code>全局的</code>，也可以为<code>每个账号</code>设置单独的过期策略。</p> <p><strong>1. 手动设置立马过期</strong></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">USER</span> <span class="token operator">&lt;</span><span class="token keyword">user</span><span class="token operator">&gt;</span> PASSWORD EXPIRE<span class="token punctuation">;</span>
<span class="token comment"># 举例</span>
<span class="token keyword">ALTER</span> <span class="token keyword">USER</span> <span class="token string">'kangshifu'</span><span class="token variable">@'localhost'</span> PASSWORD EXPIRE<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>该语句将用户 kangshifu 的密码设置为过期，kangshifu 用户仍然可以登录进入数据库，但无法进行查询。密码过期后，只有重新设置了新密码，才能正常使用。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>mysql<span class="token operator">&gt;</span> <span class="token keyword">show</span> <span class="token keyword">databases</span><span class="token punctuation">;</span>
ERROR <span class="token number">1820</span> <span class="token punctuation">(</span>HY000<span class="token punctuation">)</span>: You must reset your password <span class="token keyword">using</span> <span class="token keyword">ALTER</span> <span class="token keyword">USER</span> statement before executing this statement<span class="token punctuation">.</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>2. 设置全局过期策略</strong></p> <p>如果密码使用的时间大于允许的时间，服务器会自动设置为过期，不需要手动设置。</p> <p>MySQL 使用 <code>default_password_lifetime</code> 系统变量建立全局密码过期策略。</p> <ul><li>它的默认值是 0，表示禁用自动密码过期。</li> <li>它允许的值是正整数 N，表示允许的密码生存期。密码必须<strong>每隔 N 天</strong>进行修改。</li></ul> <p><strong>方式一：使用 SQL 语句更改该变量的值并持久化</strong></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SET</span> PERSIST default_password_lifetime <span class="token operator">=</span> <span class="token number">180</span><span class="token punctuation">;</span> <span class="token comment"># 建立全局策略，设置密码每隔180天过期</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>方式二：配置文件 my.cnf 中进行维护</strong></p> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code>[mysqld]
<span class="token key attr-name">default_password_lifetime</span><span class="token punctuation">=</span><span class="token value attr-value">180 #建立全局策略，设置密码每隔180天过期</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>3. 单独设置指定用户过期策略</strong></p> <p>每个账号既可延用全局密码过期策略，也可单独设置策略。在<code>CREATE USER</code> 和<code>ALTER USER</code> 语句上加入<code>PASSWORD EXPIRE</code> 选项可实现单独设置策略。下面是一些语句示例</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">#设置kangshifu账号密码每90天过期：</span>
<span class="token keyword">CREATE</span> <span class="token keyword">USER</span> <span class="token string">'kangshifu'</span><span class="token variable">@'localhost'</span> PASSWORD EXPIRE <span class="token keyword">INTERVAL</span> <span class="token number">90</span> <span class="token keyword">DAY</span><span class="token punctuation">;</span>
<span class="token keyword">ALTER</span> <span class="token keyword">USER</span> <span class="token string">'kangshifu'</span><span class="token variable">@'localhost'</span> PASSWORD EXPIRE <span class="token keyword">INTERVAL</span> <span class="token number">90</span> <span class="token keyword">DAY</span><span class="token punctuation">;</span>

<span class="token comment">#设置密码永不过期：</span>
<span class="token keyword">CREATE</span> <span class="token keyword">USER</span> <span class="token string">'kangshifu'</span><span class="token variable">@'localhost'</span> PASSWORD EXPIRE NEVER<span class="token punctuation">;</span>
<span class="token keyword">ALTER</span> <span class="token keyword">USER</span> <span class="token string">'kangshifu'</span><span class="token variable">@'localhost'</span> PASSWORD EXPIRE NEVER<span class="token punctuation">;</span>

<span class="token comment">#延用全局密码过期策略：</span>
<span class="token keyword">CREATE</span> <span class="token keyword">USER</span> <span class="token string">'kangshifu'</span><span class="token variable">@'localhost'</span> PASSWORD EXPIRE <span class="token keyword">DEFAULT</span><span class="token punctuation">;</span>
<span class="token keyword">ALTER</span> <span class="token keyword">USER</span> <span class="token string">'kangshifu'</span><span class="token variable">@'localhost'</span> PASSWORD EXPIRE <span class="token keyword">DEFAULT</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="密码重用策略"><a href="#密码重用策略" class="header-anchor">#</a> 密码重用策略</h4> <p>MySQL 限制使用已用过的密码。重用策略基于<code>密码更改的数量</code>和<code>使用的时间</code>。重用策略可以是<code>全局</code>的，也可以为每个账号设置<code>单独的策略</code>。</p> <ul><li><p>账号的历史密码包含过去该账号所使用的密码。MySQL 基于以下规则来限制密码重用：</p> <ul><li>如果账号的密码限制<strong>基于密码更改的数量</strong>，那么新密码不能从最近限制的密码数量中选择。例如，如果密码更改的最小值为 3，那么新密码不能与最近 3 个密码中任何一个相同。</li> <li>如果账号密码限制<strong>基于时间</strong>，那么新密码不能从规定时间内选择。例如，如果密码重用周期为 60 天，那么新密码不能从最近 60 天内使用的密码中选择。</li></ul></li> <li><p>MySQL 使用 <code>password_history</code> 和 <code>password_reuse_interval</code> 系统变量设置密码重用策略。</p> <ul><li><code>password_history</code>：规定密码重用的数量</li> <li><code>password_reuse_interval</code>：规定密码重用的周期</li></ul></li></ul> <p><strong>1. 设置全局密码重用策略</strong></p> <p><strong>方式一：使用 SQL</strong></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SET</span> PERSIST password_history <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">;</span> <span class="token comment">#设置不能选择最近使用过的6个密码</span>
<span class="token keyword">SET</span> PERSIST password_reuse_interval <span class="token operator">=</span> <span class="token number">365</span><span class="token punctuation">;</span> <span class="token comment">#设置不能选择最近一年内的密码</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>方式二：my.cnf 配置文件</strong></p> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code>[mysqld]
<span class="token key attr-name">password_history</span><span class="token punctuation">=</span><span class="token value attr-value">6</span>
<span class="token key attr-name">password_reuse_interval</span><span class="token punctuation">=</span><span class="token value attr-value">365</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong>2. 单独设置指定用户密码重用策略</strong></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 不能使用最近5个密码：</span>
<span class="token keyword">CREATE</span> <span class="token keyword">USER</span> <span class="token string">'kangshifu'</span><span class="token variable">@'localhost'</span> PASSWORD HISTORY <span class="token number">5</span><span class="token punctuation">;</span>
<span class="token keyword">ALTER</span> <span class="token keyword">USER</span> <span class="token string">'kangshifu'</span><span class="token variable">@'localhost'</span> PASSWORD HISTORY <span class="token number">5</span><span class="token punctuation">;</span>

<span class="token comment"># 不能使用最近365天内的密码：</span>
<span class="token keyword">CREATE</span> <span class="token keyword">USER</span> <span class="token string">'kangshifu'</span><span class="token variable">@'localhost'</span> PASSWORD REUSE <span class="token keyword">INTERVAL</span> <span class="token number">365</span> <span class="token keyword">DAY</span><span class="token punctuation">;</span>
<span class="token keyword">ALTER</span> <span class="token keyword">USER</span> <span class="token string">'kangshifu'</span><span class="token variable">@'localhost'</span> PASSWORD REUSE <span class="token keyword">INTERVAL</span> <span class="token number">365</span> <span class="token keyword">DAY</span><span class="token punctuation">;</span>

<span class="token comment"># 既不能使用最近5个密码，也不能使用365天内的密码</span>
<span class="token keyword">CREATE</span> <span class="token keyword">USER</span> <span class="token string">'kangshifu'</span><span class="token variable">@'localhost'</span>
PASSWORD HISTORY <span class="token number">5</span>
PASSWORD REUSE <span class="token keyword">INTERVAL</span> <span class="token number">365</span> <span class="token keyword">DAY</span><span class="token punctuation">;</span>

<span class="token keyword">ALTER</span> <span class="token keyword">USER</span> <span class="token string">'kangshifu'</span><span class="token variable">@'localhost'</span>
PASSWORD HISTORY <span class="token number">5</span>
PASSWORD REUSE <span class="token keyword">INTERVAL</span> <span class="token number">365</span> <span class="token keyword">DAY</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 延用全局策略</span>
<span class="token keyword">CREATE</span> <span class="token keyword">USER</span> <span class="token string">'kangshifu'</span><span class="token variable">@'localhost'</span>
PASSWORD HISTORY <span class="token keyword">DEFAULT</span>
PASSWORD REUSE <span class="token keyword">INTERVAL</span> <span class="token keyword">DEFAULT</span><span class="token punctuation">;</span>

<span class="token keyword">ALTER</span> <span class="token keyword">USER</span> <span class="token string">'kangshifu'</span><span class="token variable">@'localhost'</span>
PASSWORD HISTORY <span class="token keyword">DEFAULT</span>
PASSWORD REUSE <span class="token keyword">INTERVAL</span> <span class="token keyword">DEFAULT</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="_2-权限管理"><a href="#_2-权限管理" class="header-anchor">#</a> 2. 权限管理</h2> <h3 id="_2-1-权限列表"><a href="#_2-1-权限列表" class="header-anchor">#</a> 2.1 权限列表</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">show</span> <span class="token keyword">privileges</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li><code>CREATE 和 DROP 权限</code>，可以创建新的数据库和表，或删除（移掉）已有的数据库和表。如果将 MySQL 数据库中的 DROP 权限授予某用户，用户就可以删除 MySQL 访问权限保存的数据库。</li> <li><code>SELECT、INSERT、UPDATE 和 DELETE 权限</code>允许在一个数据库现有的表上实施操作。</li> <li><code>SELECT 权限</code>只有在它们真正从一个表中检索行时才被用到。</li> <li><code>INDEX 权限</code>允许创建或删除索引，INDEX 适用于已有的表。如果具有某个表的 CREATE 权限，就可以在 CREATE TABLE 语句中包括索引定义。</li> <li><code>ALTER 权限</code>可以使用 ALTER TABLE 来更改表的结构和重新命名表。</li> <li><code>CREATE ROUTINE 权限</code>用来创建保存的程序（函数和程序），<code>ALTER ROUTINE 权限</code>用来更改和删除保存的程序，<code>EXECUTE 权限</code>用来执行保存的程序。</li> <li><code>GRANT 权限</code>允许授权给其他用户，可用于数据库、表和保存的程序。</li> <li><code>FILE 权限</code>使用户可以使用 LOAD DATA INFILE 和 SELECT ... INTO OUTFILE 语句读或写服务器上的文件，任何被授予 FILE 权限的用户都能读或写 MySQL 服务器上的任何文件（说明用户可以读任何数据库目录下的文件，因为服务器可以访问这些文件）。</li></ul> <p><strong>MySQL 的权限分布</strong></p> <table><thead><tr><th style="text-align:left;">权限分布</th> <th style="text-align:left;">可能的设置权限</th></tr></thead> <tbody><tr><td style="text-align:left;">表权限</td> <td style="text-align:left;">'Select'，'Insert'，'Update','Delete','Create','Drop','Grant'，'References'，'Index','Alter'</td></tr> <tr><td style="text-align:left;">列权限</td> <td style="text-align:left;">'Select'，'Insert'，'Update','References'</td></tr> <tr><td style="text-align:left;">过程权限</td> <td style="text-align:left;">'Execute','Alter Routine','Grant'</td></tr></tbody></table> <h3 id="_2-2-授予权限的原则"><a href="#_2-2-授予权限的原则" class="header-anchor">#</a> 2.2 授予权限的原则</h3> <p>权限控制主要是出于安全因素，因此需要遵循以下几个<code>经验原则</code>：</p> <ul><li>只授予能<code>满足需要的最小权限</code>，防止用户干坏事。比如用户只是需要查询，那就只给 select 权限就可以了，不要给用户赋予 update、insert 或者 delete 权限。</li> <li>创建用户的时候<code>限制用户的登录主机</code>，一般是限制成指定 IP 或者内网 IP 段。</li> <li>为每个用户<code>设置满足密码复杂度的密码</code>。</li> <li><code>定期清理不需要的用户</code>，回收权限或者删除用户。</li></ul> <h3 id="_2-3-授予权限"><a href="#_2-3-授予权限" class="header-anchor">#</a> 2.3 授予权限</h3> <p>给用户授权的方式有 2 种，分别是通过把<code>角色赋予用户给用户授权</code>和<code>直接给用户授权</code>。用户是数据库的使用者，我们可以通过给用户授予访问数据库中资源的权限，来控制使用者对数据库的访问，消除安全隐患。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">GRANT</span> 权限<span class="token number">1</span><span class="token punctuation">,</span>权限<span class="token number">2</span><span class="token punctuation">,</span>…权限n <span class="token keyword">ON</span> 数据库名称<span class="token punctuation">.</span>表名称 <span class="token keyword">TO</span> 用户名@用户地址 <span class="token punctuation">[</span>IDENTIFIED <span class="token keyword">BY</span> <span class="token string">'密码口令'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li><p>该权限如果发现没有该用户，则会直接新建一个用户。</p></li> <li><p>使用 GRANT 重复给用户添加权限，<code>权限叠加</code>。</p></li> <li><p>如果需要赋予包括 GRANT 的权限，需要添加参数<code>WITH GRANT OPTION</code>，表示该用户可以将自己拥有的权限授权给别人。</p></li> <li><p>给 li4 用户用本地命令行方式，授予 atguigudb 这个库下的所有表的插删改查的权限。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">GRANT</span> <span class="token keyword">SELECT</span><span class="token punctuation">,</span><span class="token keyword">INSERT</span><span class="token punctuation">,</span><span class="token keyword">DELETE</span><span class="token punctuation">,</span><span class="token keyword">UPDATE</span> <span class="token keyword">ON</span> atguigudb<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">TO</span> li4<span class="token variable">@localhost</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul> <ul><li><p>授予通过网络方式登录的 joe 用户 ，对所有库所有表的全部权限，密码设为 123。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">GRANT</span> <span class="token keyword">ALL</span> <span class="token keyword">PRIVILEGES</span> <span class="token keyword">ON</span> <span class="token operator">*</span><span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">TO</span> joe<span class="token variable">@'%'</span> IDENTIFIED <span class="token keyword">BY</span> <span class="token string">'123'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>注意这里的 ALL PRIVILEGES 唯独不包括 grant 的权限</strong></p></li></ul> <div class="custom-block tip"><p class="custom-block-title">提示</p> <p>我们在开发应用的时候，经常会遇到一种需求，就是要根据用户的不同，对数据进行横向和纵向的分组。</p> <ul><li>所谓横向的分组，就是指用户可以接触到的数据的范围，比如可以看到哪些表的数据；</li> <li>所谓纵向的分组，就是指用户对接触到的数据能访问到什么程度，比如能看、能改，甚至是删除。</li></ul></div> <h3 id="_2-4-查看权限"><a href="#_2-4-查看权限" class="header-anchor">#</a> 2.4 查看权限</h3> <ul><li>查看当前用户权限</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SHOW</span> GRANTS<span class="token punctuation">;</span> 
<span class="token comment"># 或 </span>
<span class="token keyword">SHOW</span> GRANTS <span class="token keyword">FOR</span> <span class="token keyword">CURRENT_USER</span><span class="token punctuation">;</span> 
<span class="token comment"># 或 </span>
<span class="token keyword">SHOW</span> GRANTS <span class="token keyword">FOR</span> <span class="token keyword">CURRENT_USER</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>查看某用户的全局权限</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SHOW</span> GRANTS <span class="token keyword">FOR</span> <span class="token string">'user'</span><span class="token variable">@'主机地址'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_2-5-收回权限"><a href="#_2-5-收回权限" class="header-anchor">#</a> 2.5 收回权限</h3> <p>MySQL 中使用<code>REVOKE</code>语句取消用户的某些权限。使用 REVOKE 收回权限之后，用户账户的记录将从 db、host、tables_priv 和 columns_priv 表中删除，但是用户账户记录仍然在 user 表中保存（删除 user 表中的账户记录使用 DROP USER 语句）</p> <div class="custom-block warning"><p class="custom-block-title">注意</p> <p>在将用户账户从 user 表删除之前，应该收回相应用户的所有权限。</p></div> <ul><li>收回权限命令</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">REVOKE</span> 权限<span class="token number">1</span><span class="token punctuation">,</span>权限<span class="token number">2</span><span class="token punctuation">,</span>…权限n <span class="token keyword">ON</span> 数据库名称<span class="token punctuation">.</span>表名称 <span class="token keyword">FROM</span> 用户名@用户地址<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>举例</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">#收回全库全表的所有权限 </span>
<span class="token keyword">REVOKE</span> <span class="token keyword">ALL</span> <span class="token keyword">PRIVILEGES</span> <span class="token keyword">ON</span> <span class="token operator">*</span><span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">FROM</span> joe<span class="token variable">@'%'</span><span class="token punctuation">;</span>

<span class="token comment">#收回mysql库下的所有表的插删改查权限 </span>
<span class="token keyword">REVOKE</span> <span class="token keyword">SELECT</span><span class="token punctuation">,</span><span class="token keyword">INSERT</span><span class="token punctuation">,</span><span class="token keyword">UPDATE</span><span class="token punctuation">,</span><span class="token keyword">DELETE</span> <span class="token keyword">ON</span> mysql<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">FROM</span> joe<span class="token variable">@localhost</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="custom-block warning"><p class="custom-block-title">注意</p> <p>必须用户重新登录后才能生效</p></div> <div class="custom-block note"><p class="custom-block-title">笔记</p> <p>有一些程序员喜欢使用 Root 超级用户来访问数据库，完全把 <code>权限控制</code> 放在 <code>应用层面</code> 实现。这样当然也是可以的。但建议尽量使用数据库自己的角色和用户机制来控制访问权限，不要轻易用 Root 账号。因为 Root 账号密码放在代码里不安全，一旦泄露，数据库就会完全失去保护。</p> <p>而且，MySQL 的权限控制功能十分完善，应该尽量利用，可以提高效率，而且安全可靠。</p></div> <h2 id="_3-权限表"><a href="#_3-权限表" class="header-anchor">#</a> 3. 权限表</h2> <p>MySQL 服务器通过<code>权限表</code>来<strong>控制用户对数据库的访问</strong>，权限表存放在<code>mysql数据库</code>中。MySQL 数据库系统会根据这些权限表的内容为每个用户赋予相应的权限。这些权限表中最重要的是<code>user表</code>、<code>db表</code>。除此之外，还有<code>table_priv</code>表、<code>column_priv</code>表和<code>proc_priv</code>表等。<strong>在 MySQL 启动时，服务器将这些数据库表中权限信息的内容读入内存</strong>。</p> <table><thead><tr><th style="text-align:left;">权限表名</th> <th style="text-align:left;">权限表介绍</th></tr></thead> <tbody><tr><td style="text-align:left;"><code>user</code></td> <td style="text-align:left;">存储用户账户信息及全局权限。</td></tr> <tr><td style="text-align:left;"><code>db</code></td> <td style="text-align:left;">存储数据库级别的权限。</td></tr> <tr><td style="text-align:left;"><code>tables_priv</code></td> <td style="text-align:left;">存储表级别的权限。</td></tr> <tr><td style="text-align:left;"><code>columns_priv</code></td> <td style="text-align:left;">存储列级别的权限。</td></tr> <tr><td style="text-align:left;"><code>procs_priv</code></td> <td style="text-align:left;">存储存储过程和函数级别的权限。</td></tr> <tr><td style="text-align:left;"><code>proxies_priv</code></td> <td style="text-align:left;">存储代理用户权限。</td></tr> <tr><td style="text-align:left;">roles_mapping| <code>role_edges</code> 8.0 版本</td> <td style="text-align:left;">存储用户和角色之间的映射关系。</td></tr> <tr><td style="text-align:left;">global_grants</td> <td style="text-align:left;">动态全局授权</td></tr> <tr><td style="text-align:left;">default_roles</td> <td style="text-align:left;">账户连接并认证后默认授予的角色</td></tr></tbody></table> <h3 id="_3-1-user-表"><a href="#_3-1-user-表" class="header-anchor">#</a> 3.1 user 表</h3> <p>user 表是 MySQL 中最重要的一个权限表， <code>记录用户账号和权限信息</code>，mysql8.0.25 有 51 个字段。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">use</span> mysql<span class="token punctuation">;</span>
<span class="token keyword">show</span> <span class="token keyword">create</span> <span class="token keyword">table</span> <span class="token keyword">user</span><span class="token punctuation">;</span>

<span class="token comment">#查看字段</span>
<span class="token keyword">DESC</span> mysql<span class="token punctuation">.</span><span class="token keyword">user</span><span class="token punctuation">;</span>

<span class="token comment">#查看用户, 以列的方式显示数据</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> mysql<span class="token punctuation">.</span><span class="token keyword">user</span> \G<span class="token punctuation">;</span>

<span class="token comment">#查询特定字段</span>
<span class="token keyword">SELECT</span> host<span class="token punctuation">,</span><span class="token keyword">user</span><span class="token punctuation">,</span>authentication_string<span class="token punctuation">,</span>select_priv<span class="token punctuation">,</span>insert_priv<span class="token punctuation">,</span>drop_priv <span class="token keyword">FROM</span> mysql<span class="token punctuation">.</span><span class="token keyword">user</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><table><thead><tr><th style="text-align:left;">Field</th> <th style="text-align:left;">Type</th> <th style="text-align:left;">Default</th></tr></thead> <tbody><tr><td style="text-align:left;">Host</td> <td style="text-align:left;">char(255)</td> <td style="text-align:left;">''</td></tr> <tr><td style="text-align:left;">User</td> <td style="text-align:left;">char(32)</td> <td style="text-align:left;">''</td></tr> <tr><td style="text-align:left;">Select_priv</td> <td style="text-align:left;">enum('N','Y')</td> <td style="text-align:left;">'N'</td></tr> <tr><td style="text-align:left;">Insert_priv</td> <td style="text-align:left;">enum('N','Y')</td> <td style="text-align:left;">'N'</td></tr> <tr><td style="text-align:left;">Update_priv</td> <td style="text-align:left;">enum('N','Y')</td> <td style="text-align:left;">'N'</td></tr> <tr><td style="text-align:left;">Delete_priv</td> <td style="text-align:left;">enum('N','Y')</td> <td style="text-align:left;">'N'</td></tr> <tr><td style="text-align:left;">Create_priv</td> <td style="text-align:left;">enum('N','Y')</td> <td style="text-align:left;">'N'</td></tr> <tr><td style="text-align:left;">Drop_priv</td> <td style="text-align:left;">enum('N','Y')</td> <td style="text-align:left;">'N'</td></tr> <tr><td style="text-align:left;">Reload_priv</td> <td style="text-align:left;">enum('N','Y')</td> <td style="text-align:left;">'N'</td></tr> <tr><td style="text-align:left;">Shutdown_priv</td> <td style="text-align:left;">enum('N','Y')</td> <td style="text-align:left;">'N'</td></tr> <tr><td style="text-align:left;">Process_priv</td> <td style="text-align:left;">enum('N','Y')</td> <td style="text-align:left;">'N'</td></tr> <tr><td style="text-align:left;">File_priv</td> <td style="text-align:left;">enum('N','Y')</td> <td style="text-align:left;">'N'</td></tr> <tr><td style="text-align:left;">Grant_priv</td> <td style="text-align:left;">enum('N','Y')</td> <td style="text-align:left;">'N'</td></tr> <tr><td style="text-align:left;">References_priv</td> <td style="text-align:left;">enum('N','Y')</td> <td style="text-align:left;">'N'</td></tr> <tr><td style="text-align:left;">Index_priv</td> <td style="text-align:left;">enum('N','Y')</td> <td style="text-align:left;">'N'</td></tr> <tr><td style="text-align:left;">Alter_priv</td> <td style="text-align:left;">enum('N','Y')</td> <td style="text-align:left;">'N'</td></tr> <tr><td style="text-align:left;">Show_db_priv</td> <td style="text-align:left;">enum('N','Y')</td> <td style="text-align:left;">'N'</td></tr> <tr><td style="text-align:left;">Super_priv</td> <td style="text-align:left;">enum('N','Y')</td> <td style="text-align:left;">'N'</td></tr> <tr><td style="text-align:left;">Create_tmp_table_priv</td> <td style="text-align:left;">enum('N','Y')</td> <td style="text-align:left;">'N'</td></tr> <tr><td style="text-align:left;">Lock_tables_priv</td> <td style="text-align:left;">enum('N','Y')</td> <td style="text-align:left;">'N'</td></tr> <tr><td style="text-align:left;">Execute_priv</td> <td style="text-align:left;">enum('N','Y')</td> <td style="text-align:left;">'N'</td></tr> <tr><td style="text-align:left;">Repl_slave_priv</td> <td style="text-align:left;">enum('N','Y')</td> <td style="text-align:left;">'N'</td></tr> <tr><td style="text-align:left;">Repl_client_priv</td> <td style="text-align:left;">enum('N','Y')</td> <td style="text-align:left;">'N'</td></tr> <tr><td style="text-align:left;">Create_view_priv</td> <td style="text-align:left;">enum('N','Y')</td> <td style="text-align:left;">'N'</td></tr> <tr><td style="text-align:left;">Show_view_priv</td> <td style="text-align:left;">enum('N','Y')</td> <td style="text-align:left;">'N'</td></tr> <tr><td style="text-align:left;">Create_routine_priv</td> <td style="text-align:left;">enum('N','Y')</td> <td style="text-align:left;">'N'</td></tr> <tr><td style="text-align:left;">Alter_routine_priv</td> <td style="text-align:left;">enum('N','Y')</td> <td style="text-align:left;">'N'</td></tr> <tr><td style="text-align:left;">Create_user_priv</td> <td style="text-align:left;">enum('N','Y')</td> <td style="text-align:left;">'N'</td></tr> <tr><td style="text-align:left;">Event_priv</td> <td style="text-align:left;">enum('N','Y')</td> <td style="text-align:left;">'N'</td></tr> <tr><td style="text-align:left;">Trigger_priv</td> <td style="text-align:left;">enum('N','Y')</td> <td style="text-align:left;">'N'</td></tr> <tr><td style="text-align:left;">Create_tablespace_priv</td> <td style="text-align:left;">enum('N','Y')</td> <td style="text-align:left;">'N'</td></tr> <tr><td style="text-align:left;">ssl_type</td> <td style="text-align:left;">enum('','ANY','X509','SPECIFIED')</td> <td style="text-align:left;">''</td></tr> <tr><td style="text-align:left;">ssl_cipher</td> <td style="text-align:left;">blob</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">x509_issuer</td> <td style="text-align:left;">blob</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">x509_subject</td> <td style="text-align:left;">blob</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">max_questions</td> <td style="text-align:left;">int unsigned</td> <td style="text-align:left;">0</td></tr> <tr><td style="text-align:left;">max_updates</td> <td style="text-align:left;">int unsigned</td> <td style="text-align:left;">0</td></tr> <tr><td style="text-align:left;">max_connections</td> <td style="text-align:left;">int unsigned</td> <td style="text-align:left;">0</td></tr> <tr><td style="text-align:left;">max_user_connections</td> <td style="text-align:left;">int unsigned</td> <td style="text-align:left;">0</td></tr> <tr><td style="text-align:left;">plugin</td> <td style="text-align:left;">char(64)</td> <td style="text-align:left;">'caching_sha2_password'</td></tr> <tr><td style="text-align:left;">authentication_string</td> <td style="text-align:left;">text</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">password_expired</td> <td style="text-align:left;">enum('N','Y')</td> <td style="text-align:left;">'N'</td></tr> <tr><td style="text-align:left;">password_last_changed</td> <td style="text-align:left;">timestamp</td> <td style="text-align:left;">NULL</td></tr> <tr><td style="text-align:left;">password_lifetime</td> <td style="text-align:left;">smallint unsigned</td> <td style="text-align:left;">NULL</td></tr> <tr><td style="text-align:left;">account_locked</td> <td style="text-align:left;">enum('N','Y')</td> <td style="text-align:left;">'N'</td></tr> <tr><td style="text-align:left;">Create_role_priv</td> <td style="text-align:left;">enum('N','Y')</td> <td style="text-align:left;">'N'</td></tr> <tr><td style="text-align:left;">Drop_role_priv</td> <td style="text-align:left;">enum('N','Y')</td> <td style="text-align:left;">'N'</td></tr> <tr><td style="text-align:left;">Password_reuse_history</td> <td style="text-align:left;">smallint unsigned</td> <td style="text-align:left;">NULL</td></tr> <tr><td style="text-align:left;">Password_reuse_time</td> <td style="text-align:left;">smallint unsigned</td> <td style="text-align:left;">NULL</td></tr> <tr><td style="text-align:left;">Password_require_current</td> <td style="text-align:left;">enum('N','Y')</td> <td style="text-align:left;">NULL</td></tr> <tr><td style="text-align:left;">User_attributes</td> <td style="text-align:left;">json</td> <td style="text-align:left;">NULL</td></tr></tbody></table> <p>这些字段可以分为 4 类，分别是范围列（用户列）、权限列、安全列和资源控制列</p> <h4>1. 范围列（用户列）</h4> <ul><li>host：表示连接类型
<ul><li><code>%</code> 表示所有远程通过 TCP 方式的连接</li> <li><code>IP地址</code>通过指定 IP 地址进行的 TCP 方式的连接</li> <li><code>机器名</code>通过指定网络中的机器名进行的 TCP 方式的连接</li> <li><code>::1</code>IPv6 的本地 ip 地址，等同于 IPv4 的 127.0.0.1</li> <li><code>localhost</code> 本地方式通过命令行方式的连接 ，比如 mysql -u xxx -p xxx 方式的连接</li></ul></li> <li>user：表示用户名，同一用户通过不同方式链接的权限是不一样的</li> <li>password：密码
<ul><li>所有密码串通过 password（明文字符串） 生成的密文字符串。MySQL 8.0 在用户管理方面增加了角色管理，默认的密码加密方式也做了调整，由之前的 <code>SHA1</code> 改为了 <code>SHA2</code> ，不可逆 。同时加上 MySQL5.7 的禁用用户和用户过期的功能，MySQL 在用户管理方面的功能和安全性都较之前版本大大的增强了。</li> <li>mysql 5.7 及之后版本的密码保存到 <code>authentication_string</code> 字段中不再使用 password 字
段。</li></ul></li></ul> <h4>2. 权限列</h4> <ul><li><code>Grant_priv 字段</code> 表示是否拥有 GRANT 权限</li> <li><code>Shutdown_priv 字段</code> 表示是否拥有停止 MySQL 服务的权限</li> <li><code>Super_priv 字段</code> 表示是否拥有超级权限</li> <li><code>Execute_priv 字段</code> 表示是否拥有 EXECUTE 权限。拥有 EXECUTE 权限，可以执行存储过程和函数。</li> <li><code>Select_priv,Insert_priv 等</code> 为该用户所拥有的权限。</li></ul> <h4>3. 安全列</h4> <p>安全列只有 6 个字段，</p> <ul><li>其中两个是 ssl 相关的(ssl_type、ssl_cipher)，用于<code>加密</code>；</li> <li>两个是 x509 相关的(x509_issuer、x509_subject)，用于<code>标识用户</code>；</li> <li>另外两个 Plugin 字段用于<code>验证用户身份</code>的插件，该字段不能为空。如果该字段为空，服务器就使用内建授权验证机制验证用户身份。</li></ul> <h4>4. 资源控制列</h4> <p>资源控制列的字段用来<code>限制用户使用的资源</code>，包含 4 个字段，分别为：</p> <ul><li><code>max_questions</code> 用户每小时允许执行的查询操作次数</li> <li><code>max_updates</code> 用户每小时允许执行的更新操作次数</li> <li><code>max_connections</code> 用户每小时允许执行的连接操作次数</li> <li><code>max_user_connections</code> 用户允许同时建立的连接次数</li></ul> <h3 id="_3-2-db-表"><a href="#_3-2-db-表" class="header-anchor">#</a> 3.2 db 表</h3> <p>针对具体某个数据库的权限</p> <p>使用 DESCRIBE 查看 db 表的基本结构</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">DESCRIBE</span> mysql<span class="token punctuation">.</span>db<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><table><thead><tr><th style="text-align:left;">Field</th> <th style="text-align:left;">Type</th> <th style="text-align:left;">Default</th></tr></thead> <tbody><tr><td style="text-align:left;">Host</td> <td style="text-align:left;">char(255)</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">Db</td> <td style="text-align:left;">char(64)</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">User</td> <td style="text-align:left;">char(32)</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">Select_priv</td> <td style="text-align:left;">enum('N','Y')</td> <td style="text-align:left;">N</td></tr> <tr><td style="text-align:left;">Insert_priv</td> <td style="text-align:left;">enum('N','Y')</td> <td style="text-align:left;">N</td></tr> <tr><td style="text-align:left;">Update_priv</td> <td style="text-align:left;">enum('N','Y')</td> <td style="text-align:left;">N</td></tr> <tr><td style="text-align:left;">Delete_priv</td> <td style="text-align:left;">enum('N','Y')</td> <td style="text-align:left;">N</td></tr> <tr><td style="text-align:left;">Create_priv</td> <td style="text-align:left;">enum('N','Y')</td> <td style="text-align:left;">N</td></tr> <tr><td style="text-align:left;">Drop_priv</td> <td style="text-align:left;">enum('N','Y')</td> <td style="text-align:left;">N</td></tr> <tr><td style="text-align:left;">Grant_priv</td> <td style="text-align:left;">enum('N','Y')</td> <td style="text-align:left;">N</td></tr> <tr><td style="text-align:left;">References_priv</td> <td style="text-align:left;">enum('N','Y')</td> <td style="text-align:left;">N</td></tr> <tr><td style="text-align:left;">Index_priv</td> <td style="text-align:left;">enum('N','Y')</td> <td style="text-align:left;">N</td></tr> <tr><td style="text-align:left;">Alter_priv</td> <td style="text-align:left;">enum('N','Y')</td> <td style="text-align:left;">N</td></tr> <tr><td style="text-align:left;">Create_tmp_table_priv</td> <td style="text-align:left;">enum('N','Y')</td> <td style="text-align:left;">N</td></tr> <tr><td style="text-align:left;">Lock_tables_priv</td> <td style="text-align:left;">enum('N','Y')</td> <td style="text-align:left;">N</td></tr> <tr><td style="text-align:left;">Create_view_priv</td> <td style="text-align:left;">enum('N','Y')</td> <td style="text-align:left;">N</td></tr> <tr><td style="text-align:left;">Show_view_priv</td> <td style="text-align:left;">enum('N','Y')</td> <td style="text-align:left;">N</td></tr> <tr><td style="text-align:left;">Create_routine_priv</td> <td style="text-align:left;">enum('N','Y')</td> <td style="text-align:left;">N</td></tr> <tr><td style="text-align:left;">Alter_routine_priv</td> <td style="text-align:left;">enum('N','Y')</td> <td style="text-align:left;">N</td></tr> <tr><td style="text-align:left;">Execute_priv</td> <td style="text-align:left;">enum('N','Y')</td> <td style="text-align:left;">N</td></tr> <tr><td style="text-align:left;">Event_priv</td> <td style="text-align:left;">enum('N','Y')</td> <td style="text-align:left;">N</td></tr> <tr><td style="text-align:left;">Trigger_priv</td> <td style="text-align:left;">enum('N','Y')</td> <td style="text-align:left;">N</td></tr></tbody></table> <p><strong>1. 用户列</strong></p> <p>用户列 db 表用户列有 3 个字段，分别是 Host、User、Db。这 3 个字段分别表示主机名、用户名和数据库名。表示从某个主机连接某个用户对某个数据库的操作权限，这 3 个字段的组合构成了 db 表的主键。</p> <p><strong>2. 权限列</strong></p> <p>Create_routine_priv 和 Alter_routine_priv 这两个字段决定用户是否具有创建和修改存储过程的权限。</p> <h3 id="_3-3-tables-priv-表和-columns-priv-表"><a href="#_3-3-tables-priv-表和-columns-priv-表" class="header-anchor">#</a> 3.3 tables_priv 表和 columns_priv 表</h3> <p>tables_priv 表用来<code>对表设置操作权限</code></p> <p>columns_priv 表用来对表的<code>某一列设置权限</code>。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">desc</span> mysql<span class="token punctuation">.</span>tables_priv<span class="token punctuation">;</span>
<span class="token keyword">desc</span> mysql<span class="token punctuation">.</span>columns_priv<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><table><thead><tr><th style="text-align:left;">Field</th> <th style="text-align:left;">Type</th></tr></thead> <tbody><tr><td style="text-align:left;">Host</td> <td style="text-align:left;">char(255)</td></tr> <tr><td style="text-align:left;">Db</td> <td style="text-align:left;">char(64)</td></tr> <tr><td style="text-align:left;">User</td> <td style="text-align:left;">char(32)</td></tr> <tr><td style="text-align:left;">Table_name</td> <td style="text-align:left;">char(64)</td></tr> <tr><td style="text-align:left;">Grantor</td> <td style="text-align:left;">varchar(288)</td></tr> <tr><td style="text-align:left;">Timestamp</td> <td style="text-align:left;">timestamp</td></tr> <tr><td style="text-align:left;">Table_priv</td> <td style="text-align:left;">set('Select','Insert','Update','Delete','Create','Drop',<br>'Grant','References','Index','Alter','Create View',<br>'Show view','Trigger')</td></tr> <tr><td style="text-align:left;">Column_priv</td> <td style="text-align:left;">set('Select','Insert','Update','References')</td></tr></tbody></table> <p>tables_priv 表有 8 个字段，分别是 Host、Db、User、Table_name、Grantor、Timestamp、Table_priv 和 Column_priv，各个字段说明如下：</p> <ul><li><strong>四个主键</strong> <code>Host</code>: 主机名  <code>Db</code>: 数据库名  <code>User</code>: 用户名  <code>Table_name</code>: 表名</li> <li><code>Grantor</code>: 修改该记录的用户</li> <li><code>Timestamp</code>: 修改该记录的时间</li> <li><code>Table_priv</code>: 对象的操作权限，包括 Select、Insert、Update、Delete、Create、Drop、Grant、References、Index 和 Alter</li> <li><code>Column_priv</code>: 对表中的列的操作权限，包括 Select、Insert、Update 和 References</li></ul> <h3 id="_3-4-procs-priv-表"><a href="#_3-4-procs-priv-表" class="header-anchor">#</a> 3.4 procs_priv 表</h3> <p>procs_priv 表<code>存储过程和存储函数设置操作权限</code></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">desc</span> mysql<span class="token punctuation">.</span>procs_priv<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><table><thead><tr><th style="text-align:left;">Field</th> <th style="text-align:left;">Type</th> <th style="text-align:left;">Null</th> <th style="text-align:left;">Key</th> <th style="text-align:left;">Default</th></tr></thead> <tbody><tr><td style="text-align:left;">Host</td> <td style="text-align:left;">char(60)</td> <td style="text-align:left;">NO</td> <td style="text-align:left;">PRI</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">Db</td> <td style="text-align:left;">char(64)</td> <td style="text-align:left;">NO</td> <td style="text-align:left;">PRI</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">User</td> <td style="text-align:left;">char(32)</td> <td style="text-align:left;">NO</td> <td style="text-align:left;">PRI</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">Routine_name</td> <td style="text-align:left;">char(64)</td> <td style="text-align:left;">NO</td> <td style="text-align:left;">PRI</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">Routine_type</td> <td style="text-align:left;">enum('FUNCTION','PROCEDURE')</td> <td style="text-align:left;">NO</td> <td style="text-align:left;">PRI</td> <td style="text-align:left;">NULL</td></tr> <tr><td style="text-align:left;">Grantor</td> <td style="text-align:left;">char(93)</td> <td style="text-align:left;">NO</td> <td style="text-align:left;">MUL</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">Proc_priv</td> <td style="text-align:left;">set('Execute','Alter Routine','Grant')</td> <td style="text-align:left;">NO</td> <td style="text-align:left;"></td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">Timestamp</td> <td style="text-align:left;">timestamp</td> <td style="text-align:left;">NO</td> <td style="text-align:left;"></td> <td style="text-align:left;">CURRENT_TIMESTAMP</td></tr></tbody></table> <h2 id="_4-访问控制权限"><a href="#_4-访问控制权限" class="header-anchor">#</a> 4. 访问控制权限</h2> <p>当 MySQL 允许一个用户执行各种操作时，它将首先核实该用户向 MySQL 服务器发送的连接请求，然后确认用户的操作请求是否被允许。这个过程称为 MySQL 中的<code>访问控制过程</code>。MySQL 的访问控制分为两个阶段：<code>连接核实阶段</code>和<code>请求核实阶段</code>。</p> <h3 id="_4-1-连接核实阶段"><a href="#_4-1-连接核实阶段" class="header-anchor">#</a> 4.1 连接核实阶段</h3> <p>当用户试图连接 MySQL 服务器时，服务器基于用户的身份以及用户是否能提供正确的密码验证身份来确定接受或者拒绝连接。即客户端用户会在连接请求中提供用户名、主机地址、用户密码，MySQL 服务器接收到用户请求后，会<strong>使用 user 表中的 host、user 和 authentication_string 这 3 个字段匹配客户端提供信息。</strong></p> <p>服务器只有在 user 表记录的 Host 和 User 字段匹配客户端主机名和用户名，并且提供正确的密码时才接受连接。<strong>如果连接核实没有通过，服务器就完全拒绝访问；否则，服务器接受连接，然后进入阶段 2 等待用户请求。</strong></p> <h3 id="_4-2-请求核实阶段"><a href="#_4-2-请求核实阶段" class="header-anchor">#</a> 4.2 请求核实阶段</h3> <p>一旦建立了连接，服务器就进入了访问控制的阶段 2，也就是请求核实阶段。对此连接上进来的每个请求，服务器检查该请求要执行什么操作、是否有足够的权限来执行它，这正是需要授权表中的权限列发挥作用的地方。这些权限可以来自 user、db、table_priv 和 column_priv 表。</p> <p>确认权限时，MySQL 首先<code>检查user表</code>，如果指定的权限没有在 user 表中被授予，那么 MySQL 就会继续<code>检查db表</code>，db 表是下一安全层级，其中的权限限定于数据库层级，在该层级的 SELECT 权限允许用户查看指定数据库的所有表中的数据；如果在该层级没有找到限定的权限，则 MySQL 继续<code>检查tables_priv表</code>以及<code>columns_priv表</code>，如果所有权限表都检查完毕，但还是没有找到允许的权限操作，MySQL 将<code>返回错误信息</code>，用户请求的操作不能执行，操作失败。</p> <div class="custom-block tip"><p class="custom-block-title">提示</p> <p>MySQL 通过向下层级的顺序（从 user 表到 columns_priv 表）检查权限表，但并不是所有的权限都要执行该过程。例如，一个用户登录到 MySQL 服务器之后只执行对 MySQL 的管理操作，此时只涉及管理权限，因此 MySQL 只检查 user 表。另外，如果请求的权限操作不被允许，MySQL 也不会继续检查下一层级的表。</p></div> <h2 id="_5-角色管理"><a href="#_5-角色管理" class="header-anchor">#</a> 5. 角色管理</h2> <p>角色是在 MySQL8.0 引入的新功能，在 MySQL 中，<strong>角色是权限的集合</strong>，可以为角色添加或移除权限，用户可以被赋予角色，同时也被授予角色包含的权限。对角色进行操作需要较高的权限。并且像用户账户一样，角色可以拥有授予和撤销的权限。</p> <p>引入角色的目的是<code>方便管理拥有相同权限的用户</code>。<strong>恰当的权限设定，可以确保数据的安全性</strong>。</p> <h3 id="_5-1-创建角色"><a href="#_5-1-创建角色" class="header-anchor">#</a> 5.1 创建角色</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">CREATE</span> ROLE <span class="token string">'role_name'</span><span class="token punctuation">[</span><span class="token variable">@'host_name'</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token string">'role_name'</span><span class="token punctuation">[</span><span class="token variable">@'host_name'</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>角色名称的命名规则和用户名类似。如果<code>host_name省略，默认为%</code>，<code>role_name不可省略</code>，不可为空。</p> <h3 id="_5-2-给角色赋予权限"><a href="#_5-2-给角色赋予权限" class="header-anchor">#</a> 5.2 给角色赋予权限</h3> <p>创建角色后，默认这个角色是没有任何权限的，需要给角色授权</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">GRANT</span> <span class="token keyword">privileges</span> <span class="token keyword">ON</span> db_name<span class="token punctuation">.</span>table_name <span class="token keyword">TO</span> <span class="token string">'role_name'</span><span class="token punctuation">[</span><span class="token variable">@'host_name'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>上述语句中 privileges 代表权限的名称，多个权限以逗号隔开。可使用 SHOW 语句查询权限名称</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SHOW</span> <span class="token keyword">PRIVILEGES</span>\G
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_5-3-查看角色的权限"><a href="#_5-3-查看角色的权限" class="header-anchor">#</a> 5.3 查看角色的权限</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SHOW</span> GRANTS <span class="token keyword">FOR</span> <span class="token string">'role_name'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>只要创建了一个角色，系统就会自动给一个<code>USAGE</code>权限，意思是<code>连接登录数据库的权限</code>。</p> <h3 id="_5-4-回收角色的权限"><a href="#_5-4-回收角色的权限" class="header-anchor">#</a> 5.4 回收角色的权限</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">REVOKE</span> <span class="token keyword">privileges</span> <span class="token keyword">ON</span> db_name<span class="token punctuation">.</span>table_name <span class="token keyword">FROM</span> <span class="token string">'rolename'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_5-5-删除角色"><a href="#_5-5-删除角色" class="header-anchor">#</a> 5.5 删除角色</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">DROP</span> ROLE role <span class="token punctuation">[</span><span class="token punctuation">,</span>role2<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="custom-block warning"><p class="custom-block-title">注意</p> <p><code>如果删除了角色，那么用户也就失去了通过这个角色所获得的所有权限</code>。</p></div> <h3 id="_5-6-给用户赋予角色"><a href="#_5-6-给用户赋予角色" class="header-anchor">#</a> 5.6 给用户赋予角色</h3> <p>角色创建并授权后，要赋给用户并处于<code>激活状态</code>才能发挥作用。<strong>MySQL 新创建的角色默认都是非激活状态</strong>。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">GRANT</span> role <span class="token punctuation">[</span><span class="token punctuation">,</span>role2<span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span> <span class="token keyword">TO</span> <span class="token keyword">user</span> <span class="token punctuation">[</span><span class="token punctuation">,</span>user2<span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>查询当前已激活的角色</strong></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> CURRENT_ROLE<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_5-7-激活角色"><a href="#_5-7-激活角色" class="header-anchor">#</a> 5.7 激活角色</h3> <p><strong>方式 1：使用 set default role 命令激活角色</strong></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SET</span> <span class="token keyword">DEFAULT</span> ROLE <span class="token keyword">ALL</span> <span class="token keyword">TO</span> <span class="token string">'kangshifu'</span><span class="token variable">@'localhost'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="custom-block warning"><p class="custom-block-title">注意</p> <p>用户需要退出重新登录，才能看到被赋予的角色。</p></div> <p><strong>方式 2：将 activate_all_roles_on_login 设置为 ON</strong></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SET</span> <span class="token keyword">GLOBAL</span> activate_all_roles_on_login<span class="token operator">=</span><span class="token keyword">ON</span><span class="token punctuation">;</span>
<span class="token keyword">show</span> variables <span class="token operator">like</span> <span class="token string">'activate_all_roles_on_login'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>这条 SQL 语句的意思是，对<code>所有角色永久激活</code>。</p> <p><strong>当前用户在当前会话，激活某角色</strong></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SET</span> ROLE <span class="token string">'manager'</span><span class="token punctuation">;</span>
<span class="token keyword">SET</span> ROLE <span class="token keyword">DEFAULT</span><span class="token punctuation">;</span>
<span class="token comment"># 禁用所有角色</span>
<span class="token keyword">SET</span> ROLE NONE<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="_5-8-撤销用户的角色"><a href="#_5-8-撤销用户的角色" class="header-anchor">#</a> 5.8 撤销用户的角色</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">REVOKE</span> role <span class="token keyword">FROM</span> <span class="token keyword">user</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">提示</p> <p>被修改的用户退出重新登录后，生效</p></div> <h3 id="_5-9-设置强制角色-mandatory-role"><a href="#_5-9-设置强制角色-mandatory-role" class="header-anchor">#</a> 5.9 设置强制角色(mandatory role)</h3> <p>强制角色是给每个创建账户的默认角色，不需要手动设置。强制角色无法被<code>REVOKE</code>或者<code>DROP</code></p> <p>方式 1：服务启动前设置</p> <div class="language-ini line-numbers-mode"><pre class="language-ini"><code><span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">mysqld</span><span class="token punctuation">]</span></span> 
<span class="token key attr-name">mandatory_roles</span><span class="token punctuation">=</span><span class="token value attr-value">'<span class="token inner-value">role1,role2@localhost,r3@%.atguigu.com</span>'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>方式 2：运行时设置</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SET</span> PERSIST mandatory_roles <span class="token operator">=</span> <span class="token string">'role1,role2@localhost,r3@%.example.com'</span><span class="token punctuation">;</span> <span class="token comment">#系统重启后仍然有效</span>
<span class="token keyword">SET</span> <span class="token keyword">GLOBAL</span> mandatory_roles <span class="token operator">=</span> <span class="token string">'role1,role2@localhost,r3@%.example.com'</span><span class="token punctuation">;</span> <span class="token comment">#系统重启后失效</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_5-10-小结"><a href="#_5-10-小结" class="header-anchor">#</a> 5.10 小结</h3> <p>MySQL 主要管理角色语句如下：</p> <table><thead><tr><th style="text-align:left;">语句</th> <th style="text-align:left;">作用</th></tr></thead> <tbody><tr><td style="text-align:left;"><code>CREATE ROLE</code> and <code>DROP ROLE</code></td> <td style="text-align:left;">创建和删除角色</td></tr> <tr><td style="text-align:left;"><code>GRANT</code> and <code>REVOKE</code></td> <td style="text-align:left;">给角色或者账户分配权限</td></tr> <tr><td style="text-align:left;"><code>SHOW GRANTS</code></td> <td style="text-align:left;">显示账户/角色所拥有的权限或者角色</td></tr> <tr><td style="text-align:left;"><code>SET DEFAULT ROLE</code></td> <td style="text-align:left;">设置账户默认使用什么角色</td></tr> <tr><td style="text-align:left;"><code>SET ROLE</code></td> <td style="text-align:left;">改变当前会话的角色</td></tr> <tr><td style="text-align:left;"><code>CURRENT_ROLE()</code>函数</td> <td style="text-align:left;">显示当前会话的角色</td></tr> <tr><td style="text-align:left;"><code>mandatory_roles</code>和<code>activate_all_roles_on_login</code>系统变量</td> <td style="text-align:left;">允许定义用户登录时强制的或者激活授权的角色</td></tr></tbody></table> <h2 id="_6-配置文件的使用"><a href="#_6-配置文件的使用" class="header-anchor">#</a> 6. 配置文件的使用</h2> <h3 id="_6-1-配置文件格式"><a href="#_6-1-配置文件格式" class="header-anchor">#</a> 6.1 配置文件格式</h3> <p>与在命令行中指定启动选项不同，配置文件中的启动选项被划分为若干小组，每个组有一个组名，用中括号 <code>[]</code> 括起来</p> <div class="language-ini line-numbers-mode"><pre class="language-ini"><code><span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">server</span><span class="token punctuation">]</span></span>
(具体的启动选项)

<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">mysqld</span><span class="token punctuation">]</span></span>
(具体的启动选项)

<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">mysqld_safe</span><span class="token punctuation">]</span></span>
(具体的启动选项)

<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">client</span><span class="token punctuation">]</span></span>
(具体的启动选项)

<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">mysql</span><span class="token punctuation">]</span></span>
(具体的启动选项)

<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">mysqladmin</span><span class="token punctuation">]</span></span>
(具体的启动选项)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>配置文件里定义了许多个组，组名分别是：<code>server</code>、<code>mysqld</code>、<code>mysqld_safe</code>、<code>client</code>、<code>mysql</code>、<code>mysqladmin</code>。每个组下边可以定义若干个启动选项。</p> <div class="language-ini line-numbers-mode"><pre class="language-ini"><code><span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">server</span><span class="token punctuation">]</span></span>
option1         # 这是 option1，该选项不需要选项值
<span class="token key attr-name">option2</span><span class="token punctuation">=</span><span class="token value attr-value">value2  # 这是 option2，该选项需要选项值</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>在配置文件中指定启动选项的语法类似于命令行语法，但是配置文件中指定的启动选项不允许加 <code>--</code> 前缀，并且每行只指定一个选项，而且 <code>=</code> 周围可以有空白字符（命令行中选项名、<code>=</code>、选项值之间不允许有空白字符）。另外，在配置文件中，可以使用 <code>#</code> 来添加注释，从 <code>#</code> 出现直到行尾的内容都属于注释内容，读取配置文件时会忽略这些注释内容。</p> <h3 id="_6-2-启动命令与选项组"><a href="#_6-2-启动命令与选项组" class="header-anchor">#</a> 6.2 启动命令与选项组</h3> <p>配置文件中选项组是给不同的启动命令使用的。不过有两个选项组比较特别：</p> <ul><li><code>[server]</code> 组下边的启动选项将作用于 <code>所有的服务器</code> 程序。</li> <li><code>[client]</code> 组下变的启动选项将作用于 <code>所有的客户端</code> 程序。</li></ul> <p>下面是启动命令能够读取的选项组都有哪些：</p> <table><thead><tr><th style="text-align:left;">启动命令</th> <th style="text-align:left;">类别</th> <th style="text-align:left;">能读取的组</th></tr></thead> <tbody><tr><td style="text-align:left;"><code>mysqld</code></td> <td style="text-align:left;">启动服务器</td> <td style="text-align:left;"><code>[mysqld]</code>、<code>[server]</code></td></tr> <tr><td style="text-align:left;"><code>mysqld_safe</code></td> <td style="text-align:left;">启动服务器</td> <td style="text-align:left;"><code>[mysqld]</code>、<code>[server]</code>、<code>mysqld_safe</code></td></tr> <tr><td style="text-align:left;"><code>mysql_server</code></td> <td style="text-align:left;">启动服务器</td> <td style="text-align:left;"><code>[mysqld]</code>、<code>[server]</code>、<code>mysql_server</code></td></tr> <tr><td style="text-align:left;"><code>mysql</code></td> <td style="text-align:left;">启动客户端</td> <td style="text-align:left;"><code>[mysql]</code>、<code>[client]</code></td></tr> <tr><td style="text-align:left;"><code>mysqladmin</code></td> <td style="text-align:left;">启动客户端</td> <td style="text-align:left;"><code>[mysqladmin]</code>、<code>[client]</code></td></tr> <tr><td style="text-align:left;"><code>mysqldump</code></td> <td style="text-align:left;">启动客户端</td> <td style="text-align:left;"><code>[mysqldump]</code>、<code>[client]</code></td></tr></tbody></table> <p>比如，在 <code>/etc/my.cnf</code> 配置文件中添加以下内容：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>skip-networking
default-storage-engine<span class="token operator">=</span>MyISAM
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>然后直接用 <code>mysqld</code> 启动服务器程序：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>mysqld
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>虽然在命令没有添加启动选项，但是在程序启动的时候，就会默认的在配置文件路径下查找配置文件，其中就包括 <code>/etc/my.cnf</code>。又由于 <code>mysqld</code> 命令可以读取 <code>[server]</code> 选项组的内容，所以 <code>skip-networking</code> 和 <code>default-storage-engine=MyISAM</code> 这两个选项是生效的。如果将它们放到 <code>[client]</code> 组中再使用 <code>mysqld</code> 启动服务器程序，则不会生效。</p> <h3 id="_6-3-特定-mysql-版本的专用选项组"><a href="#_6-3-特定-mysql-版本的专用选项组" class="header-anchor">#</a> 6.3 特定 MySQL 版本的专用选项组</h3> <p>可以再选项组的名称后加上特定的 <code>MySQL</code> 版本号，比如对于 <code>mysqld</code> 选项组来说，可以定义一个 <code>[mysqld-5.7]</code> 的选项组，它的含义和 <code>mysqld</code> 一样，只不过只有 <code>5.7</code> 版本的 <code>mysqld</code> 程序才能使用这个选项组中的选项。</p> <h3 id="_6-4-同一个配置文件中多个组的优先级"><a href="#_6-4-同一个配置文件中多个组的优先级" class="header-anchor">#</a> 6.4 同一个配置文件中多个组的优先级</h3> <p>同一个命令可以访问配置文件中的多个组，比如 <code>mysqld</code> 可以访问 <code>[mysqld]</code>、<code>[server]</code> 组，如果在同一个配置文件中不同组里出现了同样的配置项：</p> <div class="language-ini line-numbers-mode"><pre class="language-ini"><code><span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">server</span><span class="token punctuation">]</span></span>
<span class="token key attr-name">default-storage-engine</span><span class="token punctuation">=</span><span class="token value attr-value">InnoDB</span>

<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">mysqld</span><span class="token punctuation">]</span></span>
<span class="token key attr-name">default-storage-engine</span><span class="token punctuation">=</span><span class="token value attr-value">MyISAM</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>则将以最后一个出现的组中的启动选项为准。</p> <h3 id="_6-5-命令行和配置文件中启动选项的区别"><a href="#_6-5-命令行和配置文件中启动选项的区别" class="header-anchor">#</a> 6.5 命令行和配置文件中启动选项的区别</h3> <p>在命令行指定的绝大部分启动选项都可以放到配置文件中，但是有一些选项是专门为命令行设计的，如 <code>defaults-extra-file</code>、<code>defaults-file</code> 这样的选项本身就是为了指定配置文件路径的。</p> <p>如果同一个启动选项即出现在命令行中，又出现在配置文件中，那么以<strong>命令行中的启动选项为准</strong>！</p></div></div> <!----> <div class="page-edit"><!----> <!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2025/07/01, 23:12:15</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-2/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">第02章_MySQL 的数据目录</div></a> <a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-4/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">第04章_逻辑架构</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-2/" class="prev">第02章_MySQL 的数据目录</a></span> <span class="next"><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-4/">第04章_逻辑架构</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/java-basic/jdbc-core/"><div>
            JDBC 核心技术(JDK21版)
            <!----></div></a> <span class="date">09-24</span></dt></dl><dl><dd>02</dd> <dt><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-0/"><div>
            第00章_写在前面
            <!----></div></a> <span class="date">05-14</span></dt></dl><dl><dd>03</dd> <dt><a href="/java-basic/mysql-from-beginners-to-advanced/advanced/chapter-1/"><div>
            第01章_Linux 下 MySQL 的安装与使用
            <!----></div></a> <span class="date">05-14</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:1214025526@qq.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/coderofmutou" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://gitee.com/ismutou" title="Gitee" target="_blank" class="iconfont icon-gitee"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2024-2025
    <span>bombax | <a href="https://github.com/coderofmutou/coderofmutou.github.io/blob/main/LICENSE" target="_blank">MIT License</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.ca5c989c.js" defer></script><script src="/assets/js/3.f2884e99.js" defer></script><script src="/assets/js/2.81e8b964.js" defer></script><script src="/assets/js/114.6031c0db.js" defer></script>
  </body>
</html>
