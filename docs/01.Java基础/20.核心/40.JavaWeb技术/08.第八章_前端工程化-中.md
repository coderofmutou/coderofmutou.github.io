---
title: ç¬¬å…«ç«  å‰ç«¯å·¥ç¨‹åŒ–-ä¸­
date: 2025-12-11 21:03:39
permalink: /java-basic/java-web/chapter-8/
categories:
  - JavaåŸºç¡€
  - æ ¸å¿ƒ
  - JavaWebæŠ€æœ¯
tags:
  - 
author: 
  name: bombax
  link: https://github.com/coderofmutou
---
# ç¬¬å…«ç«  å‰ç«¯å·¥ç¨‹åŒ–-ä¸­

## äº”ã€Vue3 é€šè¿‡ Vite å®ç°å·¥ç¨‹åŒ–

### 5.1 Vite çš„ä»‹ç»

![1684488376469.png](images/1684488376469.png)

![1684488405011.png](images/1684488405011.png)

> åœ¨æµè§ˆå™¨æ”¯æŒ ES æ¨¡å—ä¹‹å‰ï¼ŒJavaScript å¹¶æ²¡æœ‰æä¾›åŸç”Ÿæœºåˆ¶è®©å¼€å‘è€…ä»¥æ¨¡å—åŒ–çš„æ–¹å¼è¿›è¡Œå¼€å‘ã€‚è¿™ä¹Ÿæ­£æ˜¯æˆ‘ä»¬å¯¹ â€œæ‰“åŒ…â€ è¿™ä¸ªæ¦‚å¿µç†Ÿæ‚‰çš„åŸå› ï¼šä½¿ç”¨å·¥å…·æŠ“å–ã€å¤„ç†å¹¶å°†æˆ‘ä»¬çš„æºç æ¨¡å—ä¸²è”æˆå¯ä»¥åœ¨æµè§ˆå™¨ä¸­è¿è¡Œçš„æ–‡ä»¶ã€‚æ—¶è¿‡å¢ƒè¿ï¼Œæˆ‘ä»¬è§è¯äº†è¯¸å¦‚ [webpack](https://webpack.js.org/ "webpack")ã€[Rollup](https://rollupjs.org/ "Rollup") å’Œ [Parcel](https://parceljs.org/ "Parcel") ç­‰å·¥å…·çš„å˜è¿ï¼Œå®ƒä»¬æå¤§åœ°æ”¹å–„äº†å‰ç«¯å¼€å‘è€…çš„å¼€å‘ä½“éªŒ

+ å½“æˆ‘ä»¬å¼€å§‹æ„å»ºè¶Šæ¥è¶Šå¤§å‹çš„åº”ç”¨æ—¶ï¼Œéœ€è¦å¤„ç†çš„ JavaScript ä»£ç é‡ä¹Ÿå‘ˆæŒ‡æ•°çº§å¢é•¿ã€‚
+ åŒ…å«æ•°åƒä¸ªæ¨¡å—çš„å¤§å‹é¡¹ç›®ç›¸å½“æ™®éã€‚åŸºäº JavaScript å¼€å‘çš„å·¥å…·å°±ä¼šå¼€å§‹é‡åˆ°æ€§èƒ½ç“¶é¢ˆï¼šé€šå¸¸éœ€è¦å¾ˆé•¿æ—¶é—´ï¼ˆç”šè‡³æ˜¯å‡ åˆ†é’Ÿï¼ï¼‰æ‰èƒ½å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼Œå³ä½¿ä½¿ç”¨æ¨¡å—çƒ­æ›¿æ¢ï¼ˆHMRï¼‰ï¼Œæ–‡ä»¶ä¿®æ”¹åçš„æ•ˆæœä¹Ÿéœ€è¦å‡ ç§’é’Ÿæ‰èƒ½åœ¨æµè§ˆå™¨ä¸­åæ˜ å‡ºæ¥ã€‚å¦‚æ­¤å¾ªç¯å¾€å¤ï¼Œè¿Ÿé’çš„åé¦ˆä¼šæå¤§åœ°å½±å“å¼€å‘è€…çš„å¼€å‘æ•ˆç‡å’Œå¹¸ç¦æ„Ÿã€‚

> Vite æ—¨åœ¨åˆ©ç”¨ç”Ÿæ€ç³»ç»Ÿä¸­çš„æ–°è¿›å±•è§£å†³ä¸Šè¿°é—®é¢˜ï¼šæµè§ˆå™¨å¼€å§‹åŸç”Ÿæ”¯æŒ ES æ¨¡å—ï¼Œä¸”è¶Šæ¥è¶Šå¤š JavaScript å·¥å…·ä½¿ç”¨ç¼–è¯‘å‹è¯­è¨€ç¼–å†™ã€‚https://cn.vitejs.dev/guide/why.html å‰ç«¯å·¥ç¨‹åŒ–çš„ä½œç”¨åŒ…æ‹¬ä½†ä¸é™äºä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š

1.  å¿«é€Ÿåˆ›å»ºé¡¹ç›®ï¼šä½¿ç”¨è„šæ‰‹æ¶å¯ä»¥å¿«é€Ÿæ­å»ºé¡¹ç›®åŸºæœ¬æ¡†æ¶ï¼Œé¿å…ä»é›¶å¼€å§‹æ­å»ºé¡¹ç›®çš„é‡å¤åŠ³åŠ¨å’Œç¹çæ“ä½œï¼Œä»è€ŒèŠ‚çœæ—¶é—´å’Œç²¾åŠ›ã€‚
2.  ç»Ÿä¸€çš„å·¥ç¨‹åŒ–è§„èŒƒï¼šå‰ç«¯è„šæ‰‹æ¶å¯ä»¥é¢„è®¾é¡¹ç›®ç›®å½•ç»“æ„ã€ä»£ç è§„èŒƒã€git æäº¤è§„èŒƒç­‰ç»Ÿä¸€çš„å·¥ç¨‹åŒ–è§„èŒƒï¼Œè®©ä¸åŒå¼€å‘è€…åœ¨åŒä¸€ä¸ªé¡¹ç›®ä¸Šç¼–å†™å‡ºé£æ ¼ä¸€è‡´çš„ä»£ç ï¼Œæé«˜åä½œæ•ˆç‡å’Œè´¨é‡ã€‚
3.  ä»£ç æ¨¡æ¿å’Œç»„ä»¶åº“ï¼šå‰ç«¯è„šæ‰‹æ¶å¯ä»¥åŒ…å«ä¸€äº›å¸¸ç”¨çš„ä»£ç æ¨¡æ¿å’Œç»„ä»¶åº“ï¼Œä½¿å¼€å‘è€…åœ¨å®ç°å¸¸è§åŠŸèƒ½æ—¶ä¸å†é‡å¤é€ è½®å­ï¼Œé¿å…å› ä¸ºè½®å­è´¨é‡ä¸é«˜å¸¦æ¥çš„éº»çƒ¦ï¼Œèƒ½å¤Ÿæ›´åŠ ä¸“æ³¨äºé¡¹ç›®çš„ä¸šåŠ¡é€»è¾‘ã€‚
4.  è‡ªåŠ¨åŒ–æ„å»ºå’Œéƒ¨ç½²ï¼šå‰ç«¯è„šæ‰‹æ¶å¯ä»¥è‡ªåŠ¨è¿›è¡Œä»£ç æ‰“åŒ…ã€å‹ç¼©ã€åˆå¹¶ã€ç¼–è¯‘ç­‰å¸¸è§çš„æ„å»ºå·¥ä½œï¼Œå¯ä»¥é€šè¿‡é›†æˆè‡ªåŠ¨åŒ–éƒ¨ç½²è„šæœ¬ï¼Œè‡ªåŠ¨å°†ä»£ç éƒ¨ç½²åˆ°æµ‹è¯•ã€ç”Ÿäº§ç¯å¢ƒç­‰ã€‚

### 5.2 Vite åˆ›å»º Vue3 å·¥ç¨‹åŒ–é¡¹ç›®

#### 5.2.1 Vite+Vue3 é¡¹ç›®çš„åˆ›å»ºã€å¯åŠ¨ã€åœæ­¢

> 1 ä½¿ç”¨å‘½ä»¤è¡Œåˆ›å»ºå·¥ç¨‹

+ åœ¨ç£ç›˜çš„åˆé€‚ä½ç½®ä¸Š,åˆ›å»ºä¸€ä¸ªç©ºç›®å½•ç”¨äºå­˜å‚¨å¤šä¸ªå‰ç«¯é¡¹ç›®
+ ç”¨ vscode æ‰“å¼€è¯¥ç›®å½•
+ åœ¨ vocode ä¸­æ‰“å¼€å‘½ä»¤è¡Œè¿è¡Œå¦‚ä¸‹å‘½ä»¤

```shell
npm create vite@latest
```

+ ç¬¬ä¸€æ¬¡ä½¿ç”¨ vite æ—¶ä¼šæç¤ºä¸‹è½½ vite,è¾“å…¥ y å›è½¦å³å¯,ä¸‹æ¬¡ä½¿ç”¨ vite å°±ä¸ä¼šå‡ºç°äº†

![1687769339457](images/1687769339457.png)

+ æ³¨æ„ï¼š é€‰æ‹© vue+JavaScript é€‰é¡¹å³å¯

> 2 å®‰è£…é¡¹ç›®æ‰€éœ€ä¾èµ–

+ cd è¿›å…¥åˆšåˆšåˆ›å»ºçš„é¡¹ç›®ç›®å½•
+ npm install å‘½ä»¤å®‰è£…åŸºç¡€ä¾èµ–

``` shell
cd ./vue3-demo1
npm install
```

> 3 å¯åŠ¨é¡¹ç›®

+ æŸ¥çœ‹é¡¹ç›®ä¸‹çš„ package.json

```json
{
  "name": "vue3-demo1",
  "private": true,
  "version": "0.0.0",
  "type": "module",
  "scripts": {
    "dev": "vite",
    "build": "vite build",
    "preview": "vite preview"
  },
  "dependencies": {
    "bootstrap": "^5.2.3",
    "sass": "^1.62.1",
    "vue": "^3.2.47"
  },
  "devDependencies": {
    "@vitejs/plugin-vue": "^4.1.0",
    "vite": "^4.3.2"
  }
}
```
``` shell
npm run dev
```

![image_PHNwnXnsWv.png](images/image_PHNwnXnsWv.png)

> 5 åœæ­¢é¡¹ç›®

+ å‘½ä»¤è¡Œä¸Š ctrl+c

#### 5.2.2 Vite+Vue3 é¡¹ç›®çš„ç›®å½•ç»“æ„

> 1.ä¸‹é¢æ˜¯ Vite é¡¹ç›®ç»“æ„å’Œå…¥å£çš„è¯¦ç»†è¯´æ˜ï¼š

![1684489112904](images/1684489112904.png)

-   public/ ç›®å½•ï¼šç”¨äºå­˜æ”¾ä¸€äº›å…¬å…±èµ„æºï¼Œå¦‚ HTML æ–‡ä»¶ã€å›¾åƒã€å­—ä½“ç­‰ï¼Œè¿™äº›èµ„æºä¼šè¢«ç›´æ¥å¤åˆ¶åˆ°æ„å»ºå‡ºçš„ç›®æ ‡ç›®å½•ä¸­ã€‚
-   src/ ç›®å½•ï¼šå­˜æ”¾é¡¹ç›®çš„æºä»£ç ï¼ŒåŒ…æ‹¬ JavaScriptã€CSSã€Vue ç»„ä»¶ã€å›¾åƒå’Œå­—ä½“ç­‰èµ„æºã€‚åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œè¿™äº›æ–‡ä»¶ä¼šè¢« Vite å®æ—¶ç¼–è¯‘å’Œå¤„ç†ï¼Œå¹¶åœ¨æµè§ˆå™¨ä¸­è¿›è¡Œå®æ—¶é¢„è§ˆå’Œè°ƒè¯•ã€‚ä»¥ä¸‹æ˜¯ src å†…éƒ¨åˆ’åˆ†å»ºè®®ï¼š
    1.  `assets/` ç›®å½•ï¼šç”¨äºå­˜æ”¾ä¸€äº›é¡¹ç›®ä¸­ç”¨åˆ°çš„é™æ€èµ„æºï¼Œå¦‚å›¾ç‰‡ã€å­—ä½“ã€æ ·å¼æ–‡ä»¶ç­‰ã€‚
    2.  `components/` ç›®å½•ï¼šç”¨äºå­˜æ”¾ç»„ä»¶ç›¸å…³çš„æ–‡ä»¶ã€‚ç»„ä»¶æ˜¯ä»£ç å¤ç”¨çš„ä¸€ç§æ–¹å¼ï¼Œç”¨äºæŠ½è±¡å‡ºä¸€ä¸ªå¯å¤ç”¨çš„ UI éƒ¨ä»¶ï¼Œæ–¹ä¾¿åœ¨ä¸åŒçš„åœºæ™¯ä¸­è¿›è¡Œé‡å¤ä½¿ç”¨ã€‚
    3.  `layouts/` ç›®å½•ï¼šç”¨äºå­˜æ”¾å¸ƒå±€ç»„ä»¶çš„æ–‡ä»¶ã€‚å¸ƒå±€ç»„ä»¶é€šå¸¸è´Ÿè´£æ•´ä¸ªåº”ç”¨ç¨‹åºçš„æ•´ä½“å¸ƒå±€ï¼Œå¦‚å¤´éƒ¨ã€åº•éƒ¨ã€å¯¼èˆªèœå•ç­‰ã€‚
    4.  `pages/` ç›®å½•ï¼šç”¨äºå­˜æ”¾é¡µé¢çº§åˆ«çš„ç»„ä»¶æ–‡ä»¶ï¼Œé€šå¸¸æ˜¯è·¯ç”±å¯¹åº”çš„ç»„ä»¶æ–‡ä»¶ã€‚åœ¨è¿™ä¸ªç›®å½•ä¸‹ï¼Œå¯ä»¥åˆ›å»ºå¯¹åº”çš„æ–‡ä»¶å¤¹ï¼Œç”¨äºå­˜å‚¨ä¸åŒçš„é¡µé¢ç»„ä»¶ã€‚
    5.  `plugins/` ç›®å½•ï¼šç”¨äºå­˜æ”¾ Vite æ’ä»¶ç›¸å…³çš„æ–‡ä»¶ï¼Œå¯ä»¥æŒ‰éœ€åŠ è½½ä¸åŒçš„æ’ä»¶æ¥å®ç°ä¸åŒçš„åŠŸèƒ½ï¼Œå¦‚è‡ªåŠ¨åŒ–æµ‹è¯•ã€ä»£ç å‹ç¼©ç­‰ã€‚
    6.  `router/` ç›®å½•ï¼šç”¨äºå­˜æ”¾ Vue.js çš„è·¯ç”±é…ç½®æ–‡ä»¶ï¼Œè´Ÿè´£ç®¡ç†è§†å›¾å’Œ URL ä¹‹é—´çš„æ˜ å°„å…³ç³»ï¼Œæ–¹ä¾¿å®ç°é¡µé¢ä¹‹é—´çš„è·³è½¬å’Œæ•°æ®ä¼ é€’ã€‚
    7.  `store/` ç›®å½•ï¼šç”¨äºå­˜æ”¾ Vuex çŠ¶æ€ç®¡ç†ç›¸å…³çš„æ–‡ä»¶ï¼Œè´Ÿè´£ç®¡ç†åº”ç”¨ç¨‹åºä¸­çš„æ•°æ®å’ŒçŠ¶æ€ï¼Œæ–¹ä¾¿ç»Ÿä¸€ç®¡ç†å’Œå…±äº«æ•°æ®ï¼Œæé«˜å¼€å‘æ•ˆç‡ã€‚
    8.  `utils/` ç›®å½•ï¼šç”¨äºå­˜æ”¾ä¸€äº›é€šç”¨çš„å·¥å…·å‡½æ•°ï¼Œå¦‚æ—¥æœŸå¤„ç†å‡½æ•°ã€å­—ç¬¦ä¸²æ“ä½œå‡½æ•°ç­‰ã€‚
-   vite.config.js æ–‡ä»¶ï¼šVite çš„é…ç½®æ–‡ä»¶ï¼Œå¯ä»¥é€šè¿‡è¯¥æ–‡ä»¶é…ç½®é¡¹ç›®çš„å‚æ•°ã€æ’ä»¶ã€æ‰“åŒ…ä¼˜åŒ–ç­‰ã€‚è¯¥æ–‡ä»¶å¯ä»¥ä½¿ç”¨ CommonJS æˆ– ES6 æ¨¡å—çš„è¯­æ³•è¿›è¡Œé…ç½®ã€‚
-   package.json æ–‡ä»¶ï¼šæ ‡å‡†çš„ Node.js é¡¹ç›®é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«äº†é¡¹ç›®çš„åŸºæœ¬ä¿¡æ¯å’Œä¾èµ–å…³ç³»ã€‚å…¶ä¸­å¯ä»¥é€šè¿‡ scripts å­—æ®µå®šä¹‰å‡ ä¸ªå‘½ä»¤ï¼Œå¦‚ devã€buildã€serve ç­‰ï¼Œç”¨äºå¯åŠ¨å¼€å‘ã€æ„å»ºå’Œå¯åŠ¨æœ¬åœ°æœåŠ¡å™¨ç­‰æ“ä½œã€‚
-   Vite é¡¹ç›®çš„å…¥å£ä¸º src/main.js æ–‡ä»¶ï¼Œè¿™æ˜¯ Vue.js åº”ç”¨ç¨‹åºçš„å¯åŠ¨æ–‡ä»¶ï¼Œä¹Ÿæ˜¯æ•´ä¸ªå‰ç«¯åº”ç”¨ç¨‹åºçš„å…¥å£æ–‡ä»¶ã€‚åœ¨è¯¥æ–‡ä»¶ä¸­ï¼Œé€šå¸¸ä¼šå¼•å…¥ Vue.js åŠå…¶ç›¸å…³æ’ä»¶å’Œç»„ä»¶ï¼ŒåŒæ—¶ä¼šåˆ›å»º Vue å®ä¾‹ï¼ŒæŒ‚è½½åˆ° HTML é¡µé¢ä¸ŠæŒ‡å®šçš„ DOM å…ƒç´ ä¸­ã€‚

>  2.vite çš„è¿è¡Œç•Œé¢

+ åœ¨å®‰è£…äº† Vite çš„é¡¹ç›®ä¸­ï¼Œå¯ä»¥åœ¨ npm scripts ä¸­ä½¿ç”¨ `vite` å¯æ‰§è¡Œæ–‡ä»¶ï¼Œæˆ–è€…ç›´æ¥ä½¿ç”¨ `npx vite` è¿è¡Œå®ƒã€‚ä¸‹é¢æ˜¯é€šè¿‡è„šæ‰‹æ¶åˆ›å»ºçš„ Vite é¡¹ç›®ä¸­é»˜è®¤çš„ npm scriptsï¼š(package.json)

```json
{
  "scripts": {
    "dev": "vite", // å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼Œåˆ«åï¼š`vite dev`ï¼Œ`vite serve`
    "build": "vite build", // ä¸ºç”Ÿäº§ç¯å¢ƒæ„å»ºäº§ç‰©
    "preview": "vite preview" // æœ¬åœ°é¢„è§ˆç”Ÿäº§æ„å»ºäº§ç‰©
  }
}
```
+ è¿è¡Œè®¾ç½®ç«¯å£å·ï¼š(vite.config.js)

```javascript
//ä¿®æ”¹viteé¡¹ç›®é…ç½®æ–‡ä»¶ vite.config.js
export default defineConfig({
  plugins: [vue()],
  server:{
    port:3000
  }
})
```

#### 5.2.3 Vite+Vue3 é¡¹ç›®ç»„ä»¶(SFC å…¥é—¨)

> ä»€ä¹ˆæ˜¯ VUE çš„ç»„ä»¶?

+ ä¸€ä¸ªé¡µé¢ä½œä¸ºæ•´ä½“,æ˜¯ç”±å¤šä¸ªéƒ¨åˆ†ç»„æˆçš„,æ¯ä¸ªéƒ¨åˆ†åœ¨è¿™é‡Œå°±å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªç»„ä»¶
+ æ¯ä¸ª.vue æ–‡ä»¶å°±å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªç»„ä»¶,å¤šä¸ª.vue æ–‡ä»¶å¯ä»¥æ„æˆä¸€ä¸ªæ•´ä½“é¡µé¢
+ ç»„ä»¶åŒ–ç»™æˆ‘ä»¬å¸¦æ¥çš„å¦ä¸€ä¸ªå¥½å¤„å°±æ˜¯ç»„ä»¶çš„å¤ç”¨å’Œç»´æŠ¤éå¸¸çš„æ–¹ä¾¿

![image_uTNSasJcFd.png](images/image_uTNSasJcFd.png)

> ä»€ä¹ˆæ˜¯.vue æ–‡ä»¶?

+ ä¼ ç»Ÿçš„é¡µé¢æœ‰.html æ–‡ä»¶.css æ–‡ä»¶å’Œ.js æ–‡ä»¶ä¸‰ä¸ªæ–‡ä»¶ç»„æˆ(å¤šæ–‡ä»¶ç»„ä»¶)
+ vue å°†è¿™æ–‡ä»¶åˆå¹¶æˆä¸€ä¸ª.vue æ–‡ä»¶(Single-File Componentï¼Œç®€ç§° SFC,å•æ–‡ä»¶ç»„ä»¶)

+ .vue æ–‡ä»¶å¯¹ js/css/html ç»Ÿä¸€å°è£…,è¿™æ˜¯ VUE ä¸­çš„æ¦‚å¿µ è¯¥æ–‡ä»¶ç”±ä¸‰ä¸ªéƒ¨åˆ†ç»„æˆ    `<script>    <template>    <style>`
    + template æ ‡ç­¾     ä»£è¡¨ç»„ä»¶çš„ html éƒ¨åˆ†ä»£ç 	ä»£æ›¿ä¼ ç»Ÿçš„.html æ–‡ä»¶
    + script æ ‡ç­¾           ä»£è¡¨ç»„ä»¶çš„ js ä»£ç  ä»£æ›¿ä¼ ç»Ÿçš„.js æ–‡ä»¶
    + style æ ‡ç­¾            ä»£è¡¨ç»„ä»¶çš„ css æ ·å¼ä»£ç  ä»£æ›¿ä¼ ç»Ÿçš„.css æ–‡ä»¶

> å·¥ç¨‹åŒ– vue é¡¹ç›®å¦‚ä½•ç»„ç»‡è¿™äº›ç»„ä»¶?

+ index.html æ˜¯é¡¹ç›®çš„å…¥å£,å…¶ä¸­ `<div id ='app'></div>`æ˜¯ç”¨äºæŒ‚è½½æ‰€æœ‰ç»„å»ºçš„å…ƒç´ 
+ index.html ä¸­çš„ script æ ‡ç­¾å¼•å…¥äº†ä¸€ä¸ª main.js æ–‡ä»¶,å…·ä½“çš„æŒ‚è½½è¿‡ç¨‹åœ¨ main.js ä¸­æ‰§è¡Œ
+ main.js æ˜¯ vue å·¥ç¨‹ä¸­éå¸¸é‡è¦çš„æ–‡ä»¶,ä»–å†³å®šè¿™é¡¹ç›®ä½¿ç”¨å“ªäº›ä¾èµ–,å¯¼å…¥çš„ç¬¬ä¸€ä¸ªç»„ä»¶
+ App.vue æ˜¯ vue ä¸­çš„æ ¸å¿ƒç»„ä»¶,æ‰€æœ‰çš„å…¶ä»–ç»„ä»¶éƒ½è¦é€šè¿‡è¯¥ç»„ä»¶è¿›è¡Œå¯¼å…¥,è¯¥ç»„ä»¶é€šè¿‡è·¯ç”±å¯ä»¥æ§åˆ¶é¡µé¢çš„åˆ‡æ¢

![1684912274904](images/1684912274904.png)

#### 5.2.4 Vite+Vue3 å“åº”å¼å…¥é—¨å’Œ setup å‡½æ•°

> 1 ä½¿ç”¨ vite åˆ›å»ºä¸€ä¸ª vue+JavaScript é¡¹ç›®

```shell
npm create vite
npm install 
npm run dev
```

+ App.vue

```html
<script>
    //å­˜å‚¨vueé¡µé¢é€»è¾‘jsä»£ç 
</script>

<template>
    <!-- é¡µé¢çš„æ ·å¼çš„æ˜¯htmlä»£ç -->
</template>

<style scoped>
    /** å­˜å‚¨çš„æ˜¯cssä»£ç ! <style scoped> æ˜¯ Vue.js å•æ–‡ä»¶ç»„ä»¶ä¸­ç”¨äºè®¾ç½®ç»„ä»¶æ ·å¼çš„ä¸€ç§æ–¹å¼ã€‚
    å®ƒçš„å«ä¹‰æ˜¯å°†æ ·å¼å±€é™åœ¨å½“å‰ç»„ä»¶ä¸­ï¼Œä¸å¯¹å…¨å±€æ ·å¼é€ æˆå½±å“ã€‚ */
</style>
```
> 2 vue3 å“åº”å¼æ•°æ®å…¥é—¨

```html
<script type="module">
    //å­˜å‚¨vueé¡µé¢é€»è¾‘jsä»£ç 
    import {ref} from 'vue'
    export default{
        setup(){
            //éå“åº”å¼æ•°æ®: ä¿®æ”¹åVUEä¸ä¼šæ›´æ–°DOM
            //å“åº”å¼æ•°æ®:   ä¿®æ”¹åVUEä¼šæ›´æ–°DOM
            //VUE2ä¸­æ•°æ®é»˜è®¤æ˜¯å“åº”å¼çš„
            //VUE3ä¸­æ•°æ®è¦ç»è¿‡refæˆ–è€…reactiveå¤„ç†åæ‰æ˜¯å“åº”å¼çš„
            //refæ˜¯VUE3æ¡†æ¶æä¾›çš„ä¸€ä¸ªå‡½æ•°,éœ€è¦å¯¼å…¥
            //let counter = 1
            //refå¤„ç†çš„å“åº”å¼æ•°æ®åœ¨jsç¼–ç ä¿®æ”¹çš„æ—¶å€™éœ€è¦é€šè¿‡.valueæ“ä½œ
            //refå“åº”å¼æ•°æ®åœ¨ç»‘å®šåˆ°htmlä¸Šæ—¶ä¸éœ€è¦.value

            let counter = ref(1)
            function increase(){
                // é€šè¿‡.valueä¿®æ”¹å“åº”å¼æ•°æ®
                counter.value++
            }
            function decrease(){
                counter.value--
            }
            return {
                counter,
                increase,
                decrease
            }
        }
    }
</script>
<template>
    <div>
      <button @click="decrease()">-</button>
      {{ counter }}
      <button @click="increase()">+</button>
    </div>
    
</template>

<style scoped>
    button{
        border: 1px solid red;
    }
</style>
```

> 3 vue3 setup å‡½æ•°å’Œè¯­æ³•ç³–

+ ä½ç½®ï¼šsrc/App.vue

```vue
<script type="module" setup>
   
/* <script type="module" setup> é€šè¿‡setupå…³é”®å­—
å¯ä»¥çœç•¥ export default {setup(){   return{}}}è¿™äº›å†—ä½™çš„è¯­æ³•ç»“æ„ */
    import {ref} from 'vue'
    // å®šä¹‰å“åº”å¼æ•°æ®
    let counter = ref(1)
    // å®šä¹‰å‡½æ•°
    function increase(){
        counter.value++
    }
    function decrease(){
        counter.value--
    }
    
</script>
<template>
    <div>
      <button @click="decrease()">-</button>
      {{ counter }}
      <button @click="increase()">+</button>
    </div>
    
</template>

<style scoped>
    button{
        border: 1px solid red;
    }
</style>

```

#### 5.2.5 Vite+Vue3 å…³äºæ ·å¼çš„å¯¼å…¥æ–¹å¼

1.  å…¨å±€å¼•å…¥ main.js
    ```javascript
    import './style/reset.css' //ä¹¦å†™å¼•å…¥çš„èµ„æºçš„ç›¸å¯¹è·¯å¾„å³å¯ï¼
    ```
2.  vue æ–‡ä»¶ script ä»£ç å¼•å…¥
    ```javascript
    import './style/reset.css'
    ```
3.  Vue æ–‡ä»¶ style ä»£ç å¼•å…¥
    ```javascript
    @import './style/reset.css'
    ```

#### 5.2.6 å…³äº JS å’Œ TS é€‰æ‹©çš„é—®é¢˜

> TS æ˜¯ JS çš„ä¸€ä¸ªè¶…é›†,ä½¿ç”¨ TS ä¹‹å,JS çš„è¯­æ³•æ›´åŠ çš„åƒ JAVA,å®é™…å¼€å‘ä¸­ç”¨çš„ç¡®å®æ›´å¤š,é‚£ä¹ˆè¿™é‡Œä¸ºä»€ä¹ˆæˆ‘ä»¬æ²¡æœ‰ç«‹å³ä½¿ç”¨ TS è¿›è¡Œå¼€å‘,åŸå› å¦‚ä¸‹

1 ä¸ºäº†é™ä½éš¾åº¦,æé«˜å‰ç«¯å·¥ç¨‹åŒ–çš„æ•ˆç‡

2 å¯¹äºå­¦ JAVA çš„æˆ‘ä»¬æ¥è¯´,å­¦ä¹  TS éå¸¸å®¹æ˜“,ä½†æ˜¯è¿˜æ˜¯éœ€è¦ä¸€äº›æ—¶é—´

3 TS ä¸æ˜¯éå­¦ä¸å¯,ä¸ç”¨ TS ä»ç„¶å¯ä»¥æ­£å¸¸å¼€å‘å·¥ç¨‹åŒ–çš„å‰ç«¯é¡¹ç›®

4  å°šç¡…è°·å·²ç»å‘å¸ƒäº† TS çš„ä¸“é¡¹è¯¾ç¨‹,è¯·å¤§å®¶åœ¨ B ç«™ä¸Šè‡ªè¡Œæœç´¢ "å°šç¡…è°·  TS"

5  å»ºè®®å¤§å®¶å…ˆå­¦å®Œå®Œæ•´çš„å‰ç«¯å·¥ç¨‹åŒ–å†…å®¹,ç„¶åå†æ ¹æ®éœ€æ±‚å•ç‹¬å­¦ä¹  TS å³å¯

## å…­ã€Vue3 è§†å›¾æ¸²æŸ“æŠ€æœ¯

### 6.1 æ¨¡ç‰ˆè¯­æ³•

> Vue ä½¿ç”¨ä¸€ç§åŸºäº HTML çš„æ¨¡æ¿è¯­æ³•ï¼Œä½¿æˆ‘ä»¬èƒ½å¤Ÿå£°æ˜å¼åœ°å°†å…¶ç»„ä»¶å®ä¾‹çš„æ•°æ®ç»‘å®šåˆ°å‘ˆç°çš„ DOM ä¸Šã€‚æ‰€æœ‰çš„ Vue æ¨¡æ¿éƒ½æ˜¯è¯­æ³•å±‚é¢åˆæ³•çš„ HTMLï¼Œå¯ä»¥è¢«ç¬¦åˆè§„èŒƒçš„æµè§ˆå™¨å’Œ HTML è§£æå™¨è§£æã€‚åœ¨åº•å±‚æœºåˆ¶ä¸­ï¼ŒVue ä¼šå°†æ¨¡æ¿ç¼–è¯‘æˆé«˜åº¦ä¼˜åŒ–çš„ JavaScript ä»£ç ã€‚ç»“åˆå“åº”å¼ç³»ç»Ÿï¼Œå½“åº”ç”¨çŠ¶æ€å˜æ›´æ—¶ï¼ŒVue èƒ½å¤Ÿæ™ºèƒ½åœ°æ¨å¯¼å‡ºéœ€è¦é‡æ–°æ¸²æŸ“çš„ç»„ä»¶çš„æœ€å°‘æ•°é‡ï¼Œå¹¶åº”ç”¨æœ€å°‘çš„ DOM æ“ä½œã€‚

#### 6.1.1 æ’å€¼è¡¨è¾¾å¼å’Œæ–‡æœ¬æ¸²æŸ“

> æ’å€¼è¡¨è¾¾å¼:æœ€åŸºæœ¬çš„æ•°æ®ç»‘å®šå½¢å¼æ˜¯æ–‡æœ¬æ’å€¼ï¼Œå®ƒä½¿ç”¨çš„æ˜¯â€œMustacheâ€è¯­æ³• ,å³åŒå¤§æ‹¬å·`{{}}`

+ æ’å€¼è¡¨è¾¾å¼æ˜¯å°†æ•°æ®æ¸²æŸ“åˆ°å…ƒç´ çš„æŒ‡å®šä½ç½®çš„æ‰‹æ®µä¹‹ä¸€
+ æ’å€¼è¡¨è¾¾å¼ä¸ç»å¯¹ä¾èµ–æ ‡ç­¾,å…¶ä½ç½®ç›¸å¯¹è‡ªç”±
+ æ’å€¼è¡¨è¾¾å¼ä¸­æ”¯æŒ javascript çš„è¿ç®—è¡¨è¾¾å¼
+ æ’å€¼è¡¨è¾¾å¼ä¸­ä¹Ÿæ”¯æŒå‡½æ•°çš„è°ƒç”¨

``` html
<script setup type="module">
  let msg ="hello vue3"
  let getMsg= ()=>{
    return 'hello vue3 message'
  }
  let age = 19
  let bee = 'èœœ èœ‚'
  // è´­ç‰©è½¦
  const carts = [{name:'å¯ä¹',price:3,number:10},{name:'è–¯ç‰‡',price:6,number:8}];
  //è®¡ç®—è´­ç‰©è½¦æ€»é‡‘é¢
  function compute(){
      let count = 0;
      for(let index in carts){
          count += carts[index].price*carts[index].number;
      }
      return count;
  }
</script>

<template>
  <div>
    <h1>{{ msg }}</h1>
    msgçš„å€¼ä¸º: {{ msg }} <br>
    getMsgè¿”å›çš„å€¼ä¸º:{{ getMsg() }}  <br>
    æ˜¯å¦æˆå¹´: {{ age>=18?'true':'false' }} <br>
    åè½¬: {{ bee.split(' ').reverse().join('-') }} <br>
    è´­ç‰©è½¦æ€»é‡‘é¢: {{ compute() }} <br/>
    è´­ç‰©è½¦æ€»é‡‘é¢: {{carts[0].price*carts[0].number + carts[1].price*carts[1].number}} <br>
  </div>
</template>

<style scoped>

</style>
```

> ä¸ºäº†æ¸²æŸ“åŒæ ‡ä¸­çš„æ–‡æœ¬,æˆ‘ä»¬ä¹Ÿå¯ä»¥é€‰æ‹©ä½¿ç”¨`v-text`å’Œ`v-html`å‘½ä»¤

+ v-*** è¿™ç§å†™æ³•çš„æ–¹å¼ä½¿ç”¨çš„æ˜¯ vue çš„å‘½ä»¤
+ v-***çš„å‘½ä»¤å¿…é¡»ä¾èµ–å…ƒç´ ,å¹¶ä¸”è¦å†™åœ¨å…ƒç´ çš„å¼€å§‹æ ‡ç­¾ä¸­
+ v-***æŒ‡ä»¤æ”¯æŒ ES6 ä¸­çš„å­—ç¬¦ä¸²æ¨¡æ¿
+ æ’å€¼è¡¨è¾¾å¼ä¸­æ”¯æŒ javascript çš„è¿ç®—è¡¨è¾¾å¼
+ æ’å€¼è¡¨è¾¾å¼ä¸­ä¹Ÿæ”¯æŒå‡½æ•°çš„è°ƒç”¨
+ v-text å¯ä»¥å°†æ•°æ®æ¸²æŸ“æˆåŒæ ‡ç­¾ä¸­é—´çš„æ–‡æœ¬,ä½†æ˜¯ä¸è¯†åˆ« html å…ƒç´ ç»“æ„çš„æ–‡æœ¬
+ v-html å¯ä»¥å°†æ•°æ®æ¸²æŸ“æˆåŒæ ‡ç­¾ä¸­é—´çš„æ–‡æœ¬,è¯†åˆ« html å…ƒç´ ç»“æ„çš„æ–‡æœ¬

``` html
<script setup type="module">
  let msg ='hello vue3'
  let getMsg= ()=>{
    return msg
  }
  let age = 19
  let bee = 'èœœ èœ‚'
  let redMsg ='<font color=\'red\'>msg</font>'
  let greenMsg =`<font color=\'green\'>${msg}</font>`
</script>

<template>
  <div>
    <span v-text='msg'></span> <br>
    <span v-text='redMsg'></span> <br>
    <span v-text='getMsg()'></span> <br>
    <span v-text='age>18?"æˆå¹´":"æœªæˆå¹´"'></span> <br>
    <span v-text='bee.split(" ").reverse().join("-")'></span> <br>
    <span v-html='msg'></span> <br>
    <span v-html='redMsg'></span> <br>
    <span v-html='greenMsg'></span> <br>
    <span v-html="`<font color='green'>${msg}</font>`"></span> <br>
  </div>
</template>

<style scoped>

</style>
```

#### 6.1.2 Attribute å±æ€§æ¸²æŸ“

> æƒ³è¦æ¸²æŸ“ä¸€ä¸ªå…ƒç´ çš„ attributeï¼Œåº”è¯¥ä½¿ç”¨ `v-bind`æŒ‡ä»¤

+ ç”±äºæ’å€¼è¡¨è¾¾å¼ä¸èƒ½ç›´æ¥æ”¾åœ¨æ ‡ç­¾çš„å±æ€§ä¸­,æ‰€æœ‰è¦æ¸²æŸ“å…ƒç´ çš„å±æ€§å°±åº”è¯¥ä½¿ç”¨ v-bind
+ v-bind å¯ä»¥ç”¨äºæ¸²æŸ“ä»»ä½•å…ƒç´ çš„å±æ€§,è¯­æ³•ä¸º `v-bind:å±æ€§å='æ•°æ®å'`, å¯ä»¥ç®€å†™ä¸º `:å±æ€§å='æ•°æ®å'`

``` html
<script setup type="module">
  const data = {
    name:'å°šç¡…è°·',
    url:"http://www.atguigu.com",
    logo:"http://www.atguigu.com/images/index_new/logo.png"
  }
</script>

<template>
  <div>
    <a 
      v-bind:href='data.url' 
      target="_self">
      <img 
        :src="data.logo" 
        :title="data.name">
      <br>
      <input type="button" 
             :value="`ç‚¹å‡»è®¿é—®${data.name}`">
    </a>
  </div>
</template>

<style scoped>
</style>
```

#### 6.1.3 äº‹ä»¶çš„ç»‘å®š

> æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `v-on` æ¥ç›‘å¬ DOM äº‹ä»¶ï¼Œå¹¶åœ¨äº‹ä»¶è§¦å‘æ—¶æ‰§è¡Œå¯¹åº”çš„ Vue çš„ JavaScript ä»£ç ã€‚

+ ç”¨æ³•ï¼š`v-on:click="handler"` æˆ–ç®€å†™ä¸º `@click="handler"`
+ vue ä¸­çš„äº‹ä»¶å=åŸç”Ÿäº‹ä»¶åå»æ‰`on` å‰ç¼€   å¦‚:`onClick --> click`
+ handler çš„å€¼å¯ä»¥æ˜¯æ–¹æ³•äº‹ä»¶å¤„ç†å™¨,ä¹Ÿå¯ä»¥æ˜¯å†…è”äº‹ä»¶å¤„ç†å™¨
+ ç»‘å®šäº‹ä»¶æ—¶,å¯ä»¥é€šè¿‡ä¸€äº›ç»‘å®šçš„ä¿®é¥°ç¬¦,å¸¸è§çš„äº‹ä»¶ä¿®é¥°ç¬¦å¦‚ä¸‹
    + `.onceï¼šåªè§¦å‘ä¸€æ¬¡äº‹ä»¶ã€‚[é‡ç‚¹]`
    + `.preventï¼šé˜»æ­¢é»˜è®¤äº‹ä»¶ã€‚[é‡ç‚¹]`
    + .stopï¼šé˜»æ­¢äº‹ä»¶å†’æ³¡ã€‚
    + .captureï¼šä½¿ç”¨äº‹ä»¶æ•è·æ¨¡å¼è€Œä¸æ˜¯å†’æ³¡æ¨¡å¼ã€‚
    + .selfï¼šåªåœ¨äº‹ä»¶å‘é€è€…è‡ªèº«è§¦å‘æ—¶æ‰è§¦å‘äº‹ä»¶ã€‚

``` html
<script setup type="module">
  import {ref} from 'vue'
  // å“åº”å¼æ•°æ® å½“å‘ç”Ÿå˜åŒ–æ—¶,ä¼šè‡ªåŠ¨æ›´æ–° domæ ‘
  let count=ref(0)
  let addCount= ()=>{
    count.value++
  }
  let incrCount= (event)=>{
    count.value++
    // é€šè¿‡äº‹ä»¶å¯¹è±¡é˜»æ­¢ç»„ä»¶çš„é»˜è®¤è¡Œä¸º
    event.preventDefault();
    
  }
</script>

<template>
  <div>
    <h1>countçš„å€¼æ˜¯:{{ count }}</h1>
    <!-- æ–¹æ³•äº‹ä»¶å¤„ç†å™¨ -->
    <button v-on:click="addCount()">addCount</button> <br>
    <!-- å†…è”äº‹ä»¶å¤„ç†å™¨ -->
    <button @click="count++">incrCount</button> <br>
    <!-- äº‹ä»¶ä¿®é¥°ç¬¦ once åªç»‘å®šäº‹ä»¶ä¸€æ¬¡ -->
    <button @click.once="count++">addOnce</button> <br>
    <!-- äº‹ä»¶ä¿®é¥°ç¬¦ prevent é˜»æ­¢ç»„ä»¶çš„é»˜è®¤è¡Œä¸º -->
    <a href="http://www.atguigu.com" target="_blank" @click.prevent="count++">prevent</a> <br>
    <!-- åŸç”Ÿjsæ–¹å¼é˜»æ­¢ç»„ä»¶é»˜è®¤è¡Œä¸º (æ¨è) -->
    <a href="http://www.atguigu.com" target="_blank" @click="incrCount($event)">prevent</a> <br>
  </div>
</template>

<style scoped>

</style>
```

### 6.2 å“åº”å¼åŸºç¡€

>  æ­¤å¤„çš„å“åº”å¼æ˜¯æŒ‡  : æ•°æ®æ¨¡å‹å‘ç”Ÿå˜åŒ–æ—¶,è‡ªåŠ¨æ›´æ–° DOM æ ‘å†…å®¹,é¡µé¢ä¸Šæ˜¾ç¤ºçš„å†…å®¹ä¼šè¿›è¡ŒåŒæ­¥å˜åŒ–,vue3 çš„æ•°æ®æ¨¡å‹ä¸æ˜¯è‡ªåŠ¨å“åº”å¼çš„,éœ€è¦æˆ‘ä»¬åšä¸€äº›ç‰¹æ®Šçš„å¤„ç†

#### 6.2.1 å“åº”å¼éœ€æ±‚æ¡ˆä¾‹

> éœ€æ±‚ï¼šå®ç° +  - æŒ‰é’®,å®ç°æ•°å­—åŠ ä¸€å‡ä¸€

```html
<script type="module" setup>
    let counter = 0;
    function show(){
        alert(counter);
    }
</script>

<template>
  <div>
    <button @click="counter--">-</button> 
    {{ counter }} 
    <button @click="counter++">+</button>
    <hr>
    <!-- æ­¤æ¡ˆä¾‹,æˆ‘ä»¬å‘ç°counterå€¼,ä¼šæ”¹å˜,ä½†æ˜¯é¡µé¢ä¸æ”¹å˜! é»˜è®¤Vue3çš„æ•°æ®æ˜¯éå“åº”å¼çš„!-->
    <button @click="show()">æ˜¾ç¤ºcounterå€¼</button>
   </div>
</template> 

<style scoped>

</style>

```

#### 6.2.2 å“åº”å¼å®ç°å…³é”®å­— ref

> `ref` å¯ä»¥å°†ä¸€ä¸ªåŸºæœ¬ç±»å‹çš„æ•°æ®ï¼ˆå¦‚å­—ç¬¦ä¸²ï¼Œæ•°å­—ç­‰ï¼‰è½¬æ¢ä¸ºä¸€ä¸ªå“åº”å¼å¯¹è±¡ã€‚ `ref` åªèƒ½åŒ…è£¹å•ä¸€å…ƒç´ 

```html
<script type="module" setup>
    /* ä»vueä¸­å¼•å…¥refæ–¹æ³• */
    import {ref} from 'vue'
    let counter = ref(0);
    function show(){
        alert(counter.value);
    }
    /* å‡½æ•°ä¸­è¦æ“ä½œrefå¤„ç†è¿‡çš„æ•°æ®,éœ€è¦é€šè¿‡.valueå½¢å¼ */
    let decr = () =>{
      counter.value--;
    }
    let incr = () =>{
      counter.value++;
    }
</script>

<template>
  <div>
    <button @click="counter--">-</button> 
    <button @click="decr()">-</button> 
    {{ counter }} 
    <button @click="counter++">+</button>
    <button @click="incr()">+</button> 
    <hr>
    <button @click="show()">æ˜¾ç¤ºcounterå€¼</button>
   </div>
</template> 

<style scoped>

</style>
```

+ åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ `ref` åŒ…è£¹äº†ä¸€ä¸ªæ•°å­—ï¼Œåœ¨ä»£ç ä¸­ç»™è¿™ä¸ªæ•°å­—åŠ  1 åï¼Œè§†å›¾ä¹Ÿä¼šè·Ÿç€åŠ¨æ€æ›´æ–°ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç”±äºä½¿ç”¨äº† `ref`ï¼Œå› æ­¤éœ€è¦åœ¨è®¿é—®è¯¥å¯¹è±¡æ—¶ä½¿ç”¨ `.value` æ¥è·å–å…¶å®é™…å€¼ã€‚

#### 6.2.3 å“åº”å¼å®ç°å…³é”®å­— reactive

> æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ [reactive()](https://cn.vuejs.org/api/reactivity-core.html#reactive "reactive()") å‡½æ•°åˆ›å»ºä¸€ä¸ªå“åº”å¼å¯¹è±¡æˆ–æ•°ç»„ï¼š

```html
<script type="module" setup>
    /* ä»vueä¸­å¼•å…¥reactiveæ–¹æ³• */
    import {ref,reactive} from 'vue'
    let data = reactive({
      counter:0
    })
    function show(){
        alert(data.counter);
    }
    /* å‡½æ•°ä¸­è¦æ“ä½œreactiveå¤„ç†è¿‡çš„æ•°æ®,éœ€è¦é€šè¿‡ å¯¹è±¡å.å±æ€§åçš„æ–¹å¼ */
    let decr = () =>{
      data.counter--;
    }
    let incr = () =>{
      data.counter++;
    }
</script>

<template>
  <div>
    <button @click="data.counter--">-</button> 
    <button @click="decr()">-</button> 
    {{ data.counter }} 
    <button @click="data.counter++">+</button>
    <button @click="incr()">+</button> 
    <hr>
    <button @click="show()">æ˜¾ç¤ºcounterå€¼</button>
   </div>
</template> 

<style scoped>

</style>
```

> å¯¹æ¯” ref å’Œ reactive:

+ ä½¿ç”¨ `ref` é€‚ç”¨äºä»¥ä¸‹å¼€å‘åœºæ™¯ï¼š
    + åŒ…è£…åŸºæœ¬ç±»å‹æ•°æ®ï¼š`ref` ä¸»è¦ç”¨äºåŒ…è£…åŸºæœ¬ç±»å‹æ•°æ®ï¼ˆå¦‚å­—ç¬¦ä¸²ã€æ•°å­—ç­‰ï¼‰ï¼Œå³åªæœ‰ä¸€ä¸ªå€¼çš„æ•°æ®ï¼Œå¦‚æœä½ æƒ³ç›‘å¬è¿™ä¸ªå€¼çš„å˜åŒ–ï¼Œç”¨ `ref` æœ€ä¸ºæ–¹ä¾¿ã€‚åœ¨ç»„ä»¶ä¸­ä½¿ç”¨æ—¶ä¹Ÿå¾ˆå¸¸è§ã€‚
    + è®¿é—®æ–¹å¼ç®€å•ï¼š`ref` å¯¹è±¡åœ¨è®¿é—®æ—¶ä¸æ™®é€šçš„åŸºæœ¬ç±»å‹å€¼æ²¡æœ‰å¤ªå¤§åŒºåˆ«ï¼Œåªéœ€è¦é€šè¿‡ `.value` è®¿é—®å…¶å®é™…å€¼å³å¯ã€‚

+ ä½¿ç”¨ `reactive` é€‚ç”¨äºä»¥ä¸‹å¼€å‘åœºæ™¯ï¼š
    + åŒ…è£…å¤æ‚å¯¹è±¡ï¼š`reactive` å¯ä»¥å°†ä¸€ä¸ªæ™®é€šå¯¹è±¡è½¬åŒ–ä¸ºå“åº”å¼å¯¹è±¡ï¼Œè¿™æ ·åœ¨æ•°æ®å˜åŒ–æ—¶ä¼šè‡ªåŠ¨æ›´æ–°ç•Œé¢ï¼Œç‰¹åˆ«é€‚ç”¨äºå¤„ç†å¤æ‚å¯¹è±¡æˆ–è€…æ•°æ®ç»“æ„ã€‚
    + éœ€è¦é€’å½’ç›‘å¬çš„å±æ€§ï¼šä½¿ç”¨ `reactive` å¯ä»¥é€’å½’è¿½è¸ªæ‰€æœ‰å“åº”å¼å¯¹è±¡å†…éƒ¨çš„å˜åŒ–ï¼Œä»è€Œä¿è¯ç•Œé¢çš„è‡ªåŠ¨æ›´æ–°ã€‚

+ ç»¼ä¸Šæ‰€è¿°ï¼Œ`ref` é€‚ç”¨ä¸ç®€å•æƒ…å½¢ä¸‹çš„æ•°æ®åŒå‘ç»‘å®šï¼Œå¯¹äºåªæœ‰ä¸€ä¸ªå­—ç¬¦ç­‰åŸºæœ¬ç±»å‹æ•°æ®æˆ–è‡ªå®šä¹‰ç»„ä»¶ç­‰æƒ…å†µï¼Œå»ºè®®å¯ä»¥ä½¿ç”¨ `ref`ï¼›è€Œå¯¹äºå¯¹è±¡ã€å‡½æ•°ç­‰è¾ƒä¸ºå¤æ‚çš„æ•°æ®ç»“æ„ï¼Œä»¥åŠéœ€è¦é€’å½’ç›‘å¬çš„å±æ€§å˜åŒ–ï¼Œå»ºè®®ä½¿ç”¨ `reactive`ã€‚å½“ç„¶ï¼Œåœ¨å®é™…é¡¹ç›®ä¸­æ ¹æ®éœ€æ±‚çµæ´»é€‰æ‹©ä¹Ÿæ˜¯ååˆ†å¿…è¦çš„ã€‚

#### 6.2.4 æ‰©å±•å“åº”å¼å…³é”®å­— toRefs å’Œ toRef

> toRef åŸºäº reactive å“åº”å¼å¯¹è±¡ä¸Šçš„ä¸€ä¸ªå±æ€§ï¼Œåˆ›å»ºä¸€ä¸ªå¯¹åº”çš„ ref å“åº”å¼æ•°æ®ã€‚è¿™æ ·åˆ›å»ºçš„ ref ä¸å…¶æºå±æ€§ä¿æŒåŒæ­¥ï¼šæ”¹å˜æºå±æ€§çš„å€¼å°†æ›´æ–° ref çš„å€¼ï¼Œåä¹‹äº¦ç„¶ã€‚toRefs å°†ä¸€ä¸ªå“åº”å¼å¯¹è±¡å¤šä¸ªå±æ€§è½¬æ¢ä¸ºä¸€ä¸ªå¤šä¸ª ref æ•°æ®ï¼Œè¿™ä¸ªæ™®é€šå¯¹è±¡çš„æ¯ä¸ªå±æ€§éƒ½æ˜¯æŒ‡å‘æºå¯¹è±¡ç›¸åº”å±æ€§çš„ refã€‚æ¯ä¸ªå•ç‹¬çš„ ref éƒ½æ˜¯ä½¿ç”¨ [toRef()](https://cn.vuejs.org/api/reactivity-utilities.html#toref "toRef()") åˆ›å»ºçš„ã€‚

æ¡ˆä¾‹ï¼šå“åº”æ˜¾ç¤º reactive å¯¹è±¡å±æ€§

```html
<script type="module" setup>
    /* ä»vueä¸­å¼•å…¥reactiveæ–¹æ³• */
    import {ref,reactive,toRef,toRefs} from 'vue'
    let data = reactive({
      counter:0,
      name:"test"
    })

    // å°†ä¸€ä¸ªreactiveå“åº”å¼å¯¹è±¡ä¸­çš„æŸä¸ªå±æ€§è½¬æ¢æˆä¸€ä¸ªrefå“åº”å¼å¯¹è±¡
    let ct =toRef(data,'counter');
    // å°†ä¸€ä¸ªreactiveå“åº”å¼å¯¹è±¡ä¸­çš„å¤šä¸ªå±æ€§è½¬æ¢æˆå¤šä¸ªrefå“åº”å¼å¯¹è±¡
    let {counter,name} = toRefs(data)

    function show(){
        alert(data.counter);
        // è·å–refçš„å“åº”å¯¹è±¡,éœ€è¦é€šè¿‡.valueå±æ€§
        alert(counter.value);
        alert(name.value)
    }
    /* å‡½æ•°ä¸­è¦æ“ä½œrefå¤„ç†è¿‡çš„æ•°æ®,éœ€è¦é€šè¿‡.valueå½¢å¼ */
    let decr = () =>{
      data.counter--;
    }
    let incr = () =>{
      /* refå“åº”å¼æ•°æ®,è¦é€šè¿‡.valueå±æ€§è®¿é—® */
      counter.value++;
    }
</script>

<template>
  <div>
    <button @click="data.counter--">-</button> 
    <button @click="decr()">-</button> 
    {{ data.counter }} 
    &amp;
    {{ ct }} 
    <button @click="data.counter++">+</button>
    <button @click="incr()">+</button> 
    <hr>
    <button @click="show()">æ˜¾ç¤ºcounterå€¼</button>
   </div>
</template> 

<style scoped>

</style>


```

### 6.3 æ¡ä»¶å’Œåˆ—è¡¨æ¸²æŸ“

#### 6.3.1 æ¡ä»¶æ¸²æŸ“

> `v-if` æ¡ä»¶æ¸²æŸ“

+ `v-if='è¡¨è¾¾å¼' `åªä¼šåœ¨æŒ‡ä»¤çš„è¡¨è¾¾å¼è¿”å›çœŸå€¼æ—¶æ‰è¢«æ¸²æŸ“

+ ä¹Ÿå¯ä»¥ä½¿ç”¨ `v-else` ä¸º `v-if` æ·»åŠ ä¸€ä¸ªâ€œelse åŒºå—â€ã€‚

+ ä¸€ä¸ª `v-else` å…ƒç´ å¿…é¡»è·Ÿåœ¨ä¸€ä¸ª `v-if` å…ƒç´ åé¢ï¼Œå¦åˆ™å®ƒå°†ä¸ä¼šè¢«è¯†åˆ«ã€‚

```html
<script type="module" setup>
    import {ref} from 'vue'
    let awesome = ref(true)
</script>

<template>
  <div>
    <h1 v-if="awesome">Vue is awesome!</h1>
    <h1 v-else>Oh no ğŸ˜¢</h1>
    <button @click="awesome = !awesome">Toggle</button>
  </div>
</template> 

<style scoped>
</style>
```

> `v-show`æ¡ä»¶æ¸²æŸ“æ‰©å±•ï¼š

+ å¦ä¸€ä¸ªå¯ä»¥ç”¨æ¥æŒ‰æ¡ä»¶æ˜¾ç¤ºä¸€ä¸ªå…ƒç´ çš„æŒ‡ä»¤æ˜¯ `v-show`ã€‚å…¶ç”¨æ³•åŸºæœ¬ä¸€æ ·ï¼š

+ ä¸åŒä¹‹å¤„åœ¨äº `v-show` ä¼šåœ¨ DOM æ¸²æŸ“ä¸­ä¿ç•™è¯¥å…ƒç´ ï¼›`v-show` ä»…åˆ‡æ¢äº†è¯¥å…ƒç´ ä¸Šåä¸º `display` çš„ CSS å±æ€§ã€‚

+ `v-show` ä¸æ”¯æŒåœ¨ `<template>` å…ƒç´ ä¸Šä½¿ç”¨ï¼Œä¹Ÿä¸èƒ½å’Œ `v-else` æ­é…ä½¿ç”¨ã€‚

``` html
<script type="module" setup>
    import {ref} from 'vue'
    let awesome = ref(true)
</script>

<template>
  <div>
    <h1 id="ha"  v-show="awesome">Vue is awesome!</h1>
    <h1 id="hb"  v-if="awesome">Vue is awesome!</h1>
    <h1 id="hc"  v-else>Oh no ğŸ˜¢</h1>
    <button @click="awesome = !awesome">Toggle</button>
  </div>
</template> 

<style scoped>
</style>

```

![1684565503347](images/1684565503347.png)



> **`v-if`**    **vs** **`v-show`**

+ `v-if` æ˜¯â€œçœŸå®çš„â€æŒ‰æ¡ä»¶æ¸²æŸ“ï¼Œå› ä¸ºå®ƒç¡®ä¿äº†åœ¨åˆ‡æ¢æ—¶ï¼Œæ¡ä»¶åŒºå—å†…çš„äº‹ä»¶ç›‘å¬å™¨å’Œå­ç»„ä»¶éƒ½ä¼šè¢«é”€æ¯ä¸é‡å»ºã€‚

+ `v-if` ä¹Ÿæ˜¯**æƒ°æ€§**çš„ï¼šå¦‚æœåœ¨åˆæ¬¡æ¸²æŸ“æ—¶æ¡ä»¶å€¼ä¸º falseï¼Œåˆ™ä¸ä¼šåšä»»ä½•äº‹ã€‚æ¡ä»¶åŒºå—åªæœ‰å½“æ¡ä»¶é¦–æ¬¡å˜ä¸º true æ—¶æ‰è¢«æ¸²æŸ“ã€‚

+ ç›¸æ¯”ä¹‹ä¸‹ï¼Œ`v-show` ç®€å•è®¸å¤šï¼Œå…ƒç´ æ— è®ºåˆå§‹æ¡ä»¶å¦‚ä½•ï¼Œå§‹ç»ˆä¼šè¢«æ¸²æŸ“ï¼Œåªæœ‰ CSS `display` å±æ€§ä¼šè¢«åˆ‡æ¢ã€‚

+ æ€»çš„æ¥è¯´ï¼Œ`v-if` æœ‰æ›´é«˜çš„åˆ‡æ¢å¼€é”€ï¼Œè€Œ `v-show` æœ‰æ›´é«˜çš„åˆå§‹æ¸²æŸ“å¼€é”€ã€‚å› æ­¤ï¼Œå¦‚æœéœ€è¦é¢‘ç¹åˆ‡æ¢ï¼Œåˆ™ä½¿ç”¨ `v-show` è¾ƒå¥½ï¼›å¦‚æœåœ¨è¿è¡Œæ—¶ç»‘å®šæ¡ä»¶å¾ˆå°‘æ”¹å˜ï¼Œåˆ™ `v-if` ä¼šæ›´åˆé€‚ã€‚

#### 6.3.2 åˆ—è¡¨æ¸²æŸ“

> æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `v-for` æŒ‡ä»¤åŸºäºä¸€ä¸ªæ•°ç»„æ¥æ¸²æŸ“ä¸€ä¸ªåˆ—è¡¨ã€‚

+ `v-for` æŒ‡ä»¤çš„å€¼éœ€è¦ä½¿ç”¨ `item in items` å½¢å¼çš„ç‰¹æ®Šè¯­æ³•ï¼Œå…¶ä¸­ `items` æ˜¯æºæ•°æ®çš„æ•°ç»„ï¼Œè€Œ `item` æ˜¯è¿­ä»£é¡¹çš„**åˆ«å**ï¼š

+ åœ¨ `v-for` å—ä¸­å¯ä»¥å®Œæ•´åœ°è®¿é—®çˆ¶ä½œç”¨åŸŸå†…çš„å±æ€§å’Œå˜é‡ã€‚`v-for` ä¹Ÿæ”¯æŒä½¿ç”¨å¯é€‰çš„ç¬¬äºŒä¸ªå‚æ•°è¡¨ç¤ºå½“å‰é¡¹çš„ä½ç½®ç´¢å¼•ã€‚

```html
<script type="module" setup>
    import {ref,reactive} from 'vue'
    let parentMessage= ref('äº§å“')
    let items =reactive([
      {
        id:'item1',
        message:"è–¯ç‰‡"
      },
      {
        id:'item2',
        message:"å¯ä¹"
      }
    ])
</script>

<template>
  <div>
    <ul>
      <!-- :keyä¸å†™ä¹Ÿå¯ä»¥ -->
      <li v-for='item in items' :key='item.id'>
        {{ item.message }}
      </li>
    </ul>

    <ul>
      <!-- indexè¡¨ç¤ºç´¢å¼•,å½“ç„¶ä¸æ˜¯éå¾—ä½¿ç”¨indexè¿™ä¸ªå•è¯ -->
      <li v-for="(item, index) in items" :key="index">
        {{ parentMessage }} - {{ index }} - {{ item.message }}
      </li>
    </ul>
   
  </div>
</template> 

<style scoped>
</style>
```

+ æ¡ˆä¾‹ï¼šå®ç°è´­ç‰©è½¦æ˜¾ç¤ºå’Œåˆ é™¤è´­ç‰©é¡¹

``` html
<script type="module" setup>

    //å¼•å…¥æ¨¡å—
    import { reactive} from 'vue'
    //å‡†å¤‡è´­ç‰©è½¦æ•°æ®,è®¾ç½®æˆå“åº”æ•°æ®
    const carts = reactive([{name:'å¯ä¹',price:3,number:10},{name:'è–¯ç‰‡',price:6,number:8}])

    //è®¡ç®—è´­ç‰©è½¦æ€»é‡‘é¢
    function compute(){
      let count = 0;
      for(let index in carts){
        count += carts[index].price*carts[index].number;
      }
      return count;
    }
    //åˆ é™¤è´­ç‰©é¡¹æ–¹æ³•
    function removeCart(index){
      carts.splice(index,1);
    }
    
</script>

<template>
    <div>
        <table>
           <thead>
               <tr>
                  <th>åºå·</th>
                  <th>å•†å“å</th>
                  <th>ä»·æ ¼</th>
                  <th>æ•°é‡</th>
                  <th>å°è®¡</th>
                  <th>æ“ä½œ</th>
               </tr>
           </thead>
           <tbody v-if="carts.length > 0">
               <!-- æœ‰æ•°æ®æ˜¾ç¤º-->
               <tr v-for="cart,index in carts" :key="index">
                  <th>{{ index+1 }}</th>
                  <th>{{ cart.name }}</th>
                  <th>{{ cart.price + 'å…ƒ' }}</th>
                  <th>{{ cart.number }}</th>
                  <th>{{ cart.price*cart.number  + 'å…ƒ'}}</th>
                  <th> <button @click="removeCart(index)">åˆ é™¤</button> </th>
               </tr>
           </tbody>
           <tbody v-else>
               <!-- æ²¡æœ‰æ•°æ®æ˜¾ç¤º-->
               <tr>
                  <td colspan="6">è´­ç‰©è½¦æ²¡æœ‰æ•°æ®!</td>
               </tr>
           </tbody>
        </table>
        è´­ç‰©è½¦æ€»é‡‘é¢: {{ compute() }} å…ƒ
    </div>
</template> 

<style scoped>
</style>
```

### 6.4 åŒå‘ç»‘å®š

> å•é¡¹ç»‘å®šå’ŒåŒå‘ç»‘å®š

+ å•å‘ç»‘å®š: å“åº”å¼æ•°æ®çš„å˜åŒ–ä¼šæ›´æ–° dom æ ‘,ä½†æ˜¯ dom æ ‘ä¸Šç”¨æˆ·çš„æ“ä½œé€ æˆçš„æ•°æ®æ”¹å˜ä¸ä¼šåŒæ­¥æ›´æ–°åˆ°å“åº”å¼æ•°æ®
+ åŒå‘ç»‘å®š: å“åº”å¼æ•°æ®çš„å˜åŒ–ä¼šæ›´æ–° dom æ ‘,ä½†æ˜¯ dom æ ‘ä¸Šç”¨æˆ·çš„æ“ä½œé€ æˆçš„æ•°æ®æ”¹å˜ä¼šåŒæ­¥æ›´æ–°åˆ°å“åº”å¼æ•°æ®
    + ç”¨æˆ·é€šè¿‡è¡¨å•æ ‡ç­¾æ‰èƒ½å¤Ÿè¾“å…¥æ•°æ®,æ‰€ä»¥åŒå‘ç»‘å®šéƒ½æ˜¯åº”ç”¨åˆ°è¡¨å•æ ‡ç­¾ä¸Šçš„,å…¶ä»–æ ‡ç­¾ä¸è¡Œ
    + v-model ä¸“é—¨ç”¨äºåŒå‘ç»‘å®šè¡¨å•æ ‡ç­¾çš„ value å±æ€§,è¯­æ³•ä¸º `v-model:value=''`,å¯ä»¥ç®€å†™ä¸º `v-model=''`
    + v-model è¿˜å¯ä»¥ç”¨äºå„ç§ä¸åŒç±»å‹çš„è¾“å…¥ï¼Œ`<textarea>`ã€`<select>` å…ƒç´ ã€‚

```html
<script type="module" setup>

  //å¼•å…¥æ¨¡å—
  import { reactive,ref} from 'vue' 
  let hbs = ref([]); //è£…çˆ±å¥½çš„å€¼
  let user = reactive({username:null,password:null,introduce:null,pro:null})   
  function login(){
    alert(hbs.value);
    alert(JSON.stringify(user));
  }
  function clearx(){
    //user = {};// è¿™ä¸­å†™æ³•ä¼šå°†æ•°æ®å˜æˆéå“åº”çš„,åº”è¯¥æ˜¯user.username=""
    user.username=''
    user.password=''
    user.introduce=''
    user.pro=''
    hbs.value.splice(0,hbs.value.length);;
  }
</script>

<template>
  <div>
      è´¦å·ï¼š <input type="text" placeholder="è¯·è¾“å…¥è´¦å·ï¼" v-model="user.username"> <br>
      å¯†ç ï¼š <input type="text" placeholder="è¯·è¾“å…¥è´¦å·ï¼" v-model="user.password"> <br>
      çˆ±å¥½ï¼š 
        åƒ <input type="checkbox" name="hbs" v-model="hbs" value="åƒ"> 
        å– <input type="checkbox" name="hbs" v-model="hbs" value="å–">
        ç© <input type="checkbox" name="hbs" v-model="hbs" value="ç©">
        ä¹ <input type="checkbox" name="hbs" v-model="hbs" value="ä¹">
      <br>
      ç®€ä»‹:<textarea v-model="user.introduce"></textarea>
      <br>
      ç±è´¯:
          <select v-model="user.pro">
            <option value="1">é»‘</option>
            <option value="2">å‰</option>
            <option value="3">è¾½</option>
            <option value="4">äº¬</option>
            <option value="5">æ´¥</option>
            <option value="6">å†€</option>
          </select> 
      <br>
      <button @click="login()">ç™»å½•</button> 
      <button @click="clearx()">é‡ç½®</button>
      <hr>
      æ˜¾ç¤ºçˆ±å¥½:{{ hbs }}
      <hr>
      æ˜¾ç¤ºç”¨æˆ·ä¿¡æ¯:{{ user }}
  </div> 
</template> 

<style scoped>
</style>

```

### 6.5 å±æ€§è®¡ç®—

> æ¨¡æ¿ä¸­çš„è¡¨è¾¾å¼è™½ç„¶æ–¹ä¾¿ï¼Œä½†ä¹Ÿåªèƒ½ç”¨æ¥åšç®€å•çš„æ“ä½œã€‚å¦‚æœåœ¨æ¨¡æ¿ä¸­å†™å¤ªå¤šé€»è¾‘ï¼Œä¼šè®©æ¨¡æ¿å˜å¾—è‡ƒè‚¿ï¼Œéš¾ä»¥ç»´æŠ¤ã€‚æ¯”å¦‚è¯´ï¼Œæˆ‘ä»¬æœ‰è¿™æ ·ä¸€ä¸ªåŒ…å«åµŒå¥—æ•°ç»„çš„å¯¹è±¡ï¼š

```html
<script type="module" setup>
  //å¼•å…¥æ¨¡å—
  import { reactive,computed} from 'vue'
  const author = reactive({
    name: 'John Doe',
    books: [
      'Vue 2 - Advanced Guide',
      'Vue 3 - Basic Guide',
      'Vue 4 - The Mystery'
    ]
  })
 
</script>

<template>
  <div>
    <p>{{author.name}} Has published books?:</p>
    <span>{{ author.books.length > 0 ? 'Yes' : 'No' }}</span>
  </div>
</template> 

<style scoped>
</style>
```

+ è¿™é‡Œçš„æ¨¡æ¿çœ‹èµ·æ¥æœ‰äº›å¤æ‚ã€‚æˆ‘ä»¬å¿…é¡»è®¤çœŸçœ‹å¥½ä¸€ä¼šå„¿æ‰èƒ½æ˜ç™½å®ƒçš„è®¡ç®—ä¾èµ–äº `author.books`ã€‚æ›´é‡è¦çš„æ˜¯ï¼Œå¦‚æœåœ¨æ¨¡æ¿ä¸­éœ€è¦ä¸æ­¢ä¸€æ¬¡è¿™æ ·çš„è®¡ç®—ï¼Œæˆ‘ä»¬å¯ä¸æƒ³å°†è¿™æ ·çš„ä»£ç åœ¨æ¨¡æ¿é‡Œé‡å¤å¥½å¤šéã€‚

> å› æ­¤æˆ‘ä»¬æ¨èä½¿ç”¨**è®¡ç®—å±æ€§**æ¥æè¿°ä¾èµ–å“åº”å¼çŠ¶æ€çš„å¤æ‚é€»è¾‘ã€‚è¿™æ˜¯é‡æ„åçš„ç¤ºä¾‹ï¼š

```html
<script type="module" setup>
  //å¼•å…¥æ¨¡å—
  import { reactive,computed} from 'vue'
  const author = reactive({
    name: 'John Doe',
    books: [
      'Vue 2 - Advanced Guide',
      'Vue 3 - Basic Guide',
      'Vue 4 - The Mystery'
    ]
  })
  // ä¸€ä¸ªè®¡ç®—å±æ€§ ref
  const publishedBooksMessage = computed(() => {
    console.log("publishedBooksMessage")
    return author.books.length > 0 ? 'Yes' : 'No'
  })
  // ä¸€ä¸ªå‡½æ•°
  let hasBooks = ()=>{
    console.log("hasBooks")
    return author.books.length > 0?'Yes':'no'
  }

</script>

<template>
  <div>
    <p>{{author.name}} Has published books?:</p>
    <span>{{ author.books.length > 0 ? 'Yes' : 'No' }}</span>
    <span>{{ hasBooks() }}</span><!-- è°ƒç”¨æ–¹æ³•,æ¯ä¸ªæ ‡ç­¾éƒ½ä¼šè°ƒç”¨ä¸€æ¬¡ -->
    <span>{{ hasBooks() }}</span>

    <p>{{author.name}} Has published books?:</p>
    <span>{{ publishedBooksMessage }}</span><!-- å±æ€§è®¡ç®—,å±æ€§å€¼ä¸å˜æ—¶,å¤šä¸ªä¸ªæ ‡ç­¾åªä¼šè°ƒç”¨ä¸€æ¬¡ -->
    <span>{{ publishedBooksMessage }}</span>
  </div>
</template> 

<style scoped>
</style>

```

+ æˆ‘ä»¬åœ¨è¿™é‡Œå®šä¹‰äº†ä¸€ä¸ªè®¡ç®—å±æ€§ `publishedBooksMessage`ã€‚`computed()` æ–¹æ³•æœŸæœ›æ¥æ”¶ä¸€ä¸ª getter å‡½æ•°ï¼Œè¿”å›å€¼ä¸ºä¸€ä¸ª**è®¡ç®—å±æ€§ ref**ã€‚å’Œå…¶ä»–ä¸€èˆ¬çš„ ref ç±»ä¼¼ï¼Œä½ å¯ä»¥é€šè¿‡ `publishedBooksMessage.value` è®¿é—®è®¡ç®—ç»“æœã€‚è®¡ç®—å±æ€§ ref ä¹Ÿä¼šåœ¨æ¨¡æ¿ä¸­è‡ªåŠ¨è§£åŒ…ï¼Œå› æ­¤åœ¨æ¨¡æ¿è¡¨è¾¾å¼ä¸­å¼•ç”¨æ—¶æ— éœ€æ·»åŠ  `.value`ã€‚

+ Vue çš„è®¡ç®—å±æ€§ä¼šè‡ªåŠ¨è¿½è¸ªå“åº”å¼ä¾èµ–ã€‚å®ƒä¼šæ£€æµ‹åˆ° `publishedBooksMessage` ä¾èµ–äº `author.books`ï¼Œæ‰€ä»¥å½“ `author.books` æ”¹å˜æ—¶ï¼Œä»»ä½•ä¾èµ–äº `publishedBooksMessage` çš„ç»‘å®šéƒ½ä¼šåŒæ—¶æ›´æ–°ã€‚

> è®¡ç®—å±æ€§ç¼“å­˜ vs æ–¹æ³•

+ è‹¥æˆ‘ä»¬å°†åŒæ ·çš„å‡½æ•°å®šä¹‰ä¸ºä¸€ä¸ªæ–¹æ³•è€Œä¸æ˜¯è®¡ç®—å±æ€§ï¼Œä¸¤ç§æ–¹å¼åœ¨ç»“æœä¸Šç¡®å®æ˜¯å®Œå…¨ç›¸åŒçš„ï¼Œç„¶è€Œï¼Œä¸åŒä¹‹å¤„åœ¨äº**è®¡ç®—å±æ€§å€¼ä¼šåŸºäºå…¶å“åº”å¼ä¾èµ–è¢«ç¼“å­˜**ã€‚ä¸€ä¸ªè®¡ç®—å±æ€§ä»…ä¼šåœ¨å…¶å“åº”å¼ä¾èµ–æ›´æ–°æ—¶æ‰é‡æ–°è®¡ç®—ã€‚è¿™æ„å‘³ç€åªè¦ `author.books` ä¸æ”¹å˜ï¼Œæ— è®ºå¤šå°‘æ¬¡è®¿é—® `publishedBooksMessage` éƒ½ä¼šç«‹å³è¿”å›å…ˆå‰çš„è®¡ç®—ç»“æœ!

### 6.6 æ•°æ®ç›‘å¬å™¨

> è®¡ç®—å±æ€§å…è®¸æˆ‘ä»¬å£°æ˜æ€§åœ°è®¡ç®—è¡ç”Ÿå€¼ã€‚ç„¶è€Œåœ¨æœ‰äº›æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éœ€è¦åœ¨çŠ¶æ€å˜åŒ–æ—¶æ‰§è¡Œä¸€äº›â€œå‰¯ä½œç”¨â€ï¼šä¾‹å¦‚æ›´æ”¹ DOMï¼Œæˆ–æ˜¯æ ¹æ®å¼‚æ­¥æ“ä½œçš„ç»“æœå»ä¿®æ”¹å¦ä¸€å¤„çš„çŠ¶æ€ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ [watch](https://cn.vuejs.org/api/reactivity-core.html#watch "watch")[ å‡½æ•°](https://cn.vuejs.org/api/reactivity-core.html#watch " å‡½æ•°")åœ¨æ¯æ¬¡å“åº”å¼çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶è§¦å‘å›è°ƒå‡½æ•°ï¼š

+ watch ä¸»è¦ç”¨äºä»¥ä¸‹åœºæ™¯ï¼š
    + å½“æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶éœ€è¦æ‰§è¡Œç›¸åº”çš„æ“ä½œ
    + ç›‘å¬æ•°æ®å˜åŒ–ï¼Œå½“æ»¡è¶³ä¸€å®šæ¡ä»¶æ—¶è§¦å‘ç›¸åº”æ“ä½œ
    + åœ¨å¼‚æ­¥æ“ä½œå‰æˆ–æ“ä½œåéœ€è¦æ‰§è¡Œç›¸åº”çš„æ“ä½œ

> ç›‘æ§å“åº”å¼æ•°æ®ï¼ˆwatchï¼‰ï¼š

```html
<script type="module" setup>
  //å¼•å…¥æ¨¡å—
  import { ref,reactive,watch} from 'vue'
 
  let firstname=ref('')
  let lastname=reactive({name:''})
  let fullname=ref('')

  //ç›‘å¬ä¸€ä¸ªrefå“åº”å¼æ•°æ®
  watch(firstname,(newValue,oldValue)=>{
    console.log(`${oldValue}å˜ä¸º${newValue}`)
    fullname.value=firstname.value+lastname.name
  })
  //ç›‘å¬reactiveå“åº”å¼æ•°æ®çš„æŒ‡å®šå±æ€§
  watch(()=>lastname.name,(newValue,oldValue)=>{
    console.log(`${oldValue}å˜ä¸º${newValue}`)
    fullname.value=firstname.value+lastname.name
  })
  //ç›‘å¬reactiveå“åº”å¼æ•°æ®çš„æ‰€æœ‰å±æ€§(æ·±åº¦ç›‘è§†,ä¸€èˆ¬ä¸æ¨è)
  //deep:true æ·±åº¦ç›‘è§†
  //immediate:true æ·±åº¦ç›‘è§†åœ¨è¿›å…¥é¡µé¢æ—¶ç«‹å³æ‰§è¡Œä¸€æ¬¡
  watch(()=>lastname,(newValue,oldValue)=>{
    // æ­¤æ—¶çš„newValueå’ŒoldValueä¸€æ ·,éƒ½æ˜¯lastname
    console.log(newValue)
    console.log(oldValue)
    fullname.value=firstname.value+lastname.name
  },{deep:true,immediate:false})
</script>

<template>
  <div>
    å…¨å:{{fullname}} <br>
    å§“æ°:<input type="text" v-model="firstname"> <br>
    åå­—:<input type="text" v-model="lastname.name" > <br>
  </div>
</template> 

<style scoped>
</style>
```

> ç›‘æ§å“åº”å¼æ•°æ®(watchEffect)ï¼š

+ watchEffect é»˜è®¤ç›‘å¬æ‰€æœ‰çš„å“åº”å¼æ•°æ®

```html
<script type="module" setup>
  //å¼•å…¥æ¨¡å—
  import { ref,reactive,watch, watchEffect} from 'vue'
 
  let firstname=ref('')
  let lastname=reactive({name:''})
  let fullname=ref('')

  //ç›‘å¬æ‰€æœ‰å“åº”å¼æ•°æ®
  watchEffect(()=>{
    //ç›´æ¥åœ¨å†…éƒ¨ä½¿ç”¨ç›‘å¬å±æ€§å³å¯ï¼ä¸ç”¨å¤–éƒ¨å£°æ˜
    //ä¹Ÿä¸éœ€è¦ï¼Œå³æ—¶å›è°ƒè®¾ç½®ï¼é»˜è®¤åˆå§‹åŒ–å°±åŠ è½½ï¼
    console.log(firstname.value)
    console.log(lastname.name)
    fullname.value=`${firstname.value}${lastname.name}`
  })
</script>

<template>
  <div>
    å…¨å:{{fullname}} <br>
    å§“æ°:<input type="text" v-model="firstname"> <br>
    åå­—:<input type="text" v-model="lastname.name" > <br>
  </div>
</template> 

<style scoped>
</style>
```

> `watch` vs. `watchEffect`

+ `watch` å’Œ `watchEffect` éƒ½èƒ½å“åº”å¼åœ°æ‰§è¡Œæœ‰å‰¯ä½œç”¨çš„å›è°ƒã€‚å®ƒä»¬ä¹‹é—´çš„ä¸»è¦åŒºåˆ«æ˜¯è¿½è¸ªå“åº”å¼ä¾èµ–çš„æ–¹å¼ï¼š
    + `watch` åªè¿½è¸ªæ˜ç¡®ä¾¦å¬çš„æ•°æ®æºã€‚å®ƒä¸ä¼šè¿½è¸ªä»»ä½•åœ¨å›è°ƒä¸­è®¿é—®åˆ°çš„ä¸œè¥¿ã€‚å¦å¤–ï¼Œä»…åœ¨æ•°æ®æºç¡®å®æ”¹å˜æ—¶æ‰ä¼šè§¦å‘å›è°ƒã€‚`watch` ä¼šé¿å…åœ¨å‘ç”Ÿå‰¯ä½œç”¨æ—¶è¿½è¸ªä¾èµ–ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬èƒ½æ›´åŠ ç²¾ç¡®åœ°æ§åˆ¶å›è°ƒå‡½æ•°çš„è§¦å‘æ—¶æœºã€‚
    + `watchEffect`ï¼Œåˆ™ä¼šåœ¨å‰¯ä½œç”¨å‘ç”ŸæœŸé—´è¿½è¸ªä¾èµ–ã€‚å®ƒä¼šåœ¨åŒæ­¥æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œè‡ªåŠ¨è¿½è¸ªæ‰€æœ‰èƒ½è®¿é—®åˆ°çš„å“åº”å¼å±æ€§ã€‚è¿™æ›´æ–¹ä¾¿ï¼Œè€Œä¸”ä»£ç å¾€å¾€æ›´ç®€æ´ï¼Œä½†æœ‰æ—¶å…¶å“åº”æ€§ä¾èµ–å…³ç³»ä¼šä¸é‚£ä¹ˆæ˜ç¡®ã€‚

### 6.7. Vue ç”Ÿå‘½å‘¨æœŸ

#### 6.7.1 ç”Ÿå‘½å‘¨æœŸç®€ä»‹

> æ¯ä¸ª Vue ç»„ä»¶å®ä¾‹åœ¨åˆ›å»ºæ—¶éƒ½éœ€è¦ç»å†ä¸€ç³»åˆ—çš„åˆå§‹åŒ–æ­¥éª¤ï¼Œæ¯”å¦‚è®¾ç½®å¥½æ•°æ®ä¾¦å¬ï¼Œç¼–è¯‘æ¨¡æ¿ï¼ŒæŒ‚è½½å®ä¾‹åˆ° DOMï¼Œä»¥åŠåœ¨æ•°æ®æ”¹å˜æ—¶æ›´æ–° DOMã€‚åœ¨æ­¤è¿‡ç¨‹ä¸­ï¼Œå®ƒä¹Ÿä¼šè¿è¡Œè¢«ç§°ä¸º`ç”Ÿå‘½å‘¨æœŸé’©å­çš„å‡½æ•°`ï¼Œè®©å¼€å‘è€…æœ‰æœºä¼šåœ¨ç‰¹å®šé˜¶æ®µè¿è¡Œè‡ªå·±çš„ä»£ç !

+ å‘¨æœŸå›¾è§£ï¼š

![image_elceCM4Wbp.png](images/image_elceCM4Wbp.png)

+ å¸¸è§é’©å­å‡½æ•°
    + onMounted()              æ³¨å†Œä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œåœ¨ç»„ä»¶æŒ‚è½½å®Œæˆåæ‰§è¡Œã€‚
    + onUpdated()               æ³¨å†Œä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œåœ¨ç»„ä»¶å› ä¸ºå“åº”å¼çŠ¶æ€å˜æ›´è€Œæ›´æ–°å…¶ DOM æ ‘ä¹‹åè°ƒç”¨ã€‚
    + onUnmounted()         æ³¨å†Œä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œåœ¨ç»„ä»¶å®ä¾‹è¢«å¸è½½ä¹‹åè°ƒç”¨ã€‚
    + onBeforeMount()       æ³¨å†Œä¸€ä¸ªé’©å­ï¼Œåœ¨ç»„ä»¶è¢«æŒ‚è½½ä¹‹å‰è¢«è°ƒç”¨ã€‚
    + onBeforeUpdate()      æ³¨å†Œä¸€ä¸ªé’©å­ï¼Œåœ¨ç»„ä»¶å³å°†å› ä¸ºå“åº”å¼çŠ¶æ€å˜æ›´è€Œæ›´æ–°å…¶ DOM æ ‘ä¹‹å‰è°ƒç”¨ã€‚
    + onBeforeUnmount()  æ³¨å†Œä¸€ä¸ªé’©å­ï¼Œåœ¨ç»„ä»¶å®ä¾‹è¢«å¸è½½ä¹‹å‰è°ƒç”¨ã€‚

#### 6.7.2 ç”Ÿå‘½å‘¨æœŸæ¡ˆä¾‹

```html
<script setup>

    import {ref,onUpdated,onMounted,onBeforeUpdate} from 'vue'
    
    let message =ref('hello')
   
    // æŒ‚è½½å®Œæ¯•ç”Ÿå‘½å‘¨æœŸ
    onMounted(()=>{
      console.log('-----------onMounted---------')
      let span1 =document.getElementById("span1")
      console.log(span1.innerText)
    })
    // æ›´æ–°å‰ç”Ÿå‘½å‘¨æœŸ
    onBeforeUpdate(()=>{
      console.log('-----------onBeforeUpdate---------')
      console.log(message.value)
      let span1 =document.getElementById("span1")
      console.log(span1.innerText)
    })
    // æ›´æ–°å®Œæˆç”Ÿå‘½å‘¨æœŸ
    onUpdated(()=>{
      console.log('-----------onUpdated---------')
      let span1 =document.getElementById("span1")
      console.log(span1.innerText)
    })
</script>

<template>
  <div>
    <span id="span1" v-text="message"></span> <br>
    <input type="text" v-model="message">
  </div>
  
</template>

<style scoped>
</style>
```

### 6.8 Vue ç»„ä»¶

#### 6.8.1 ç»„ä»¶åŸºç¡€

> ç»„ä»¶å…è®¸æˆ‘ä»¬å°† UI åˆ’åˆ†ä¸ºç‹¬ç«‹çš„ã€å¯é‡ç”¨çš„éƒ¨åˆ†ï¼Œå¹¶ä¸”å¯ä»¥å¯¹æ¯ä¸ªéƒ¨åˆ†è¿›è¡Œå•ç‹¬çš„æ€è€ƒã€‚ç»„ä»¶å°±æ˜¯å®ç°åº”ç”¨ä¸­å±€éƒ¨åŠŸèƒ½ä»£ç å’Œèµ„æºçš„é›†åˆï¼åœ¨å®é™…åº”ç”¨ä¸­ï¼Œç»„ä»¶å¸¸å¸¸è¢«ç»„ç»‡æˆå±‚å±‚åµŒå¥—çš„æ ‘çŠ¶ç»“æ„ï¼š

![image_9dCv8raLh-.png](images/image_9dCv8raLh-.png)

+ è¿™å’Œæˆ‘ä»¬åµŒå¥— HTML å…ƒç´ çš„æ–¹å¼ç±»ä¼¼ï¼ŒVue å®ç°äº†è‡ªå·±çš„ç»„ä»¶æ¨¡å‹ï¼Œä½¿æˆ‘ä»¬å¯ä»¥åœ¨æ¯ä¸ªç»„ä»¶å†…å°è£…è‡ªå®šä¹‰å†…å®¹ä¸é€»è¾‘ã€‚

> ä¼ ç»Ÿæ–¹å¼ç¼–å†™åº”ç”¨ï¼š

![image_6ZwJPs9HkC.png](images/image_6ZwJPs9HkC.png)

> ç»„ä»¶æ–¹å¼ç¼–å†™åº”ç”¨ï¼š

![image_uTNSasJcFd.png](images/image_uTNSasJcFd.png)

+ ç»„ä»¶åŒ–ï¼šå¯¹ js/css/html ç»Ÿä¸€å°è£…,è¿™æ˜¯ VUE ä¸­çš„æ¦‚å¿µ

+ æ¨¡å—åŒ–ï¼šå¯¹ js çš„ç»Ÿä¸€å°è£…,è¿™æ˜¯ ES6 ä¸­çš„æ¦‚å¿µ
+ ç»„ä»¶åŒ–ä¸­,å¯¹ js éƒ¨åˆ†ä»£ç çš„å¤„ç†ä½¿ç”¨ ES6 ä¸­çš„æ¨¡å—åŒ–

#### 6.8.2 ç»„ä»¶åŒ–å…¥é—¨æ¡ˆä¾‹

> æ¡ˆä¾‹éœ€æ±‚ï¼š åˆ›å»ºä¸€ä¸ªé¡µé¢ï¼ŒåŒ…å«å¤´éƒ¨å’Œèœå•ä»¥åŠå†…å®¹æ˜¾ç¤ºåŒºåŸŸï¼Œæ¯ä¸ªåŒºåŸŸä½¿ç”¨ç‹¬ç«‹ç»„å»ºï¼

![1686885192862](images/1686885192862.png)

> 1 å‡†å¤‡ vue é¡¹ç›®

```shell
npm create vite
cd viteé¡¹ç›®
npm install
```

> 2 å®‰è£…ç›¸å…³ä¾èµ–

```shell
npm install sass
npm install bootstrap
```

>  3 åˆ›å»ºå­ç»„ä»¶ åœ¨ src/components æ–‡ä»¶ä¸‹ vscode éœ€è¦å®‰è£… Vetur æ’ä»¶ï¼Œè¿™æ · vue æ–‡ä»¶æœ‰å¿«æ·æç¤º

+ Header.vue

```html
<script setup type="module">
</script>

<template>
    <div>
        æ¬¢è¿ï¼š xx <a href="#">é€€å‡ºç™»å½•</a>
    </div>
</template>

<style>
</style>
```

+ Navigator.vue

```html
<script setup type="module">
</script>

<template>
    <!-- æ¨èå†™ä¸€ä¸ªæ ¹æ ‡ç­¾-->
    <div>
       <ul>
          <li>å­¦å‘˜ç®¡ç†</li>
          <li>å›¾ä¹¦ç®¡ç†</li>
          <li>è¯·å‡ç®¡ç†</li>
          <li>è€ƒè¯•ç®¡ç†</li>
          <li>è®²å¸ˆç®¡ç†</li>
       </ul>
    </div>
</template>

<style>
</style>
```

+ Content.vue

```html
<script setup type="module">
</script>

<template>
    <div>
        å±•ç¤ºçš„ä¸»è¦å†…å®¹ï¼
    </div>
</template>

<style>
</style>
```

+ App.vue  å…¥å£ç»„ä»¶ App å¼•å…¥ç»„ä»¶

```html
<script setup>
    import Header  from './components/Header.vue'
    import Navigator  from './components/Navigator.vue'
    import Content  from './components/Content.vue'
</script>

<template>
  <div>
     <Header class="header"></Header>
     <Navigator class="navigator"></Navigator>
     <Content class="content"></Content>
  </div>
</template>

<style scoped>
    .header{
       height: 80px;
       border: 1px solid red;
    }

    .navigator{
      width: 15%;
      height: 800px;
      display: inline-block;
      border: 1px blue solid;
      float: left;
    }

    .content{
      width: 83%;
      height: 800px;
      display: inline-block;
      border: 1px goldenrod solid;
      float: right;
    }

</style>
```

> 4 å¯åŠ¨æµ‹è¯•

```shell
npm run dev
```

#### 6.8.3 ç»„ä»¶ä¹‹é—´ä¼ é€’æ•°æ®

##### 6.8.3.1 çˆ¶ä¼ å­

> Vue3 ä¸­çˆ¶ç»„ä»¶å‘å­ç»„ä»¶ä¼ å€¼å¯ä»¥é€šè¿‡ props è¿›è¡Œï¼Œå…·ä½“æ“ä½œå¦‚ä¸‹ï¼š

1. é¦–å…ˆï¼Œåœ¨çˆ¶ç»„ä»¶ä¸­å®šä¹‰éœ€è¦ä¼ é€’ç»™å­ç»„ä»¶çš„å€¼ï¼Œæ¥ç€ï¼Œåœ¨çˆ¶ç»„ä»¶çš„æ¨¡æ¿ä¸­å¼•å…¥å­ç»„ä»¶ï¼ŒåŒæ—¶åœ¨å¼•å…¥å­ç»„ä»¶çš„æ ‡ç­¾ä¸­æ·»åŠ  props å±æ€§å¹¶ä¸ºå…¶è®¾ç½®éœ€è¦ä¼ é€’çš„å€¼ã€‚

2. åœ¨ Vue3 ä¸­ï¼Œçˆ¶ç»„ä»¶é€šè¿‡ props ä¼ é€’ç»™å­ç»„ä»¶çš„å€¼æ˜¯å“åº”å¼çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœåœ¨çˆ¶ç»„ä»¶ä¸­çš„ä¼ é€’çš„å€¼å‘ç”Ÿäº†æ”¹å˜ï¼Œå­ç»„ä»¶ä¸­çš„å€¼ä¹Ÿä¼šç›¸åº”åœ°æ›´æ–°ã€‚

+ çˆ¶ç»„ä»¶ä»£ç ï¼šApp.vue

```html
<script setup>

  import Son from './components/Son.vue'
  import {ref,reactive,toRefs} from 'vue'

  let message = ref('parent data!')
  let title = ref(42)

  function changeMessage(){
    message.value = 'ä¿®æ”¹æ•°æ®ï¼'
    title.value++
  }
</script>

<template>
  <div>
    <h2>{{ message }}</h2>
    <hr>
    <!-- ä½¿ç”¨å­ç»„ä»¶ï¼Œå¹¶ä¸”ä¼ é€’æ•°æ®ï¼ -->
    <Son :message="message" :title="title"></Son>
    <hr>
    <button @click="changeMessage">ç‚¹å‡»æ›´æ–°</button>
  </div>
</template>

<style scoped>
</style>
```
+ å­ç»„ä»¶ä»£ç ï¼šSon.vue

```html
<script setup type="module">
    import {ref,isRef,defineProps} from 'vue'
    //å£°æ˜çˆ¶ç»„ä»¶ä¼ é€’å±æ€§å€¼
    defineProps({
        message:String ,
        title:Number
    })
</script>

<template>
    <div>
    <div>{{ message }}</div>
    <div>{{ title }}</div>
    </div>
</template>

<style>
</style>
```

##### 6.8.3.2 å­ä¼ çˆ¶

+ çˆ¶ç»„ä»¶ï¼š App.vue

```html
<script setup>
    import Son from './components/Son.vue'
    import {ref} from 'vue'

    let pdata = ref('')

    const padd = (data) => {
        console.log('2222');
        pdata.value =data;
    }

    //è‡ªå®šä¹‰æ¥æ”¶ï¼Œå­ç»„ä»¶ä¼ é€’æ•°æ®æ–¹æ³•ï¼ å‚æ•°ä¸ºæ•°æ®ï¼
    const psub = (data) => {
        console.log('11111');
        pdata.value = data;
    }
</script>

<template>
    <div>
        <!-- å£°æ˜@äº‹ä»¶ååº”è¯¥ç­‰äºå­æ¨¡å—å¯¹åº”äº‹ä»¶åï¼è°ƒç”¨æ–¹æ³•å¯ä»¥æ˜¯å½“å‰è‡ªå®šä¹‰ï¼-->
        <Son @add="padd" @sub="psub"></Son>
        <hr>
        {{ pdata }}
    </div>
</template>



<style>
</style>
```
+ å­ç»„ä»¶ï¼šSon.vue

```html
<script setup>

    import {ref,defineEmits} from 'vue'

    //1.å®šä¹‰è¦å‘é€ç»™çˆ¶ç»„ä»¶çš„æ–¹æ³•ï¼Œå¯ä»¥1æˆ–è€…å¤šä¸ª
    let emites = defineEmits(['add','sub']);

    let data = ref(1);

    function sendMsgToParent(){
        console.log('-------son--------');

        //2.å‡ºå‘çˆ¶ç»„ä»¶å¯¹åº”çš„æ–¹æ³•ï¼Œè°ƒç”¨defineEmiteså¯¹åº”çš„å±æ€§
        emites('add','add data!'+data.value)
        emites('sub','sub data!'+data.value)

        data.value ++;
    }
</script>

<template>
    <div>
      <button @click="sendMsgToParent">å‘é€æ¶ˆæ¯ç»™çˆ¶ç»„ä»¶</button>
    </div>
</template>
  
```



##### 6.8.3.3 å…„å¼Ÿä¼ å‚

![](images/image_hZ6yocZGY3.png)

+ Navigator.vue: å‘é€æ•°æ®åˆ° App.vue

```html
<script setup type="module">
    import {defineEmits} from 'vue'
    const emits = defineEmits(['sendMenu']);
    //è§¦å‘äº‹ä»¶ï¼Œå‘çˆ¶å®¹å™¨å‘é€æ•°æ®
    function send(data){
        emits('sendMenu',data);
    }
</script>

<template>
    <!-- æ¨èå†™ä¸€ä¸ªæ ¹æ ‡ç­¾-->
    <div>
       <ul>
          <li @click="send('å­¦å‘˜ç®¡ç†')">å­¦å‘˜ç®¡ç†</li>
          <li @click="send('å›¾ä¹¦ç®¡ç†')">å›¾ä¹¦ç®¡ç†</li>
          <li @click="send('è¯·å‡ç®¡ç†')">è¯·å‡ç®¡ç†</li>
          <li @click="send('è€ƒè¯•ç®¡ç†')">è€ƒè¯•ç®¡ç†</li>
          <li @click="send('è®²å¸ˆç®¡ç†')">è®²å¸ˆç®¡ç†</li>
       </ul>
    </div>
</template>

<style>

</style>
```
+ App.vue: å‘é€æ•°æ®åˆ° Content.vue

```html
<script setup>
  
  import Header  from './components/Header.vue'
  import Navigator  from './components/Navigator.vue'
  import Content  from './components/Content.vue'

  import {ref} from "vue"
  //å®šä¹‰æ¥å—navigatorä¼ é€’å‚æ•°
  var navigator_menu = ref('ceshi');

  const receiver = (data) =>{
    navigator_menu.value = data;
  }
</script>

<template>
  <div>
      <hr>
      {{ navigator_menu }}
      <hr>
     <Header class="header"></Header>
     <Navigator @sendMenu="receiver" class="navigator"></Navigator>
     <!-- å‘å­ç»„ä»¶ä¼ é€’æ•°æ®-->
     <Content class="content" :message="navigator_menu"></Content>
    </div>
</template>

<style scoped>
    .header{
       height: 80px;
       border: 1px solid red;
    }

    .navigator{
      width: 15%;
      height: 800px;
      display: inline-block;
      border: 1px blue solid;
      float: left;
    }

    .content{
      width: 83%;
      height: 800px;
      display: inline-block;
      border: 1px goldenrod solid;
      float: right;
    }

</style>
```
+ Content.vue

```html
<script setup type="module">
    defineProps({
        message:String
    })
</script>

<template>
    
    <div>
        å±•ç¤ºçš„ä¸»è¦å†…å®¹ï¼
        <hr>
        {{ message }}
    </div>
</template>

<style>
</style>
```

## ä¸ƒã€Vue3 è·¯ç”±æœºåˆ¶ router

### 7.1 è·¯ç”±ç®€ä»‹

> 1 ä»€ä¹ˆæ˜¯è·¯ç”±ï¼Ÿ

-   å®šä¹‰ï¼šè·¯ç”±å°±æ˜¯æ ¹æ®ä¸åŒçš„ URL åœ°å€å±•ç¤ºä¸åŒçš„å†…å®¹æˆ–é¡µé¢ã€‚
-   é€šä¿—ç†è§£ï¼šè·¯ç”±å°±åƒæ˜¯ä¸€ä¸ªåœ°å›¾ï¼Œæˆ‘ä»¬è¦å»ä¸åŒçš„åœ°æ–¹ï¼Œéœ€è¦é€šè¿‡ä¸åŒçš„è·¯çº¿è¿›è¡Œå¯¼èˆªã€‚

> 2 è·¯ç”±çš„ä½œç”¨

-   å•é¡µåº”ç”¨ç¨‹åºï¼ˆSPAï¼‰ä¸­ï¼Œè·¯ç”±å¯ä»¥å®ç°ä¸åŒè§†å›¾ä¹‹é—´çš„æ— åˆ·æ–°åˆ‡æ¢ï¼Œæå‡ç”¨æˆ·ä½“éªŒï¼›
-   è·¯ç”±è¿˜å¯ä»¥å®ç°é¡µé¢çš„è®¤è¯å’Œæƒé™æ§åˆ¶ï¼Œä¿æŠ¤ç”¨æˆ·çš„éšç§å’Œå®‰å…¨ï¼›
-   è·¯ç”±è¿˜å¯ä»¥åˆ©ç”¨æµè§ˆå™¨çš„å‰è¿›ä¸åé€€ï¼Œå¸®åŠ©ç”¨æˆ·æ›´å¥½åœ°å›åˆ°ä¹‹å‰è®¿é—®è¿‡çš„é¡µé¢ã€‚

### 7.2 è·¯ç”±å…¥é—¨æ¡ˆä¾‹

> 1 æ¡ˆä¾‹éœ€æ±‚åˆ†æ

![image_j-xo-xB5c8.png](images/image_j-xo-xB5c8.png)

â€‹

> 2 åˆ›å»ºé¡¹ç›®å’Œå¯¼å…¥è·¯ç”±ä¾èµ–


```shell
npm create vite //åˆ›å»ºé¡¹ç›®cd é¡¹ç›®æ–‡ä»¶å¤¹ //è¿›å…¥é¡¹ç›®æ–‡ä»¶å¤¹
npm install //å®‰è£…é¡¹ç›®éœ€æ±‚ä¾èµ–
npm install vue-router@4 --save //å®‰è£…å…¨å±€çš„vue-router 4ç‰ˆæœ¬
```

> 3 å‡†å¤‡é¡µé¢å’Œç»„ä»¶

+ components/Home.vue

``` html
<script setup>
</script>

<template>
    <div>
        <h1>Homeé¡µé¢</h1>
    </div>
</template>

<style scoped>
</style>

```

+ components/List.vue

``` html
<script setup>
</script>

<template>
    <div>
        <h1>Listé¡µé¢</h1>
    </div>
</template>

<style scoped>
</style>
```

+ components/Add.vue

``` html
<script setup>
</script>

<template>
    <div>
        <h1>Addé¡µé¢</h1>
    </div>
</template>

<style scoped>
</style>
```

+ components/Update.vue

``` html
<script setup>
</script>

<template>
    <div>
        <h1>Updateé¡µé¢</h1>
    </div>
</template>

<style scoped>
</style>
```

+ App.vue

``` html
<script setup>
</script>

<template>
    <div>
      <h1>Appé¡µé¢</h1>
      <hr/>
        <!-- è·¯ç”±çš„è¿æ¥ -->
        <router-link to="/">homeé¡µ</router-link> <br>
        <router-link to="/list">listé¡µ</router-link> <br>
        <router-link to="/add">addé¡µ</router-link> <br>
        <router-link to="/update">updateé¡µ</router-link> <br>
      <hr/>
      <!-- è·¯ç”±è¿æ¥å¯¹åº”è§†å›¾çš„å±•ç¤ºä½ç½® -->
      <hr>
      é»˜è®¤å±•ç¤ºä½ç½®:<router-view></router-view>
      <hr>
      Homeè§†å›¾å±•ç¤º:<router-view name="homeView"></router-view>
      <hr>
      Listè§†å›¾å±•ç¤º:<router-view name="listView"></router-view>
      <hr>
      Addè§†å›¾å±•ç¤º:<router-view name="addView"></router-view>
      <hr>
      Updateè§†å›¾å±•ç¤º:<router-view name="updateView"></router-view>
    </div>
</template>

<style scoped>
</style>

```

> 4 å‡†å¤‡è·¯ç”±é…ç½®

+ src/routers/router.js

```javascript
// å¯¼å…¥è·¯ç”±åˆ›å»ºçš„ç›¸å…³æ–¹æ³•
import {createRouter,createWebHashHistory} from 'vue-router'

// å¯¼å…¥vueç»„ä»¶
import Home from '../components/Home.vue'
import List from '../components/List.vue'
import Add from '../components/Add.vue'
import Update from '../components/Update.vue'

// åˆ›å»ºè·¯ç”±å¯¹è±¡,å£°æ˜è·¯ç”±è§„åˆ™
const router = createRouter({
    //createWebHashHistory() æ˜¯ Vue.js åŸºäº hash æ¨¡å¼åˆ›å»ºè·¯ç”±çš„å·¥å‚å‡½æ•°ã€‚åœ¨ä½¿ç”¨è¿™ç§æ¨¡å¼ä¸‹ï¼Œè·¯ç”±ä¿¡æ¯ä¿å­˜åœ¨ URL çš„ hash ä¸­ï¼Œ
    //ä½¿ç”¨ createWebHashHistory() æ–¹æ³•ï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ªè·¯ç”±å†å²è®°å½•å¯¹è±¡ï¼Œç”¨äºç®¡ç†åº”ç”¨ç¨‹åºçš„è·¯ç”±ã€‚åœ¨ Vue.js åº”ç”¨ä¸­ï¼Œ
    //é€šå¸¸ä½¿ç”¨è¯¥æ–¹æ³•æ¥åˆ›å»ºè·¯ç”±çš„å†å²è®°å½•å¯¹è±¡ã€‚
    //å°±æ˜¯è·¯ç”±ä¸­ç¼“å­˜å†å²è®°å½•çš„å¯¹è±¡ï¼Œvue-routeræä¾›
    history: createWebHashHistory(),
    routes:[
        {
            path:'/',
            /* 
                componentæŒ‡å®šç»„ä»¶åœ¨é»˜è®¤çš„è·¯ç”±è§†å›¾ä½ç½®å±•ç¤º
                components:Home
                componentsæŒ‡å®šç»„ä»¶åœ¨nameä¸ºæŸä¸ªå€¼çš„è·¯ç”±è§†å›¾ä½ç½®å±•ç¤º
                components:{
                    default:Home,// é»˜è®¤è·¯ç”±è§†å›¾ä½ç½®
                    homeView:Home// nameä¸ºhomeViewçš„è·¯ç”±è§†å›¾ä½ç½®
                }   
            */
            components:{
                default:Home,
                homeView:Home
            }      
        },
        {
            path:'/list',
            components:{
                listView : List
            } 
        },
        {
            path:'/add',
            components:{
                addView:Add
            } 
        },
        {
            path:'/update',
            components:{
                updateView:Update
            }  
        },
    ]

})

// å¯¹å¤–æš´éœ²è·¯ç”±å¯¹è±¡
export default router;
```

> 5 main.js å¼•å…¥ router é…ç½®

+ ä¿®æ”¹æ–‡ä»¶ï¼šmain.js (å…¥å£æ–‡ä»¶)

```javascript
import { createApp } from 'vue'
import './style.css'
import App from './App.vue'
//å¯¼å…¥routeræ¨¡å—
import router from './routers/router.js'
let app = createApp(App)
//ç»‘å®šè·¯ç”±å¯¹è±¡
app.use(router)
//æŒ‚åœ¨è¯•å›¾
app.mount("#app")
```

> 6 å¯åŠ¨æµ‹è¯•

``` shell
npm run dev
```

### 7.3 è·¯ç”±é‡å®šå‘

> é‡å®šå‘çš„ä½œç”¨ï¼šå°†ä¸€ä¸ªè·¯ç”±é‡å®šå‘åˆ°å¦ä¸€ä¸ªè·¯ç”±ä¸Š

+ ä¿®æ”¹æ¡ˆä¾‹ï¼šè®¿é—®/list å’Œ/showAll éƒ½å®šå‘åˆ° List.vue
+ router.js

``` javascript
// å¯¼å…¥è·¯ç”±åˆ›å»ºçš„ç›¸å…³æ–¹æ³•
import {createRouter,createWebHashHistory} from 'vue-router'

// å¯¼å…¥vueç»„ä»¶
import Home from '../components/Home.vue'
import List from '../components/List.vue'
import Add from '../components/Add.vue'
import Update from '../components/Update.vue'

// åˆ›å»ºè·¯ç”±å¯¹è±¡,å£°æ˜è·¯ç”±è§„åˆ™
const router = createRouter({
    history: createWebHashHistory(),
    routes:[
        {
            path:'/',
            components:{
                default:Home,
                homeView:Home
            }      
        },
        {
            path:'/list',
            components:{
                listView : List
            } 
        },
        {
            path:'/showAll',
            // é‡å®šå‘
            redirect :'/list'
        },
        {
            path:'/add',
            components:{
                addView:Add
            } 
        },
        {
            path:'/update',
            components:{
                updateView:Update
            }  
        },
    ]

})

// å¯¹å¤–æš´éœ²è·¯ç”±å¯¹è±¡
export default router;
```

+ App.vue

```html
<script setup>
</script>

<template>
    <div>
      <h1>Appé¡µé¢</h1>
      <hr/>
        <!-- è·¯ç”±çš„è¿æ¥ -->
        <router-link to="/">homeé¡µ</router-link> <br>
        <router-link to="/list">listé¡µ</router-link> <br>
        <router-link to="/showAll">showAllé¡µ</router-link> <br>
        <router-link to="/add">addé¡µ</router-link> <br>
        <router-link to="/update">updateé¡µ</router-link> <br>
      <hr/>
      <!-- è·¯ç”±è¿æ¥å¯¹åº”è§†å›¾çš„å±•ç¤ºä½ç½® -->
      <hr>
      é»˜è®¤å±•ç¤ºä½ç½®:<router-view></router-view>
      <hr>
      Homeè§†å›¾å±•ç¤º:<router-view name="homeView"></router-view>
      <hr>
      Listè§†å›¾å±•ç¤º:<router-view name="listView"></router-view>
      <hr>
      Addè§†å›¾å±•ç¤º:<router-view name="addView"></router-view>
      <hr>
      Updateè§†å›¾å±•ç¤º:<router-view name="updateView"></router-view>
    </div>
</template>

<style scoped>
</style>
```

###  7.4 ç¼–ç¨‹å¼è·¯ç”±(useRouter)

> æ™®é€šè·¯ç”±

+ `<router-link to="/list">listé¡µ</router-link>  `è¿™ç§è·¯ç”±,to ä¸­çš„å†…å®¹ç›®å‰æ˜¯å›ºå®šçš„,ç‚¹å‡»ååªèƒ½åˆ‡æ¢/list å¯¹è±¡ç»„ä»¶(å£°æ˜å¼è·¯ç”±)

> ç¼–ç¨‹å¼è·¯ç”±

+ é€šè¿‡ useRouter,åŠ¨æ€å†³å®šå‘é‚£ä¸ªç»„ä»¶åˆ‡æ¢çš„è·¯ç”±
+ åœ¨ Vue 3 å’Œ Vue Router 4 ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨ `useRouter` æ¥å®ç°åŠ¨æ€è·¯ç”±(ç¼–ç¨‹å¼è·¯ç”±)
+ è¿™é‡Œçš„ `useRouter` æ–¹æ³•è¿”å›çš„æ˜¯ä¸€ä¸ª router å¯¹è±¡ï¼Œä½ å¯ä»¥ç”¨å®ƒæ¥åšå¦‚å¯¼èˆªåˆ°æ–°é¡µé¢ã€è¿”å›ä¸Šä¸€é¡µé¢ç­‰æ“ä½œã€‚

> æ¡ˆä¾‹éœ€æ±‚: é€šè¿‡æ™®é€šæŒ‰é’®é…åˆäº‹ä»¶ç»‘å®šå®ç°è·¯ç”±é¡µé¢è·³è½¬,ä¸ç›´æ¥ä½¿ç”¨ router-link æ ‡ç­¾

+ App.vue

``` html
<script setup type="module">

  import {useRouter} from 'vue-router'
  import {ref} from 'vue'
  //åˆ›å»ºåŠ¨æ€è·¯ç”±å¯¹è±¡
  let router = useRouter()

  let  routePath =ref('')
  let  showList= ()=>{
      // ç¼–ç¨‹å¼è·¯ç”±
      // ç›´æ¥pushä¸€ä¸ªè·¯å¾„
      //router.push('/list')
      // pushä¸€ä¸ªå¸¦æœ‰pathå±æ€§çš„å¯¹è±¡
      router.push({path:'/list'})
  }
</script>

<template>
    <div>
      <h1>Appé¡µé¢</h1>
      <hr/>
        <!-- è·¯ç”±çš„è¿æ¥ -->
        <router-link to="/">homeé¡µ</router-link> <br>
        <router-link to="/list">listé¡µ</router-link> <br>
        <router-link to="/showAll">showAllé¡µ</router-link> <br>
        <router-link to="/add">addé¡µ</router-link> <br>
        <router-link to="/update">updateé¡µ</router-link> <br>
        <!-- åŠ¨æ€è¾“å…¥è·¯å¾„,ç‚¹å‡»æŒ‰é’®,è§¦å‘å•å‡»äº‹ä»¶çš„å‡½æ•°,åœ¨å‡½æ•°ä¸­é€šè¿‡ç¼–ç¨‹æ˜¯è·¯ç”±åˆ‡æ¢é¡µé¢ -->
        <button @click="showList()">showList</button> <br>
      <hr/>
      <!-- è·¯ç”±è¿æ¥å¯¹åº”è§†å›¾çš„å±•ç¤ºä½ç½® -->
      <hr>
      é»˜è®¤å±•ç¤ºä½ç½®:<router-view></router-view>
      <hr>
      Homeè§†å›¾å±•ç¤º:<router-view name="homeView"></router-view>
      <hr>
      Listè§†å›¾å±•ç¤º:<router-view name="listView"></router-view>
      <hr>
      Addè§†å›¾å±•ç¤º:<router-view name="addView"></router-view>
      <hr>
      Updateè§†å›¾å±•ç¤º:<router-view name="updateView"></router-view>
    </div>
</template>

<style scoped>
</style>
```

### 7.5 è·¯ç”±ä¼ å‚(useRoute)

> è·¯å¾„å‚æ•°

+ åœ¨è·¯å¾„ä¸­ä½¿ç”¨ä¸€ä¸ªåŠ¨æ€å­—æ®µæ¥å®ç°ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸º **è·¯å¾„å‚æ•°**
    + ä¾‹å¦‚ï¼š æŸ¥çœ‹æ•°æ®è¯¦æƒ…  `/showDetail/1`  ,`1`å°±æ˜¯è¦æŸ¥çœ‹è¯¦æƒ…çš„ id,å¯ä»¥åŠ¨æ€æ·»å€¼ï¼

> é”®å€¼å¯¹å‚æ•°

+ ç±»ä¼¼ä¸ get è¯·æ±‚é€šè¿‡ url ä¼ å‚,æ•°æ®æ˜¯é”®å€¼å¯¹å½¢å¼çš„

    + ä¾‹å¦‚:  æŸ¥çœ‹æ•°æ®è¯¦æƒ…`/showDetail?hid=1`,`hid=1`å°±æ˜¯è¦ä¼ é€’çš„é”®å€¼å¯¹å‚æ•°

    + åœ¨ Vue 3 å’Œ Vue Router 4 ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨  `useRoute` è¿™ä¸ªå‡½æ•°ä» Vue çš„ç»„åˆå¼ API ä¸­è·å–è·¯ç”±å¯¹è±¡ã€‚
    +  `useRoute` æ–¹æ³•è¿”å›çš„æ˜¯å½“å‰çš„ route å¯¹è±¡ï¼Œä½ å¯ä»¥ç”¨å®ƒæ¥è·å–å…³äºå½“å‰è·¯ç”±çš„ä¿¡æ¯ï¼Œå¦‚å½“å‰çš„è·¯å¾„ã€æŸ¥è¯¢å‚æ•°ç­‰ã€‚

> æ¡ˆä¾‹éœ€æ±‚ : åˆ‡æ¢åˆ° ShowDetail.vue ç»„ä»¶æ—¶,å‘è¯¥ç»„ä»¶é€šè¿‡è·¯ç”±ä¼ é€’å‚æ•°

+ ä¿®æ”¹ App.vue æ–‡ä»¶

``` html
<script setup type="module">

  import {useRouter} from 'vue-router'

  //åˆ›å»ºåŠ¨æ€è·¯ç”±å¯¹è±¡
  let router = useRouter()
  //åŠ¨æ€è·¯ç”±è·¯å¾„ä¼ å‚æ–¹æ³•
  let showDetail= (id,language)=>{
      // å°è¯•ä½¿ç”¨æ‹¼æ¥å­—ç¬¦ä¸²æ–¹å¼ä¼ é€’è·¯å¾„å‚æ•°
      //router.push(`showDetail/${id}/${languange}`)
      /*è·¯å¾„å‚æ•°,éœ€è¦ä½¿ç”¨params  */
      router.push({name:"showDetail",params:{id:id,language:language}})
  }
  let showDetail2= (id,language)=>{
      /*urié”®å€¼å¯¹å‚æ•°,éœ€è¦ä½¿ç”¨query */
      router.push({path:"/showDetail2",query:{id:id,language:language}})
  }
</script>

<template>
    <div>
      <h1>Appé¡µé¢</h1>
      <hr/>
      <!-- è·¯å¾„å‚æ•°   -->
      <router-link to="/showDetail/1/JAVA">showDetailè·¯å¾„ä¼ å‚æ˜¾ç¤ºJAVA</router-link> 
      <button @click="showDetail(1,'JAVA')">showDetailåŠ¨æ€è·¯ç”±è·¯å¾„ä¼ å‚æ˜¾ç¤ºJAVA</button>
      <hr/>
      <!-- é”®å€¼å¯¹å‚æ•° -->
      <router-link v-bind:to="{path:'/showDetail2',query:{id:1,language:'Java'}}">showDetail2é”®å€¼å¯¹ä¼ å‚æ˜¾ç¤ºJAVA</router-link> 
      <button @click="showDetail2(1,'JAVA')">showDetail2åŠ¨æ€è·¯ç”±é”®å€¼å¯¹ä¼ å‚æ˜¾ç¤ºJAVA</button>
      <hr>
      showDetailè§†å›¾å±•ç¤º:<router-view name="showDetailView"></router-view>
      <hr>
      showDetail2è§†å›¾å±•ç¤º:<router-view name="showDetailView2"></router-view>
    </div>
</template>

<style scoped>
</style>

```

+ ä¿®æ”¹ router.js å¢åŠ è·¯å¾„å‚æ•°å ä½ç¬¦

``` javascript
// å¯¼å…¥è·¯ç”±åˆ›å»ºçš„ç›¸å…³æ–¹æ³•
import {createRouter,createWebHashHistory} from 'vue-router'

// å¯¼å…¥vueç»„ä»¶

import ShowDetail from '../components/ShowDetail.vue'
import ShowDetail2 from '../components/ShowDetail2.vue'

// åˆ›å»ºè·¯ç”±å¯¹è±¡,å£°æ˜è·¯ç”±è§„åˆ™
const router = createRouter({
    history: createWebHashHistory(),
    routes:[
        
        {
            /* æ­¤å¤„:id  :languageä½œä¸ºè·¯å¾„çš„å ä½ç¬¦ */
            path:'/showDetail/:id/:language',
            /* åŠ¨æ€è·¯ç”±ä¼ å‚æ—¶,æ ¹æ®è¯¥åå­—æ‰¾åˆ°è¯¥è·¯ç”± */
            name:'showDetail',
            components:{
                showDetailView:ShowDetail
            }  
        },
        {
            path:'/showDetail2',
            components:{
                showDetailView2:ShowDetail2
            }  
        },
    ]

})

// å¯¹å¤–æš´éœ²è·¯ç”±å¯¹è±¡
export default router;
```

+ ShowDetail.vue é€šè¿‡ useRoute è·å–è·¯å¾„å‚æ•°

``` html
<script setup type="module">
    import{useRoute} from 'vue-router'
    import { onUpdated,ref } from 'vue';
    // è·å–å½“å‰çš„routeå¯¹è±¡
    let route =useRoute()
    let languageId = ref(0)
    let languageName = ref('')
    //  å€ŸåŠ©æ›´æ–°æ—¶ç”Ÿå‘½å‘¨æœŸ,å°†æ•°æ®æ›´æ–°è¿›å…¥å“åº”å¼å¯¹è±¡
    onUpdated (()=>{
        // è·å–å¯¹è±¡ä¸­çš„å‚æ•°
        languageId.value=route.params.id
        languageName.value=route.params.language
        console.log(languageId.value)
        console.log(languageName.value)
    })
    
</script>

<template>
    <div>
        <h1>ShowDetailé¡µé¢</h1>
        <h3>ç¼–å·{{route.params.id}}:{{route.params.language}}æ˜¯ä¸–ç•Œä¸Šæœ€å¥½çš„è¯­è¨€</h3>
        <h3>ç¼–å·{{languageId}}:{{languageName}}æ˜¯ä¸–ç•Œä¸Šæœ€å¥½çš„è¯­è¨€</h3>
    </div>
</template>

<style scoped>
</style>

```

-   ShowDetail2.vue é€šè¿‡ useRoute è·å–é”®å€¼å¯¹å‚æ•°
```html
<script setup type="module">
    import{useRoute} from 'vue-router'
    import { onUpdated,ref } from 'vue';
    // è·å–å½“å‰çš„routeå¯¹è±¡
    let route =useRoute()
    let languageId = ref(0)
    let languageName = ref('')
    //  å€ŸåŠ©æ›´æ–°æ—¶ç”Ÿå‘½å‘¨æœŸ,å°†æ•°æ®æ›´æ–°è¿›å…¥å“åº”å¼å¯¹è±¡
    onUpdated (()=>{
        // è·å–å¯¹è±¡ä¸­çš„å‚æ•°(é€šè¿‡queryè·å–å‚æ•°,æ­¤æ—¶å‚æ•°æ˜¯key-valueå½¢å¼çš„)
        console.log(route.query)
        console.log(languageId.value)
        console.log(languageName.value)
        languageId.value=route.query.id
        languageName.value=route.query.language
       
    })
    
</script>

<template>
    <div>
        <h1>ShowDetail2é¡µé¢</h1>
        <h3>ç¼–å·{{route.query.id}}:{{route.query.language}}æ˜¯ä¸–ç•Œä¸Šæœ€å¥½çš„è¯­è¨€</h3>
        <h3>ç¼–å·{{languageId}}:{{languageName}}æ˜¯ä¸–ç•Œä¸Šæœ€å¥½çš„è¯­è¨€</h3>
    </div>
</template>

<style scoped>
</style>

```
### 7.6 è·¯ç”±å®ˆå«

> åœ¨ Vue 3 ä¸­ï¼Œè·¯ç”±å®ˆå«æ˜¯ç”¨äºåœ¨è·¯ç”±åˆ‡æ¢æœŸé—´è¿›è¡Œä¸€äº›ç‰¹å®šä»»åŠ¡çš„å›è°ƒå‡½æ•°ã€‚è·¯ç”±å®ˆå«å¯ä»¥ç”¨äºè®¸å¤šä»»åŠ¡ï¼Œä¾‹å¦‚éªŒè¯ç”¨æˆ·æ˜¯å¦å·²ç™»å½•ã€åœ¨è·¯ç”±åˆ‡æ¢å‰æä¾›ç¡®è®¤æç¤ºã€è¯·æ±‚æ•°æ®ç­‰ã€‚Vue 3 ä¸ºè·¯ç”±å®ˆå«æä¾›äº†å…¨é¢çš„æ”¯æŒï¼Œå¹¶æä¾›äº†ä»¥ä¸‹å‡ ç§ç±»å‹çš„è·¯ç”±å®ˆå«ï¼š

1.  **å…¨å±€å‰ç½®å®ˆå«**ï¼šåœ¨è·¯ç”±åˆ‡æ¢å‰è¢«è°ƒç”¨ï¼Œå¯ä»¥ç”¨äºéªŒè¯ç”¨æˆ·æ˜¯å¦å·²ç™»å½•ã€ä¸­æ–­å¯¼èˆªã€è¯·æ±‚æ•°æ®ç­‰ã€‚
2.  **å…¨å±€åç½®å®ˆå«**ï¼šåœ¨è·¯ç”±åˆ‡æ¢ä¹‹åè¢«è°ƒç”¨ï¼Œå¯ä»¥ç”¨äºå¤„ç†æ•°æ®ã€æ“ä½œ DOM ã€è®°å½•æ—¥å¿—ç­‰ã€‚
3.  **å®ˆå«ä»£ç çš„ä½ç½®**: åœ¨ router.js ä¸­

```javascript
//å…¨å±€å‰ç½®è·¯ç”±å®ˆå«
router.beforeEach( (to,from,next) => {
    //to æ˜¯ç›®æ ‡åœ°åŒ…è£…å¯¹è±¡  .pathå±æ€§å¯ä»¥è·å–åœ°å€
    //from æ˜¯æ¥æºåœ°åŒ…è£…å¯¹è±¡ .pathå±æ€§å¯ä»¥è·å–åœ°å€
    //nextæ˜¯æ–¹æ³•ï¼Œä¸è°ƒç”¨é»˜è®¤æ‹¦æˆªï¼ next() æ”¾è¡Œ,ç›´æ¥åˆ°è¾¾ç›®æ ‡ç»„ä»¶
    //next('/åœ°å€')å¯ä»¥è½¬å‘åˆ°å…¶ä»–åœ°å€,åˆ°è¾¾ç›®æ ‡ç»„ä»¶å‰ä¼šå†æ¬¡ç»è¿‡å‰ç½®è·¯ç”±å®ˆå«
    console.log(to.path,from.path,next)

    //éœ€è¦åˆ¤æ–­ï¼Œæ³¨æ„é¿å…æ— é™é‡å®šå‘
    if(to.path == '/index'){
        next()
    }else{
        next('/index')
    }
    
} )

//å…¨å±€åç½®è·¯ç”±å®ˆå«
router.afterEach((to, from) => {
    console.log(`Navigate from ${from.path} to ${to.path}`);
});

```



> ç™»å½•æ¡ˆä¾‹ï¼Œç™»å½•ä»¥åæ‰å¯ä»¥è¿›å…¥ home,å¦åˆ™å¿…é¡»è¿›å…¥ login

+ å®šä¹‰ Login.vue

```html
<script setup>
    import {ref} from 'vue'
    import {useRouter} from 'vue-router'
    let username =ref('')
    let password =ref('')
    let router = useRouter();
    let login = () =>{
        console.log(username.value,password.value)
        if(username.value == 'root' & password.value == '123456'){
            router.push({path:'/home',query:{'username':username.value}})
            //ç™»å½•æˆåŠŸåˆ©ç”¨å‰ç«¯å­˜å‚¨æœºåˆ¶ï¼Œå­˜å‚¨è´¦å·ï¼
            localStorage.setItem('username',username.value)
            //sessionStorage.setItem('username',username)
        }else{
            alert('ç™»å½•å¤±è´¥ï¼Œè´¦å·æˆ–è€…å¯†ç é”™è¯¯ï¼');
        }
    }

</script>

<template>
    
    <div>
        è´¦å·ï¼š <input type="text" v-model="username" placeholder="è¯·è¾“å…¥è´¦å·ï¼"><br>
        å¯†ç ï¼š <input type="password" v-model="password" placeholder="è¯·è¾“å…¥å¯†ç ï¼"><br>
        <button @click="login()">ç™»å½•</button>
    </div>

</template>

<style scoped>
</style>

```

+ å®šä¹‰ Home.vue

```html
<script setup>
 import {ref} from 'vue'
 import {useRoute,useRouter} from 'vue-router'

 let route =useRoute()
 let router = useRouter()
 //  å¹¶ä¸æ˜¯æ¯æ¬¡è¿›å…¥homeé¡µæ—¶,éƒ½æœ‰ç”¨æˆ·åå‚æ•°ä¼ å…¥
 //let username = route.query.username
 let username =window.localStorage.getItem('username'); 

 let logout= ()=>{
    // æ¸…é™¤localStorgeä¸­çš„username
    //window.sessionStorage.removeItem('username')
    window.localStorage.removeItem('username')
    // åŠ¨æ€è·¯ç”±åˆ°ç™»å½•é¡µ
    router.push("/login")

 }

</script>

<template>
    <div>
        <h1>Homeé¡µé¢</h1>
        <h3>æ¬¢è¿{{username}}ç™»å½•</h3>
        <button @click="logout">é€€å‡ºç™»å½•</button>
    </div>
</template>

<style scoped>

</style>

```

+ App.vue

```html
<script setup type="module">

  
</script>

<template>
    <div>
      
      <router-view></router-view>
      
    </div>
</template>

<style scoped>
</style>

```

+ å®šä¹‰ routers.js

``` javascript
// å¯¼å…¥è·¯ç”±åˆ›å»ºçš„ç›¸å…³æ–¹æ³•
import {createRouter,createWebHashHistory} from 'vue-router'

// å¯¼å…¥vueç»„ä»¶

import Home from '../components/Home.vue'
import Login from '../components/login.vue'
// åˆ›å»ºè·¯ç”±å¯¹è±¡,å£°æ˜è·¯ç”±è§„åˆ™
const router = createRouter({
    history: createWebHashHistory(),
    routes:[
        {
            path:'/home',
            component:Home
        },
        {
            path:'/',
            redirect:"/home"
        },
        {
            path:'/login',
            component:Login
        },
    ]

})

// è®¾ç½®è·¯ç”±çš„å…¨å±€å‰ç½®å®ˆå«
router.beforeEach((to,from,next)=>{
    /* 
    to è¦å»é‚£
    from ä»å“ªé‡Œæ¥
    next æ”¾è¡Œè·¯ç”±æ—¶éœ€è¦è°ƒç”¨çš„æ–¹æ³•,ä¸è°ƒç”¨åˆ™ä¸æ”¾è¡Œ
    */
    console.log(`ä»å“ªé‡Œæ¥:${from.path},åˆ°å“ªé‡Œå»:${to.path}`)

    if(to.path == '/login'){
        //æ”¾è¡Œè·¯ç”±  æ³¨æ„æ”¾è¡Œä¸è¦å½¢æˆå¾ªç¯  
        next()
    }else{
        //let username =window.sessionStorage.getItem('username'); 
        let username =window.localStorage.getItem('username'); 
        if(null != username){
            next()
        }else{
            next('/login')
        }

    }
})
// è®¾ç½®è·¯ç”±çš„å…¨å±€åç½®å®ˆå«
router.afterEach((to,from)=>{
    console.log(`ä»å“ªé‡Œæ¥:${from.path},åˆ°å“ªé‡Œå»:${to.path}`)
})

// å¯¹å¤–æš´éœ²è·¯ç”±å¯¹è±¡
export default router;
```

+ å¯åŠ¨æµ‹è¯•

```shell
npm run dev
```

## å…«ã€ æ¡ˆä¾‹å¼€å‘-æ—¥ç¨‹ç®¡ç†-ç¬¬äº”æœŸ

### 8.1 é‡æ„å‰ç«¯å·¥ç¨‹

> ä¸šåŠ¡ç›®æ ‡å±•ç¤º

+ ç™»å½•é¡µ

![1690533751478](images/1690533751478.png)

+ æ³¨å†Œé¡µ

![1690533770048](images/1690533770048.png)

+ æ—¥ç¨‹ç®¡ç†é¡µ

![1690533809917](images/1690533809917.png)

> åˆ›å»ºé¡¹ç›®,å®‰è£…ä¾èµ–

``` shell
npm create vite
cd é¡¹ç›®ç›®å½•
npm  install
npm  install vue-router
```

+ é¡¹ç›®ç»“æ„å¦‚ä¸‹

![1690516506417](images/1690516506417.png)

> å¼€å‘è§†å›¾

+ Header.vue è§†å›¾

``` html
<script setup>

</script>

<template>
  <div>
    <h1 class="ht">æ¬¢è¿ä½¿ç”¨æ—¥ç¨‹ç®¡ç†ç³»ç»Ÿ</h1>
    <div>
      <div  class="optionDiv">
        <router-link to="/login">
          <button class="b1s">ç™»å½•</button>
        </router-link>   
        <router-link to="/regist">
          <button class="b1s">æ³¨å†Œ</button>
        </router-link>
      </div>


      <div   class="optionDiv">
        æ¬¢è¿xxx   
        <button class="b1b">é€€å‡ºç™»å½•</button> 
        <router-link to="/showSchedule">
          <button class="b1b">æŸ¥çœ‹æˆ‘çš„æ—¥ç¨‹</button>
        </router-link>
      </div>

      <br>
    </div>
  </div>
</template>

<style scoped>

  .ht{
      text-align: center;
      color: cadetblue;
      font-family: å¹¼åœ†;
  }
  .b1s{
        border: 2px solid powderblue;
        border-radius: 4px;
        width:60px;
        background-color: antiquewhite;

    }

    .b1b{
        border: 2px solid powderblue;
        border-radius: 4px;
        width:100px;
        background-color: antiquewhite;
    }
    .optionDiv{
      width: 300px;
      float: right;
    }
</style>

```



+ Login.vue è§†å›¾

``` html
<script setup>
       import{ ref,reactive} from 'vue'
       // å“åº”å¼æ•°æ®,ä¿å­˜ç”¨æˆ·è¾“å…¥çš„è¡¨å•ä¿¡æ¯
       let loginUser =reactive({
        username:'',
        userPwd:''
       })

       // å“åº”å¼æ•°æ®,ä¿å­˜æ ¡éªŒçš„æç¤ºä¿¡æ¯
       let usernameMsg =ref('')
       let userPwdMsg = ref('')

        // æ ¡éªŒç”¨æˆ·åçš„æ–¹æ³•
        function checkUsername(){
            // å®šä¹‰æ­£åˆ™
            var usernameReg=/^[a-zA-Z0-9]{5,10}$/
            // æ ¡éªŒç”¨æˆ·å
            if(!usernameReg.test(loginUser.username)){
                // æ ¼å¼ä¸åˆæ³•
                usernameMsg.value="æ ¼å¼æœ‰è¯¯"
                return false
            }
            usernameMsg.value="ok"
            return true
        }
        // æ ¡éªŒå¯†ç çš„æ–¹æ³•
        function checkUserPwd(){
            // å®šä¹‰æ­£åˆ™
            var passwordReg=/^[0-9]{6}$/
             // æ ¡éªŒå¯†ç 
             if(!passwordReg.test(loginUser.userPwd)){
                // æ ¼å¼ä¸åˆæ³•
                userPwdMsg.value="æ ¼å¼æœ‰è¯¯"
                return false
            }
            userPwdMsg.value="ok"
            return true
        }
</script>

<template>
  <div>
    <h3 class="ht">è¯·ç™»å½•</h3>
        <table class="tab" cellspacing="0px">
            <tr class="ltr">
                <td>è¯·è¾“å…¥è´¦å·</td>
                <td>
                    <input class="ipt" 
                    type="text" 
                    v-model="loginUser.username"
                    @blur="checkUsername()">
                    <span id="usernameMsg" v-text="usernameMsg"></span>
                </td>
            </tr>
            <tr class="ltr">
                <td>è¯·è¾“å…¥å¯†ç </td>
                <td>
                    <input class="ipt" 
                    type="password" 
                    v-model="loginUser.userPwd"
                    @blur="checkUserPwd()">
                    <span id="userPwdMsg" v-text="userPwdMsg"></span>
                </td>
            </tr>
            <tr class="ltr">
                <td colspan="2" class="buttonContainer">
                    <input class="btn1" type="button" value="ç™»å½•">
                    <input class="btn1" type="button" value="é‡ç½®">
                    <router-link to="/regist">
                      <button class="btn1">å»æ³¨å†Œ</button>
                    </router-link>
                </td>
            </tr>
        </table>
  </div>
</template>

<style scoped>
        .ht{
            text-align: center;
            color: cadetblue;
            font-family: å¹¼åœ†;
        }
        .tab{
            width: 500px;
            border: 5px solid cadetblue;
            margin: 0px auto;
            border-radius: 5px;
            font-family: å¹¼åœ†;
        }
        .ltr td{
            border: 1px solid  powderblue;
        }
        .ipt{
            border: 0px;
            width: 50%;
        }
        .btn1{
            border: 2px solid powderblue;
            border-radius: 4px;
            width:60px;
            background-color: antiquewhite;
        }
        #usernameMsg , #userPwdMsg {
            color: gold;
        }
        .buttonContainer{
            text-align: center;
        }
</style>

```

+ Regist.vue è§†å›¾

``` html
<script setup>
      import{ ref,reactive} from 'vue'
       // å“åº”å¼æ•°æ®,ä¿å­˜ç”¨æˆ·è¾“å…¥çš„è¡¨å•ä¿¡æ¯
       let registUser =reactive({
        username:'',
        userPwd:''
       })

       // å“åº”å¼æ•°æ®,ä¿å­˜æ ¡éªŒçš„æç¤ºä¿¡æ¯
       let reUserPwd =ref('')
       let reUserPwdMsg =ref('')
       let usernameMsg =ref('')
       let userPwdMsg = ref('')

          // æ ¡éªŒç”¨æˆ·åçš„æ–¹æ³•
        function checkUsername(){
            // å®šä¹‰æ­£åˆ™
            let usernameReg=/^[a-zA-Z0-9]{5,10}$/
            // æ ¡éªŒ
            if(!usernameReg.test(registUser.username)){
              // æç¤º
              usernameMsg.value = "ä¸åˆæ³•"
              return false
            }
            // é€šè¿‡æ ¡éªŒ
            usernameMsg.value="OK"
            return true
        }
        // æ ¡éªŒå¯†ç çš„æ–¹æ³•
        function checkUserPwd(){
            // å®šä¹‰æ­£åˆ™
            let passwordReg=/^[0-9]{6}$/
             // æ ¡éªŒ
             if(!passwordReg.test(registUser.userPwd)){
              // æç¤º
              userPwdMsg.value = "ä¸åˆæ³•"
              return false
            }
            // é€šè¿‡æ ¡éªŒ
            userPwdMsg.value="OK"
            return true
        }
        // æ ¡éªŒå¯†ç çš„æ–¹æ³•
        function checkReUserPwd(){
            // å®šä¹‰æ­£åˆ™
            let passwordReg=/^[0-9]{6}$/
            // æ ¡éªŒ
            if(!passwordReg.test(reUserPwd.value)){
              // æç¤º
              reUserPwdMsg.value = "ä¸åˆæ³•"
              return false
            }
            console.log(registUser.userPwd,reUserPwd.value)
            // æ ¡éªŒ
            if(!(registUser.userPwd==reUserPwd.value)){
              // æç¤º
              reUserPwdMsg.value = "ä¸ä¸€è‡´"
              return false
            }


            // é€šè¿‡æ ¡éªŒ
            reUserPwdMsg.value="OK"
            return true
        }
</script>

<template>
  <div>
    <h3 class="ht">è¯·æ³¨å†Œ</h3>

    <table class="tab" cellspacing="0px">
        <tr class="ltr">
            <td>è¯·è¾“å…¥è´¦å·</td>
            <td>
                <input class="ipt" 
                  id="usernameInput" 
                  type="text" 
                  name="username" 
                  v-model="registUser.username"
                  @blur="checkUsername()">

                <span id="usernameMsg" class="msg" v-text="usernameMsg"></span>
            </td>
        </tr>
        <tr class="ltr">
            <td>è¯·è¾“å…¥å¯†ç </td>
            <td>
                <input class="ipt" 
                id="userPwdInput" 
                type="password" 
                name="userPwd" 
                v-model="registUser.userPwd"
                @blur="checkUserPwd()">
                <span id="userPwdMsg" class="msg" v-text="userPwdMsg"></span>
            </td>
        </tr>
        <tr class="ltr">
            <td>ç¡®è®¤å¯†ç </td>
            <td>
                <input class="ipt" 
                id="reUserPwdInput" 
                type="password" 
                v-model="reUserPwd"
                @blur="checkReUserPwd()">
                <span id="reUserPwdMsg" class="msg" v-text="reUserPwdMsg"></span>
            </td>
        </tr>
        <tr class="ltr">
            <td colspan="2" class="buttonContainer">
                <input class="btn1" type="button" value="æ³¨å†Œ">
                <input class="btn1" type="button" value="é‡ç½®">
                <router-link to="/login">
                  <button class="btn1">å»ç™»å½•</button>
                </router-link>
            </td>
        </tr>
    </table>


  </div>
</template>

<style scoped>
       .ht{
            text-align: center;
            color: cadetblue;
            font-family: å¹¼åœ†;
        }
        .tab{
            width: 500px;
            border: 5px solid cadetblue;
            margin: 0px auto;
            border-radius: 5px;
            font-family: å¹¼åœ†;
        }
        .ltr td{
            border: 1px solid  powderblue;

        }
        .ipt{
            border: 0px;
            width: 50%;

        }
        .btn1{
            border: 2px solid powderblue;
            border-radius: 4px;
            width:60px;
            background-color: antiquewhite;

        }
        .msg {
            color: gold;
        }
        .buttonContainer{
            text-align: center;
        }
</style>

```

+ ShowSchedule.vue è§†å›¾

``` html
<script setup>

</script>

<template>
  <div>
    <h3 class="ht">æ‚¨çš„æ—¥ç¨‹å¦‚ä¸‹</h3>
<table class="tab" cellspacing="0px">
    <tr class="ltr">
        <th>ç¼–å·</th>
        <th>å†…å®¹</th>
        <th>è¿›åº¦</th>
        <th>æ“ä½œ</th>
    </tr>
    <tr class="ltr">
        <td></td>
        <td></td>
        <td></td>
        <td class="buttonContainer">
             <button class="btn1">åˆ é™¤</button>
            <button class="btn1">ä¿å­˜ä¿®æ”¹</button>
        </td>
    </tr>
    <tr class="ltr buttonContainer" >
        <td colspan="4">
            <button class="btn1">æ–°å¢æ—¥ç¨‹</button>
        </td>

    </tr>
</table>
  </div>
</template>

<style scoped>

      .ht{
            text-align: center;
            color: cadetblue;
            font-family: å¹¼åœ†;
        }
        .tab{
            width: 80%;
            border: 5px solid cadetblue;
            margin: 0px auto;
            border-radius: 5px;
            font-family: å¹¼åœ†;
        }
        .ltr td{
            border: 1px solid  powderblue;

        }
        .ipt{
            border: 0px;
            width: 50%;

        }
        .btn1{
            border: 2px solid powderblue;
            border-radius: 4px;
            width:100px;
            background-color: antiquewhite;

        }
        #usernameMsg , #userPwdMsg {
            color: gold;
        }

        .buttonContainer{
            text-align: center;
        }

</style>

```

+ App.vue è§†å›¾

``` html
<script setup>

import Header from './components/Header.vue'
</script>

<template>
  <div>
    <Header></Header>
    <hr>
    <!-- ç”¨äºè·¯ç”±åˆ‡æ¢è§†å›¾ä½¿ç”¨ -->
    <router-view></router-view>
  
  </div>
</template>

<style scoped>

</style>

```



+ é…ç½®è·¯ç”±

``` javascript
import {createRouter,createWebHashHistory} from 'vue-router'


import Login from '../components/Login.vue'
import Regist from '../components/Regist.vue'
import ShowScedule from '../components/ShowSchedule.vue'

let  router = createRouter({
    history:createWebHashHistory(),
    routes:[
        {
            path:"/",
            component:Login
        },
        {
            path:"/login",
            component:Login
        },
        {
            path:"/showSchedule",
            component:ShowScedule
        },
        {
            path:"/regist",
            component:Regist
        }


    ]
})

export default router
```



+ é…ç½® main.js

``` javascript
import { createApp } from 'vue'

import App from './App.vue'

// å¯¼å…¥è·¯ç”±
import router from './router/router.js'

let app =createApp(App)

// å…¨å±€ä½¿ç”¨è·¯ç”±
app.use(router)

app.mount('#app')

```
